"use strict";!function(){angular.module("Meals",["ui.router"])}(),function(){function e(e,n){e.state("app",{url:"/app",template:"<app-page></app-page>"}).state("app.main",{url:"/main",template:"<main-page></main-page>"}).state("app.main.meals",{url:"/meals",template:"<meals-list id='mealsList'></meals-list>"}).state("app.main.drinks",{url:"/drinks",template:"<drinks-list></drinks-list>"}).state("app.meal",{url:"/meal/:path",controllerAs:"meal",controller:t,template:"<meal-page id='meal' path='{{ meal.path }}'></meal-page>"}).state("app.cart",{url:"/cart",template:"<cart-page id='cart'></cart-page>"}).state("error",{url:"/error",template:"<error-page></error-page>"}),n.otherwise("/app/main/meals")}function t(e){this.path=e.path}e.$inject=["$stateProvider","$urlRouterProvider"],t.$inject=["$stateParams"],angular.module("Meals").config(e)}(),function(){function e(){function e(e){var t=0,n=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var i=a.value;t+=i.price}}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return t}function t(){return f}function n(e){f=e}function r(){return s.length}function o(e){m=e}function a(e,t){var n={};n.id=e.id,n.name=e.name,n.price=e.price,n.amount=t,m&&(n.modifiers=m.slice()),m=null,s.push(n)}function l(){return s}function i(){var t=0;if(s.length>0)for(var n=0,r=s.length;n<r;n++)t+=s[n].price*s[n].amount,s[n].modifiers&&(t+=e(s[n].modifiers)*s[n].amount);return t.toFixed(2)}function c(){m=null}function u(){s.splice(f,1)}var s=[],m=null,f=0,p={getIndexEditMeal:t,setIndexEditMeal:n,getCartListCount:r,addModifiersToList:o,addMealToCartList:a,getCartList:l,getTotalPrice:i,deleteModifiers:c,removeMeal:u,getModifiersPrice:e};return p}angular.module("Meals").factory("CartFactory",e)}(),function(){function e(e,t){function n(e,t,n){i(e),u(t),f(n)}function r(t){return e({method:"GET",url:d}).success(function(e){g=e,M=e.currency,t.resolve(e)}).error(function(e,n){t.reject("Error in $http request"),console.log(e),console.log(n)}),t}function o(){return null!==h&&h.modifiers}function a(){var e=t.defer();return g?e.resolve(g):e=r(e),e.promise}function l(){return h}function i(e){h=e}function c(){return C}function u(e){C=e}function s(){return M}function m(){return y}function f(e){y=e}function p(e){h=g.products.filter(function(t){return t.id===e})[0],h||(h=g.drinks.filter(function(t){return t.id===e})[0])}var d="meals.json",g=null,M="",h=null,C="new",y=1,v={getModifiers:o,getMeals:a,getCurrentMeal:l,setCurrentMeal:i,getCurrentMealStatus:c,setCurrentMealStatus:u,getCurrency:s,getCurrentMealAmount:m,setCurrentMealAmount:f,setCurrentMealById:p,openMeal:n};return v}e.$inject=["$http","$q"],angular.module("Meals").factory("MealsFactory",e)}(),function(){function e(e){function t(){var t=e.getCartList()[e.getIndexEditMeal()];return t.modifiers}function n(e,t){return e.some(function(e){return t.name===e.name})}function r(e,t){return e.filter(function(e){return t.name!==e.name})}function o(t,o){var a=t.slice();return n(a,o)?a=r(a,o):a.push(o),e.addModifiersToList(a),a}function a(e,t){var n=[];if(t)for(var r=0,o=t.length;r<o;r++)for(var a=0,l=e.length;a<l;a++)e[a].name===t[r].name&&(e[a].check=!0,n.push(e[a]));return n}var l={getCheckedModifiers:t,modifierHasBeenSelected:n,deleteModifier:r,selectModifier:o,pickCheckedModifiers:a};return l}e.$inject=["CartFactory"],angular.module("Meals").factory("ModifiersFactory",e)}(),function(){function e(){}angular.module("Meals").component("appPage",{templateUrl:"component-templates/app/template/appPage.html",bindings:{},controllerAs:"app",controller:e})}(),function(){function e(e,t){function n(n,r){t.setIndexEditMeal(r),e.setCurrentMealById(n.id),e.setCurrentMealAmount(n.amount),e.setCurrentMealStatus("edit")}var r=this;r.currency=e.getCurrency(),r.cartList=t.getCartList(),r.totalPrice=t.getTotalPrice(),r.editMeal=n}e.$inject=["MealsFactory","CartFactory"],angular.module("Meals").component("cartPage",{templateUrl:"component-templates/cart/template/cartPage.html",bindings:{},controllerAs:"cart",controller:e})}(),function(){function e(){}angular.module("Meals").component("cartIconPage",{templateUrl:"component-templates/cartIcon/template/cartIconPage.html",bindings:{count:"@"},controllerAs:"cartIcon",controller:e})}(),function(){function e(){}angular.module("Meals").component("errorPage",{templateUrl:"component-templates/error/template/errorPage.html",bindings:{},controllerAs:"error",controller:e})}(),function(){function e(e){function t(){e.getMeals().then(n)}function n(e){a.currency=e.currency,a.drinks=e.drinks}function r(t){e.openMeal(t,"new",1)}function o(){return a.onlySoftDrinks?a.drinks.filter(function(e){return e.tipple!==!0}):a.drinks}var a=this;a.drinks=[],a.onlySoftDrinks=!1,a.currency="",a.openDrink=r,a.getDrinksForView=o,t()}e.$inject=["MealsFactory"],angular.module("Meals").component("drinksList",{templateUrl:"component-templates/drinksList/template/drinksList.html",bindings:{},controllerAs:"drinksList",controller:e})}(),function(){function e(){}angular.module("Meals").component("footerPage",{templateUrl:"component-templates/footer/template/footerPage.html",bindings:{},controllerAs:"footer",controller:e})}(),function(){function e(){}angular.module("Meals").component("headerPage",{templateUrl:"component-templates/header/template/headerPage.html",bindings:{},controllerAs:"header",controller:e})}(),function(){function e(){}angular.module("Meals").component("logoPage",{templateUrl:"component-templates/logo/template/logoPage.html",bindings:{},controllerAs:"logo",controller:e})}(),function(){function e(){}angular.module("Meals").component("mainPage",{templateUrl:"component-templates/main/template/mainPage.html",bindings:{},controllerAs:"main",controller:e})}(),function(){function e(e,t){function n(){t.addMealToCartList(a.currentMeal,a.selectAmount)}function r(){t.removeMeal(),t.deleteModifiers()}function o(){t.removeMeal(),a.addMeal()}var a=this;a.currentMeal=e.getCurrentMeal(),a.currency=e.getCurrency(),a.selectAmount=e.getCurrentMealAmount(),a.mealStatus=e.getCurrentMealStatus(),a.cartCount=t.getCartListCount(),a.addMeal=n,a.removeMeal=r,a.saveMeal=o}e.$inject=["MealsFactory","CartFactory"],angular.module("Meals").component("mealPage",{templateUrl:"component-templates/meal/template/mealPage.html",bindings:{path:"@"},controllerAs:"meal",controller:e})}(),function(){function e(e){function t(){e.getMeals().then(n)}function n(e){o.currency=e.currency,o.products=e.products}function r(t){e.openMeal(t,"new",1)}var o=this;o.openMeal=r,o.currency="",o.products=null,t()}e.$inject=["MealsFactory"],angular.module("Meals").component("mealsList",{templateUrl:"component-templates/mealsList/template/mealsList.html",bindings:{},controllerAs:"mealsList",controller:e})}(),function(){function e(){}angular.module("Meals").component("menuPage",{templateUrl:"component-templates/menu/template/menuPage.html",bindings:{},controllerAs:"menu",controller:e})}(),function(){function e(e,t){function n(){o.modifiers&&o.modifiers.forEach(function(e){return e.check=!1})}function r(e){a=t.selectModifier(a,e)}var o=this,a=[];if(o.modifiers=e.getModifiers(),o.selectModifier=r,o.cleanPickModifiers=n,o.cleanPickModifiers(),"edit"===e.getCurrentMealStatus()){var l=t.getCheckedModifiers();a=t.pickCheckedModifiers(o.modifiers,l)}}e.$inject=["MealsFactory","ModifiersFactory"],angular.module("Meals").component("modifiersPage",{templateUrl:"component-templates/modifiers/template/modifiersPage.html",bindings:{currency:"@"},controllerAs:"mod",controller:e})}(),function(){function e(){function e(e){n.select=e}function t(e){return n.select===e}var n=this;n.selectNum=e,n.activeNum=t}angular.module("Meals").component("selectCount",{templateUrl:"component-templates/selectCount/template/selectCountPage.html",bindings:{select:"="},controllerAs:"select",controller:e})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1haW4uanMiLCJjb25maWcuanMiLCJjYXJ0RmFjdG9yeS5qcyIsIm1lYWxzRmFjdG9yeS5qcyIsIm1vZGlmaWVyc0ZhY3RvcnkuanMiLCJhcHAvYXBwLmpzIiwiY2FydC9jYXJ0LmpzIiwiY2FydEljb24vY2FydEljb24uanMiLCJlcnJvci9lcnJvci5qcyIsImRyaW5rc0xpc3QvZHJpbmtzTGlzdC5qcyIsImZvb3Rlci9mb290ZXIuanMiLCJoZWFkZXIvaGVhZGVyLmpzIiwibG9nby9sb2dvLmpzIiwibWFpbi9tYWluLmpzIiwibWVhbC9tZWFsLmpzIiwibWVhbHNMaXN0L21lYWxzTGlzdC5qcyIsIm1lbnUvbWVudS5qcyIsIm1vZGlmaWVycy9tb2RpZmllcnMuanMiLCJzZWxlY3RDb3VudC9zZWxlY3RDb3VudC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlIiwiY29udHJvbGxlckFzIiwiY29udHJvbGxlciIsIk1lYWxDb250cm9sbGVyIiwib3RoZXJ3aXNlIiwiJHN0YXRlUGFyYW1zIiwidGhpcyIsInBhdGgiLCJDYXJ0RmFjdG9yeSIsImdldE1vZGlmaWVyc1ByaWNlIiwibW9kaWZpZXJzQXJyIiwidG90YWxQcmljZSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwidW5kZWZpbmVkIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwibW9kaWZpZXIiLCJ2YWx1ZSIsInByaWNlIiwiZXJyIiwicmV0dXJuIiwiZ2V0SW5kZXhFZGl0TWVhbCIsImluZGV4RWRpdE1lYWwiLCJzZXRJbmRleEVkaXRNZWFsIiwiaW5kZXgiLCJnZXRDYXJ0TGlzdENvdW50IiwiY2FydExpc3QiLCJsZW5ndGgiLCJhZGRNb2RpZmllcnNUb0xpc3QiLCJtb2RpZiIsIm1vZGlmaWVycyIsImFkZE1lYWxUb0NhcnRMaXN0IiwibWVhbCIsImFtb3VudCIsIm5ld01lYWwiLCJpZCIsIm5hbWUiLCJzbGljZSIsInB1c2giLCJnZXRDYXJ0TGlzdCIsImdldFRvdGFsUHJpY2UiLCJpIiwibGVuIiwidG9GaXhlZCIsImRlbGV0ZU1vZGlmaWVycyIsInJlbW92ZU1lYWwiLCJzcGxpY2UiLCJmYWN0b3J5IiwiTWVhbHNGYWN0b3J5IiwiJGh0dHAiLCIkcSIsIm9wZW5NZWFsIiwic3RhdHVzIiwic2V0Q3VycmVudE1lYWwiLCJzZXRDdXJyZW50TWVhbFN0YXR1cyIsInNldEN1cnJlbnRNZWFsQW1vdW50IiwiZ2V0TWVhbHNGcm9tSHR0cCIsImRlZmVycmVkIiwibWV0aG9kIiwibWVhbEFwaVVybCIsInN1Y2Nlc3MiLCJkYXRhIiwibWVhbHMiLCJjdXJyZW5jeSIsInJlc29sdmUiLCJlcnJvciIsInJlamVjdCIsImNvbnNvbGUiLCJsb2ciLCJnZXRNb2RpZmllcnMiLCJjdXJyZW50TWVhbCIsImdldE1lYWxzIiwiZGVmZXIiLCJwcm9taXNlIiwiZ2V0Q3VycmVudE1lYWwiLCJnZXRDdXJyZW50TWVhbFN0YXR1cyIsImN1cnJlbnRNZWFsU3RhdHVzIiwiZ2V0Q3VycmVuY3kiLCJnZXRDdXJyZW50TWVhbEFtb3VudCIsImN1cnJlbnRBbW91bnQiLCJzZXRDdXJyZW50TWVhbEJ5SWQiLCJwcm9kdWN0cyIsImZpbHRlciIsIml0ZW0iLCJkcmlua3MiLCJNb2RpZmllcnNGYWN0b3J5IiwiZ2V0Q2hlY2tlZE1vZGlmaWVycyIsIm1vZGlmaWVySGFzQmVlblNlbGVjdGVkIiwic2VsZWN0ZWRNb2RpZmllcnMiLCJzb21lIiwiZGVsZXRlTW9kaWZpZXIiLCJzZWxlY3RNb2RpZmllciIsInNlbGVjdGVkTW9kaWYiLCJwaWNrQ2hlY2tlZE1vZGlmaWVycyIsImNoZWNrZWRNb2RpZmllcnMiLCJsZW5DaGVja2VkTW9kaWZpZXJzIiwiaiIsImxlbk1vZGlmaWVycyIsImNoZWNrIiwiQXBwQ29udHJvbGxlciIsImNvbXBvbmVudCIsInRlbXBsYXRlVXJsIiwiYmluZGluZ3MiLCJDYXJ0Q29udHJvbGxlciIsImVkaXRNZWFsIiwidm0iLCJDYXJ0SWNvbkNvbnRyb2xsZXIiLCJjb3VudCIsIkVycm9yQ29udHJvbGxlciIsIkRyaW5rc0xpc3RDb250cm9sbGVyIiwiYWN0aXZhdGUiLCJ0aGVuIiwiZ2V0RHJpbmtzIiwiZHJpbmtzT2JqIiwib3BlbkRyaW5rIiwiZHJpbmsiLCJnZXREcmlua3NGb3JWaWV3Iiwib25seVNvZnREcmlua3MiLCJ0aXBwbGUiLCJGb290ZXJDb250cm9sbGVyIiwiSGVhZGVyQ29udHJvbGxlciIsIkxvZ29Db250cm9sbGVyIiwiTWFpbkNvbnRyb2xsZXIiLCJhZGRNZWFsIiwic2VsZWN0QW1vdW50Iiwic2F2ZU1lYWwiLCJtZWFsU3RhdHVzIiwiY2FydENvdW50IiwiTWVhbHNMaXN0Q29udHJvbGxlciIsImdldFByb2R1Y3RzIiwibWVhbHNPYmoiLCJNZW51Q29udHJvbGxlciIsIk1vZGlmaWVyc0NvbnRyb2xsZXIiLCJjbGVhblBpY2tNb2RpZmllcnMiLCJmb3JFYWNoIiwiU2VsZWN0Q291bnRDb250cm9sbGVyIiwic2VsZWN0TnVtIiwibnVtIiwic2VsZWN0IiwiYWN0aXZlTnVtIl0sIm1hcHBpbmdzIjoiQUFBQSxjQ0FBLFdBR0lBLFFBQ0tDLE9BQU8sU0FDSixpQkNMWixXQU9JLFFBQVNDLEdBQU9DLEVBQWdCQyxHQUU1QkQsRUFDS0UsTUFBTSxPQUNIQyxJQUFLLE9BQ0xDLFNBQVUsMEJBRWJGLE1BQU0sWUFDSEMsSUFBSyxRQUNMQyxTQUFVLDRCQUViRixNQUFNLGtCQUNIQyxJQUFLLFNBQ0xDLFNBQVUsNkNBRWJGLE1BQU0sbUJBQ0hDLElBQUssVUFDTEMsU0FBVSxnQ0FFYkYsTUFBTSxZQUNIQyxJQUFLLGNBQ0xFLGFBQWMsT0FDZEMsV0FBWUMsRUFDWkgsU0FBVSw2REFFYkYsTUFBTSxZQUNIQyxJQUFL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QixXQWdDSSxRQUFTRyxLQWdCTCxRQUFTQyxHQUFVQyxHQUNmaEMsRUFBR2lDLE9BQVNELEVBY2hCLFFBQVNFLEdBQVVGLEdBQ2YsTUFBT2hDLEdBQUdpQyxTQUFXRCxFQTlCekIsR0FBTWhDLEdBQUt6RyxJQUVYeUcsR0FBRytCLFVBQVlBLEVBQ2YvQixFQUFHa0MsVUFBWUEsRUFsQ25CeEosUUFDS0MsT0FBTyxTQVdQZ0gsVUFBVSxlQUNQQyxZQUFhLGdFQUNiQyxVQUNJb0MsT0FBUSxLQUVaL0ksYUFBYyxTQUNkQyxXQUFZMkkiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcIk1lYWxzXCIsIFtcInVpLnJvdXRlclwiXSk7XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcIk1lYWxzXCIpLmNvbmZpZyhjb25maWcpO1xuXG4gICAgZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcblxuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZShcImFwcFwiLCB7XG4gICAgICAgICAgICB1cmw6IFwiL2FwcFwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGFwcC1wYWdlPjwvYXBwLXBhZ2U+XCJcbiAgICAgICAgfSkuc3RhdGUoXCJhcHAubWFpblwiLCB7XG4gICAgICAgICAgICB1cmw6IFwiL21haW5cIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxtYWluLXBhZ2U+PC9tYWluLXBhZ2U+XCJcbiAgICAgICAgfSkuc3RhdGUoXCJhcHAubWFpbi5tZWFsc1wiLCB7XG4gICAgICAgICAgICB1cmw6IFwiL21lYWxzXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8bWVhbHMtbGlzdCBpZD0nbWVhbHNMaXN0Jz48L21lYWxzLWxpc3Q+XCJcbiAgICAgICAgfSkuc3RhdGUoXCJhcHAubWFpbi5kcmlua3NcIiwge1xuICAgICAgICAgICAgdXJsOiBcIi9kcmlua3NcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkcmlua3MtbGlzdD48L2RyaW5rcy1saXN0PlwiXG4gICAgICAgIH0pLnN0YXRlKFwiYXBwLm1lYWxcIiwge1xuICAgICAgICAgICAgdXJsOiBcIi9tZWFsLzpwYXRoXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6IFwibWVhbFwiLFxuICAgICAgICAgICAgY29udHJvbGxlcjogTWVhbENvbnRyb2xsZXIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8bWVhbC1wYWdlIGlkPSdtZWFsJyBwYXRoPSd7eyBtZWFsLnBhdGggfX0nPjwvbWVhbC1wYWdlPlwiXG4gICAgICAgIH0pLnN0YXRlKFwiYXBwLmNhcnRcIiwge1xuICAgICAgICAgICAgdXJsOiBcIi9jYXJ0XCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8Y2FydC1wYWdlIGlkPSdjYXJ0Jz48L2NhcnQtcGFnZT5cIlxuICAgICAgICB9KS5zdGF0ZShcImVycm9yXCIsIHtcbiAgICAgICAgICAgIHVybDogXCIvZXJyb3JcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxlcnJvci1wYWdlPjwvZXJyb3ItcGFnZT5cIlxuICAgICAgICB9KTtcblxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL2FwcC9tYWluL21lYWxzXCIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIE1lYWxDb250cm9sbGVyKCRzdGF0ZVBhcmFtcykge1xuICAgICAgICB0aGlzLnBhdGggPSAkc3RhdGVQYXJhbXMucGF0aDtcbiAgICB9XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcIk1lYWxzXCIpLmZhY3RvcnkoXCJDYXJ0RmFjdG9yeVwiLCBDYXJ0RmFjdG9yeSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogRmFjdG9yeSB3b3JrIHdpdGggY2FydC5cclxuICAgICAqXHJcbiAgICAgKiovXG4gICAgZnVuY3Rpb24gQ2FydEZhY3RvcnkoKSB7XG5cbiAgICAgICAgdmFyIGNhcnRMaXN0ID0gW10sXG4gICAgICAgICAgICBtb2RpZmllcnMgPSBudWxsLFxuICAgICAgICAgICAgaW5kZXhFZGl0TWVhbCA9IDAsXG4gICAgICAgICAgICBmYWN0b3J5ID0ge1xuICAgICAgICAgICAgZ2V0SW5kZXhFZGl0TWVhbDogZ2V0SW5kZXhFZGl0TWVhbCxcbiAgICAgICAgICAgIHNldEluZGV4RWRpdE1lYWw6IHNldEluZGV4RWRpdE1lYWwsXG4gICAgICAgICAgICBnZXRDYXJ0TGlzdENvdW50OiBnZXRDYXJ0TGlzdENvdW50LFxuICAgICAgICAgICAgYWRkTW9kaWZpZXJzVG9MaXN0OiBhZGRNb2RpZmllcnNUb0xpc3QsXG4gICAgICAgICAgICBhZGRNZWFsVG9DYXJ0TGlzdDogYWRkTWVhbFRvQ2FydExpc3QsXG4gICAgICAgICAgICBnZXRDYXJ0TGlzdDogZ2V0Q2FydExpc3QsXG4gICAgICAgICAgICBnZXRUb3RhbFByaWNlOiBnZXRUb3RhbFByaWNlLFxuICAgICAgICAgICAgZGVsZXRlTW9kaWZpZXJzOiBkZWxldGVNb2RpZmllcnMsXG4gICAgICAgICAgICByZW1vdmVNZWFsOiByZW1vdmVNZWFsLFxuICAgICAgICAgICAgZ2V0TW9kaWZpZXJzUHJpY2U6IGdldE1vZGlmaWVyc1ByaWNlXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2dldE1vZGlmaWVyc1ByaWNlXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIHRvdGFsIHByaWNlIG9mIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IG1vZGlmaWVyc0FyciBBcnJheSBvZiBtb2RpZmllcnMgb2JqZWN0cy5cclxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRvdGFsIHByaWNlLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0TW9kaWZpZXJzUHJpY2UobW9kaWZpZXJzQXJyKSB7XG4gICAgICAgICAgICB2YXIgdG90YWxQcmljZSA9IDA7XG5cbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IG1vZGlmaWVyc0FycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGlmaWVyID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgdG90YWxQcmljZSArPSBtb2RpZmllci5wcmljZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdG90YWxQcmljZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNnZXRJbmRleEVkaXRNZWFsXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIGluZGV4IGZvIGVkaXQgbWVhbC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gSW5kZXggb2YgZWRpdCBtZWFsLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0SW5kZXhFZGl0TWVhbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBpbmRleEVkaXRNZWFsO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I3NldEluZGV4RWRpdE1lYWxcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBTZXQgaW5kZXggb2YgZWRpdCBtZWFsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4IG9mIGVkaXQgbWVhbC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIHNldEluZGV4RWRpdE1lYWwoaW5kZXgpIHtcbiAgICAgICAgICAgIGluZGV4RWRpdE1lYWwgPSBpbmRleDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNnZXRDYXJ0TGlzdENvdW50XHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIGNvdW50IG9mIGVsZW1lbnRzIGluIGNhcnQgbGlzdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gQ2FydCBsaXN0IGxlbmd0aC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGdldENhcnRMaXN0Q291bnQoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FydExpc3QubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2FkZE1vZGlmaWVyc1RvTGlzdFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIEFkZCBtb2RpZmllcnMgdG8gbGlzdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IG1vZGlmIEFycmF5IHdpdGggbW9kaWZpZXJzIG9iamVjdHMuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBhZGRNb2RpZmllcnNUb0xpc3QobW9kaWYpIHtcbiAgICAgICAgICAgIG1vZGlmaWVycyA9IG1vZGlmO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2FkZE1lYWxUb0NhcnRMaXN0XHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQWRkIG1lYWwgdG8gY2FydCBsaXN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1lYWwgTWVhbCBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCBBbW91bnQgb2YgbWVhbC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGFkZE1lYWxUb0NhcnRMaXN0KG1lYWwsIGFtb3VudCkge1xuICAgICAgICAgICAgdmFyIG5ld01lYWwgPSB7fTtcblxuICAgICAgICAgICAgbmV3TWVhbC5pZCA9IG1lYWwuaWQ7XG4gICAgICAgICAgICBuZXdNZWFsLm5hbWUgPSBtZWFsLm5hbWU7XG4gICAgICAgICAgICBuZXdNZWFsLnByaWNlID0gbWVhbC5wcmljZTtcbiAgICAgICAgICAgIG5ld01lYWwuYW1vdW50ID0gYW1vdW50O1xuXG4gICAgICAgICAgICBpZiAobW9kaWZpZXJzKSB7XG4gICAgICAgICAgICAgICAgbmV3TWVhbC5tb2RpZmllcnMgPSBtb2RpZmllcnMuc2xpY2UoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbW9kaWZpZXJzID0gbnVsbDtcbiAgICAgICAgICAgIGNhcnRMaXN0LnB1c2gobmV3TWVhbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjZ2V0Q2FydExpc3RcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gY2FydCBsaXN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7b2JqZWN0W119IENhcnQgbGlzdC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGdldENhcnRMaXN0KCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhcnRMaXN0O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2dldFRvdGFsUHJpY2VcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gY2FydCBsaXN0IHRvdGFsIHByaWNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBDYXJ0IGxpc3QgdG90YWwgcHJpY2UuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBnZXRUb3RhbFByaWNlKCkge1xuICAgICAgICAgICAgdmFyIHRvdGFsUHJpY2UgPSAwO1xuXG4gICAgICAgICAgICBpZiAoY2FydExpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYXJ0TGlzdC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsUHJpY2UgKz0gY2FydExpc3RbaV0ucHJpY2UgKiBjYXJ0TGlzdFtpXS5hbW91bnQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcnRMaXN0W2ldLm1vZGlmaWVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxQcmljZSArPSBnZXRNb2RpZmllcnNQcmljZShjYXJ0TGlzdFtpXS5tb2RpZmllcnMpICogY2FydExpc3RbaV0uYW1vdW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdG90YWxQcmljZS50b0ZpeGVkKDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2RlbGV0ZU1vZGlmaWVyc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJlc2V0IG1vZGlmaWVycyB2YWx1ZS5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZU1vZGlmaWVycygpIHtcbiAgICAgICAgICAgIG1vZGlmaWVycyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjcmVtb3ZlTWVhbFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJlbW92ZSBlZGl0IG1lYWwgb2YgY2FydCBsaXN0LlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTWVhbCgpIHtcbiAgICAgICAgICAgIGNhcnRMaXN0LnNwbGljZShpbmRleEVkaXRNZWFsLCAxKTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKS5mYWN0b3J5KFwiTWVhbHNGYWN0b3J5XCIsIE1lYWxzRmFjdG9yeSk7XG5cblx0LyoqXHJcbiAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgKiBAcmVxdWlyZXMgJGh0dHBcclxuICAqIEByZXF1aXJlcyAkcVxyXG4gICpcclxuICAqIEBkZXNjcmlwdGlvblxyXG4gICogRmFjdG9yeSBnZXQgY3VycmVuY3ksIGFycmF5IG9mIHByb2R1Y3RzIGFuZCBhcnJheSBvZiBkcmlua3MsXHJcbiAgKiBhbmQgd29yayB3aXRoIGN1cnJlbnQgbWVhbC5cclxuICAqXHJcbiAgKiovXG5cdGZ1bmN0aW9uIE1lYWxzRmFjdG9yeSgkaHR0cCwgJHEpIHtcblxuXHRcdHZhciBtZWFsQXBpVXJsID0gXCJtZWFscy5qc29uXCIsXG5cdFx0ICAgIG1lYWxzID0gbnVsbCxcblx0XHQgICAgY3VycmVuY3kgPSBcIlwiLFxuXHRcdCAgICBjdXJyZW50TWVhbCA9IG51bGwsXG5cdFx0ICAgIGN1cnJlbnRNZWFsU3RhdHVzID0gXCJuZXdcIixcblx0XHQgICAgY3VycmVudEFtb3VudCA9IDEsXG5cdFx0ICAgIGZhY3RvcnkgPSB7XG5cdFx0XHRnZXRNb2RpZmllcnM6IGdldE1vZGlmaWVycyxcblx0XHRcdGdldE1lYWxzOiBnZXRNZWFscyxcblx0XHRcdGdldEN1cnJlbnRNZWFsOiBnZXRDdXJyZW50TWVhbCxcblx0XHRcdHNldEN1cnJlbnRNZWFsOiBzZXRDdXJyZW50TWVhbCxcblx0XHRcdGdldEN1cnJlbnRNZWFsU3RhdHVzOiBnZXRDdXJyZW50TWVhbFN0YXR1cyxcblx0XHRcdHNldEN1cnJlbnRNZWFsU3RhdHVzOiBzZXRDdXJyZW50TWVhbFN0YXR1cyxcblx0XHRcdGdldEN1cnJlbmN5OiBnZXRDdXJyZW5jeSxcblx0XHRcdGdldEN1cnJlbnRNZWFsQW1vdW50OiBnZXRDdXJyZW50TWVhbEFtb3VudCxcblx0XHRcdHNldEN1cnJlbnRNZWFsQW1vdW50OiBzZXRDdXJyZW50TWVhbEFtb3VudCxcblx0XHRcdHNldEN1cnJlbnRNZWFsQnlJZDogc2V0Q3VycmVudE1lYWxCeUlkLFxuXHRcdFx0b3Blbk1lYWw6IG9wZW5NZWFsXG5cdFx0fTtcblxuXHRcdHJldHVybiBmYWN0b3J5O1xuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNvcGVuTWVhbFxyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFNldCBjdXJyZW50IG1lYWwsIGN1cnJlbnQgbWVhbCBzdGF0dXMgYW5kIGN1cnJlbnQgbWVhbCBhbW91bnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge29iamVjdH0gbWVhbCAgIEN1cnJlbnQgbWVhbC5cclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIE1lYWwgc3RhdHVzKFwibmV3XCIgb3IgXCJlZGl0XCIpLlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgTWVhbCBhbW91bnQuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIG9wZW5NZWFsKG1lYWwsIHN0YXR1cywgYW1vdW50KSB7XG5cdFx0XHRzZXRDdXJyZW50TWVhbChtZWFsKTtcblx0XHRcdHNldEN1cnJlbnRNZWFsU3RhdHVzKHN0YXR1cyk7XG5cdFx0XHRzZXRDdXJyZW50TWVhbEFtb3VudChhbW91bnQpO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0TWVhbHNGcm9tSHR0cFxyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBPYnRhaW5pbmcgZGF0YSBvbiBmb29kcyBhbmQgZHJpbmtzIGZyb20gdGhlIHNlcnZlci5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkZWZlcnJlZCBEZWZlcnJlZCBvYmplY3QuXHJcbiAgICogQHJldHVybiB7b2JqZWN0fSBEZWZlcnJlZCBvYmplY3Qgd2l0aCByZXNvbHZlIGFuZCByZWplY3QuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIGdldE1lYWxzRnJvbUh0dHAoZGVmZXJyZWQpIHtcblxuXHRcdFx0JGh0dHAoeyBtZXRob2Q6IFwiR0VUXCIsIHVybDogbWVhbEFwaVVybCB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG5cdFx0XHRcdG1lYWxzID0gZGF0YTtcblx0XHRcdFx0Y3VycmVuY3kgPSBkYXRhLmN1cnJlbmN5O1xuXG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XG5cdFx0XHR9KS5lcnJvcihmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdChcIkVycm9yIGluICRodHRwIHJlcXVlc3RcIik7XG5cblx0XHRcdFx0Y29uc29sZS5sb2coZGF0YSk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKHN0YXR1cyk7XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0TW9kaWZpZXJzXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIElmIG1lYWxzIGhhdmUgbW9kaWZpZXJzIHJldHVybiB0aGVtIGVsc2UgcmV0dXJuIGZhbHNlXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtvYmplY3R8Ym9vbGVhbn0gQ3VycmVudCBtZWFsIG1vZGlmaWVycyBvciBmYWxzZS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gZ2V0TW9kaWZpZXJzKCkge1xuXG5cdFx0XHRpZiAoY3VycmVudE1lYWwgIT09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuIGN1cnJlbnRNZWFsLm1vZGlmaWVycztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldE1lYWxzXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFJldHVybiBwcm9taXNlIHdpdGggdGhlIHJlc3BvbnNlIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlciBvclxyXG4gICAqIGlmIHRoZSByZXF1ZXN0IGhhcyBhbHJlYWR5IGJlZW4sIHJldHVybiBwcm9taXNlIHdpdGggdGhlXHJcbiAgICogbWVhbHMgb2JqZWN0LlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7b2JqZWN0fSBQcm9taXNlLlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBnZXRNZWFscygpIHtcblx0XHRcdHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cblx0XHRcdGlmICghbWVhbHMpIHtcblx0XHRcdFx0ZGVmZXJyZWQgPSBnZXRNZWFsc0Zyb21IdHRwKGRlZmVycmVkKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUobWVhbHMpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0XHR9XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldEN1cnJlbnRNZWFsXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFJldHVybiBjdXJyZW50IG1lYWwuXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtvYmplY3R9IEN1cnJlbnQgbWVhbC5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gZ2V0Q3VycmVudE1lYWwoKSB7XG5cdFx0XHRyZXR1cm4gY3VycmVudE1lYWw7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNzZXRDdXJyZW50TWVhbFxyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXQgY3VycmVudCBtZWFsLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IG1lYWwgQ3VycmVudCBtZWFsLlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBzZXRDdXJyZW50TWVhbChtZWFsKSB7XG5cdFx0XHRjdXJyZW50TWVhbCA9IG1lYWw7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRDdXJyZW50TWVhbFN0YXR1c1xyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXR1cm4gY3VycmVudCBtZWFsIHN0YXR1cyhcIm5ld1wiIG9yIFwiZWRpdFwiKS5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVudCBtZWFsIHN0YXR1cyhcIm5ld1wiIG9yIFwiZWRpdFwiKS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gZ2V0Q3VycmVudE1lYWxTdGF0dXMoKSB7XG5cdFx0XHRyZXR1cm4gY3VycmVudE1lYWxTdGF0dXM7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNzZXRDdXJyZW50TWVhbFN0YXR1c1xyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXQgY3VycmVudCBtZWFsIHN0YXR1cyhcIm5ld1wiIG9yIFwiZWRpdFwiKS5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0dXMgQ3VycmVudCBtZWFsIHN0YXR1cyhcIm5ld1wiIG9yIFwiZWRpdFwiKS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gc2V0Q3VycmVudE1lYWxTdGF0dXMoc3RhdHVzKSB7XG5cdFx0XHRjdXJyZW50TWVhbFN0YXR1cyA9IHN0YXR1cztcblx0XHR9XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldEN1cnJlbmN5XHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFJldHVybiBjdXJyZW5jeS5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVuY3kuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIGdldEN1cnJlbmN5KCkge1xuXHRcdFx0cmV0dXJuIGN1cnJlbmN5O1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0Q3VycmVudE1lYWxBbW91bnRcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmV0dXJuIGN1cnJlbnQgbWVhbCBhbW91bnQuXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEN1cnJlbnQgbWVhbCBhbW91bnQuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIGdldEN1cnJlbnRNZWFsQW1vdW50KCkge1xuXHRcdFx0cmV0dXJuIGN1cnJlbnRBbW91bnQ7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNzZXRDdXJyZW50TWVhbEFtb3VudFxyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXQgY3VycmVudCBtZWFsIGFtb3VudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgQ3VycmVudCBtZWFsIGFtb3VudC5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gc2V0Q3VycmVudE1lYWxBbW91bnQoYW1vdW50KSB7XG5cdFx0XHRjdXJyZW50QW1vdW50ID0gYW1vdW50O1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3Rvcnkjc2V0Q3VycmVudE1lYWxCeUlkXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFNldCBjdXJyZW50IG1lYWwgYnkgaWQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSWQgb2YgY3VycmVudCBtZWFsLlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBzZXRDdXJyZW50TWVhbEJ5SWQoaWQpIHtcblxuXHRcdFx0Y3VycmVudE1lYWwgPSBtZWFscy5wcm9kdWN0cy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHRcdFx0cmV0dXJuIGl0ZW0uaWQgPT09IGlkO1xuXHRcdFx0fSlbMF07XG5cblx0XHRcdGlmICghY3VycmVudE1lYWwpIHtcblx0XHRcdFx0Y3VycmVudE1lYWwgPSBtZWFscy5kcmlua3MuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGl0ZW0uaWQgPT09IGlkO1xuXHRcdFx0XHR9KVswXTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIikuZmFjdG9yeShcIk1vZGlmaWVyc0ZhY3RvcnlcIiwgTW9kaWZpZXJzRmFjdG9yeSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5XHJcbiAgICAgKiBAcmVxdWlyZXMgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIEZhY3Rvcnkgd29yayB3aXRoIG1vZGlmaWVycy5cclxuICAgICAqXHJcbiAgICAgKiovXG4gICAgZnVuY3Rpb24gTW9kaWZpZXJzRmFjdG9yeShDYXJ0RmFjdG9yeSkge1xuXG4gICAgICAgIHZhciBmYWN0b3J5ID0ge1xuICAgICAgICAgICAgZ2V0Q2hlY2tlZE1vZGlmaWVyczogZ2V0Q2hlY2tlZE1vZGlmaWVycyxcbiAgICAgICAgICAgIG1vZGlmaWVySGFzQmVlblNlbGVjdGVkOiBtb2RpZmllckhhc0JlZW5TZWxlY3RlZCxcbiAgICAgICAgICAgIGRlbGV0ZU1vZGlmaWVyOiBkZWxldGVNb2RpZmllcixcbiAgICAgICAgICAgIHNlbGVjdE1vZGlmaWVyOiBzZWxlY3RNb2RpZmllcixcbiAgICAgICAgICAgIHBpY2tDaGVja2VkTW9kaWZpZXJzOiBwaWNrQ2hlY2tlZE1vZGlmaWVyc1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBmYWN0b3J5O1xuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I2dldENoZWNrZWRNb2RpZmllcnNcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBhcnJheSB3aXRoIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdFtdfSBBcnJheSBvZiBtb2RpZmllcnMgb2JqZWN0cy5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGdldENoZWNrZWRNb2RpZmllcnMoKSB7XG4gICAgICAgICAgICB2YXIgY2FydExpc3QgPSBDYXJ0RmFjdG9yeS5nZXRDYXJ0TGlzdCgpW0NhcnRGYWN0b3J5LmdldEluZGV4RWRpdE1lYWwoKV07XG4gICAgICAgICAgICByZXR1cm4gY2FydExpc3QubW9kaWZpZXJzO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnkjbW9kaWZpZXJIYXNCZWVuU2VsZWN0ZWRcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiB0cnVlIGlmIG1vZGlmaWVyIGhhcyBiZWVuIHNlbGVjdGVkLCBvciBmYWxzZSBpZiBuby5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IHNlbGVjdGVkTW9kaWZpZXJzIEFycmF5IHdpdGggc2VsZWN0ZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtb2RpZmllciBNb2RpZmllciBvYmplY3QuXHJcbiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtb2RpZmllciBoYXMgYmVlbiBzZWxlY3RlZCwgZWxzZSBmYWxzZS5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIG1vZGlmaWVySGFzQmVlblNlbGVjdGVkKHNlbGVjdGVkTW9kaWZpZXJzLCBtb2RpZmllcikge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTW9kaWZpZXJzLnNvbWUoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kaWZpZXIubmFtZSA9PT0gaXRlbS5uYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeSNkZWxldGVNb2RpZmllclxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5Nb2RpZmllcnNGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogRGVsZXRlIG1vZGlmaWVyIGF0IGFycmF5IHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IHNlbGVjdGVkTW9kaWZpZXJzIEFycmF5IHdpdGggc2VsZWN0ZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtb2RpZmllciBNb2RpZmllciBvYmplY3Qgd2hvIGJlIGRlbGV0ZWQuXHJcbiAgICAgICAgICogQHJldHVybiB7b2JqZWN0W119IE5ldyBhcnJheSBvZiBtb2RpZmllcnMuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBkZWxldGVNb2RpZmllcihzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZE1vZGlmaWVycy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbW9kaWZpZXIubmFtZSAhPT0gaXRlbS5uYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeSNzZWxlY3RNb2RpZmllclxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5Nb2RpZmllcnNGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQWRkIG1vZGlmaWVyIGlmIGl0IG5vdCBoYXMgYmVlbiBzZWxlY3RlZCwgZWxzZSBkZWxldGUgbW9kaWZpZXIgYXRcclxuICAgICAgICAgKiBhcnJheSBvZiBzZWxlY3RlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBzZWxlY3RlZE1vZGlmaWVycyBBcnJheSB3aXRoIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gbW9kaWZpZXIgTW9kaWZpZXIgb2JqZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdFtdfSBBcnJheSB3aXRoIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdE1vZGlmaWVyKHNlbGVjdGVkTW9kaWZpZXJzLCBtb2RpZmllcikge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkTW9kaWYgPSBzZWxlY3RlZE1vZGlmaWVycy5zbGljZSgpO1xuXG4gICAgICAgICAgICBpZiAoIW1vZGlmaWVySGFzQmVlblNlbGVjdGVkKHNlbGVjdGVkTW9kaWYsIG1vZGlmaWVyKSkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkTW9kaWYucHVzaChtb2RpZmllcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkTW9kaWYgPSBkZWxldGVNb2RpZmllcihzZWxlY3RlZE1vZGlmLCBtb2RpZmllcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIENhcnRGYWN0b3J5LmFkZE1vZGlmaWVyc1RvTGlzdChzZWxlY3RlZE1vZGlmKTtcblxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTW9kaWY7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeSNwaWNrQ2hlY2tlZE1vZGlmaWVyc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5Nb2RpZmllcnNGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUGljayBhbGwgY2hlY2tlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBtb2RpZmllcnMgQWxsIG1vZGlmaWVycyBvZiBjdXJyZW50IG1lYWwuXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gY2hlY2tlZE1vZGlmaWVycyBBcnJheSB3aXRoIGNoZWNrZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdFtdfSBBcnJheSB3aXRoIGNoZWNrZWQgYW5kIHBpY2tlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBwaWNrQ2hlY2tlZE1vZGlmaWVycyhtb2RpZmllcnMsIGNoZWNrZWRNb2RpZmllcnMpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZE1vZGlmID0gW107XG5cbiAgICAgICAgICAgIGlmIChjaGVja2VkTW9kaWZpZXJzKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbkNoZWNrZWRNb2RpZmllcnMgPSBjaGVja2VkTW9kaWZpZXJzLmxlbmd0aDsgaSA8IGxlbkNoZWNrZWRNb2RpZmllcnM7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsZW5Nb2RpZmllcnMgPSBtb2RpZmllcnMubGVuZ3RoOyBqIDwgbGVuTW9kaWZpZXJzOyBqKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGlmaWVyc1tqXS5uYW1lID09PSBjaGVja2VkTW9kaWZpZXJzW2ldLm5hbWUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVyc1tqXS5jaGVjayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRNb2RpZi5wdXNoKG1vZGlmaWVyc1tqXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRNb2RpZjtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTphcHBQYWdlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIG9mIGFwcC5cclxuICAgICAqXHJcbiAgICAgKiBAdXNhZ2UgPGFwcC1wYWdlPjwvYXBwLXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcImFwcFBhZ2VcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL2FwcC90ZW1wbGF0ZS9hcHBQYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwiYXBwXCIsXG4gICAgICAgIGNvbnRyb2xsZXI6IEFwcENvbnRyb2xsZXJcbiAgICB9KTtcblxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6QXBwQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJhcHBQYWdlXCIuXHJcbiAgICAgKiovXG4gICAgZnVuY3Rpb24gQXBwQ29udHJvbGxlcigpIHt9XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcIk1lYWxzXCIpXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6Y2FydFBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gY2FydCBwYWdlLlxyXG4gICAgICpcclxuICAgICAqIEB1c2FnZSA8Y2FydC1wYWdlPjwvY2FydC1wYWdlPlxyXG4gICAgICoqL1xuICAgIC5jb21wb25lbnQoXCJjYXJ0UGFnZVwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvY2FydC90ZW1wbGF0ZS9jYXJ0UGFnZS5odG1sXCIsXG4gICAgICAgIGJpbmRpbmdzOiB7fSxcbiAgICAgICAgY29udHJvbGxlckFzOiBcImNhcnRcIixcbiAgICAgICAgY29udHJvbGxlcjogQ2FydENvbnRyb2xsZXJcbiAgICB9KTtcblxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6Q2FydENvbnRyb2xsZXJcclxuICAgICAqIEByZXF1aXJlcyBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgICAqIEByZXF1aXJlcyBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IGN1cnJlbmN5IEN1cnJlbmN5LlxyXG4gICAgICogQHByb3BlcnR5IHtvYmplY3RbXX0gIGNhcnRMaXN0IEFycmF5IG9mIHNlbGVjdCBtZWFscyBhbmQgZHJpbmtzLlxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHRvdGFsUHJpY2UgVG90YWwgcHJpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImNhcnRQYWdlXCIuXHJcbiAgICAgKiBEaXNwbGF5IHVzZXItc2VsZWN0ZWQgbWVhbHMgYW5kIGRyaW5rcyBhbmQgdGhlaXIgdG90YWwgcHJpY2UuXHJcbiAgICAgKiBQcm92aWRlcyB0aGUgYWJpbGl0eSB0byBlZGl0IHRoZWlyIGNob2ljZS5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBDYXJ0Q29udHJvbGxlcihNZWFsc0ZhY3RvcnksIENhcnRGYWN0b3J5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5jdXJyZW5jeSA9IE1lYWxzRmFjdG9yeS5nZXRDdXJyZW5jeSgpO1xuICAgICAgICB2bS5jYXJ0TGlzdCA9IENhcnRGYWN0b3J5LmdldENhcnRMaXN0KCk7XG4gICAgICAgIHZtLnRvdGFsUHJpY2UgPSBDYXJ0RmFjdG9yeS5nZXRUb3RhbFByaWNlKCk7XG4gICAgICAgIHZtLmVkaXRNZWFsID0gZWRpdE1lYWw7XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6Q2FydENvbnRyb2xsZXIjZWRpdE1lYWxcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpDYXJ0Q29udHJvbGxlclxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIE9wZW4gbWVhbCBmb3IgZWRpdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtZWFsIE1lYWwgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBDdXJyZW50IG1lYWwgaW5kZXguXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBlZGl0TWVhbChtZWFsLCBpbmRleCkge1xuICAgICAgICAgICAgQ2FydEZhY3Rvcnkuc2V0SW5kZXhFZGl0TWVhbChpbmRleCk7XG4gICAgICAgICAgICBNZWFsc0ZhY3Rvcnkuc2V0Q3VycmVudE1lYWxCeUlkKG1lYWwuaWQpO1xuICAgICAgICAgICAgTWVhbHNGYWN0b3J5LnNldEN1cnJlbnRNZWFsQW1vdW50KG1lYWwuYW1vdW50KTtcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5zZXRDdXJyZW50TWVhbFN0YXR1cyhcImVkaXRcIik7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcIk1lYWxzXCIpXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6Y2FydEljb25QYWdlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIG9mIGNhcnQgYnV0dG9uIGFuZCBzdHJpbmcgd2l0aCBtZWFscyBjb3VudC5cclxuICAgICAqIEFjY2VwdHMgZnJvbSBwYXJlbnQgY29udHJvbGxlciBjb3VudCBtZWFscyBpbiBjYXJ0IGluIHZhcmlhYmxlIFwiY291bnRcIi5cclxuICAgICAqXHJcbiAgICAgKiBAdXNhZ2UgPGNhcnQtaWNvbi1wYWdlPjwvY2FydC1pY29uLXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcImNhcnRJY29uUGFnZVwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvY2FydEljb24vdGVtcGxhdGUvY2FydEljb25QYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHtcbiAgICAgICAgICAgIGNvdW50OiBcIkBcIlxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwiY2FydEljb25cIixcbiAgICAgICAgY29udHJvbGxlcjogQ2FydEljb25Db250cm9sbGVyXG4gICAgfSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkNhcnRJY29uQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJjYXJ0SWNvblBhZ2VcIi5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBDYXJ0SWNvbkNvbnRyb2xsZXIoKSB7fVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmVycm9yUGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSBvZiBlcnJvciBwYWdlLlxyXG4gICAgICpcclxuICAgICAqIEB1c2FnZSA8ZXJyb3ItcGFnZT48L2Vycm9yLXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcImVycm9yUGFnZVwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvZXJyb3IvdGVtcGxhdGUvZXJyb3JQYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwiZXJyb3JcIixcbiAgICAgICAgY29udHJvbGxlcjogRXJyb3JDb250cm9sbGVyXG4gICAgfSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkVycm9yQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJlcnJvclBhZ2VcIi5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBFcnJvckNvbnRyb2xsZXIoKSB7fVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmRyaW5rc0xpc3RcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gbGlzdCBvZiBkcmlua3MuXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxkcmlua3MtbGlzdD48L2RyaW5rcy1saXN0PlxyXG4gICAgICoqL1xuICAgIC5jb21wb25lbnQoXCJkcmlua3NMaXN0XCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9kcmlua3NMaXN0L3RlbXBsYXRlL2RyaW5rc0xpc3QuaHRtbFwiLFxuICAgICAgICBiaW5kaW5nczoge30sXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJkcmlua3NMaXN0XCIsXG4gICAgICAgIGNvbnRyb2xsZXI6IERyaW5rc0xpc3RDb250cm9sbGVyXG4gICAgfSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkRyaW5rc0xpc3RDb250cm9sbGVyXHJcbiAgICAgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gY3VycmVuY3kgQ3VycmVuY3kuXHJcbiAgICAgKiBAcHJvcGVydHkge2Jvb2xlYW59IG9ubHlTb2Z0RHJpbmtzIFZhcmlhYmxlIGluZGljYXRpbmcgc2VsZWN0IG9ubHkgc29mdCBkcmluayBvciBuby5cclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiZHJpbmtzTGlzdFwiLlxyXG4gICAgICogSGFuZGxlIGEgdXNlciBjaG9pY2UgYWJvdXQgZHJpbmsuXHJcbiAgICAgKiovXG4gICAgZnVuY3Rpb24gRHJpbmtzTGlzdENvbnRyb2xsZXIoTWVhbHNGYWN0b3J5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5kcmlua3MgPSBbXTtcbiAgICAgICAgdm0ub25seVNvZnREcmlua3MgPSBmYWxzZTtcbiAgICAgICAgdm0uY3VycmVuY3kgPSBcIlwiO1xuICAgICAgICB2bS5vcGVuRHJpbmsgPSBvcGVuRHJpbms7XG4gICAgICAgIHZtLmdldERyaW5rc0ZvclZpZXcgPSBnZXREcmlua3NGb3JWaWV3O1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6RHJpbmtzTGlzdENvbnRyb2xsZXIjYWN0aXZhdGVcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlclxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIE1ldGhvZCB0byBpbml0aWFsaXplIGRhdGEuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5nZXRNZWFscygpLnRoZW4oZ2V0RHJpbmtzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkRyaW5rc0xpc3RDb250cm9sbGVyI2dldERyaW5rc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOkRyaW5rc0xpc3RDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQXNzaWduaW5nIGEgZGF0YSBhdCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGRyaW5rc09iaiBEcmlua3Mgb2JqZWN0IGNvbnRhaW5zIGN1cnJlbmN5IGFuZCBkcmlua3MgYXJyYXkuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBnZXREcmlua3MoZHJpbmtzT2JqKSB7XG4gICAgICAgICAgICB2bS5jdXJyZW5jeSA9IGRyaW5rc09iai5jdXJyZW5jeTtcbiAgICAgICAgICAgIHZtLmRyaW5rcyA9IGRyaW5rc09iai5kcmlua3M7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlciNvcGVuRHJpbmtcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlclxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENhbGwgbWV0aG9kIG9wZW5NZWFsIG93bmVkIE1lYWxzRmFjdG9yeS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBkcmluayBEcmluayBvYmplY3QuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBvcGVuRHJpbmsoZHJpbmspIHtcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5vcGVuTWVhbChkcmluaywgXCJuZXdcIiwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlciNnZXREcmlua3NGb3JWaWV3XHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6RHJpbmtzTGlzdENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gYWxsIGRyaW5rcyBvciBvbmx5IHNvZnQgZHJpbmtzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7b2JqZWN0W119IEFycmF5IG9mIGRyaW5rcy5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGdldERyaW5rc0ZvclZpZXcoKSB7XG5cbiAgICAgICAgICAgIGlmICh2bS5vbmx5U29mdERyaW5rcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB2bS5kcmlua3MuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnRpcHBsZSAhPT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZtLmRyaW5rcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpmb290ZXJQYWdlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIGZvb3RlciBzZWN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEB1c2FnZSA8Zm9vdGVyLXBhZ2U+PC9mb290ZXItcGFnZT5cclxuICAgICAqKi9cbiAgICAuY29tcG9uZW50KFwiZm9vdGVyUGFnZVwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvZm9vdGVyL3RlbXBsYXRlL2Zvb3RlclBhZ2UuaHRtbFwiLFxuICAgICAgICBiaW5kaW5nczoge30sXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJmb290ZXJcIixcbiAgICAgICAgY29udHJvbGxlcjogRm9vdGVyQ29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpGb290ZXJDb250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImZvb3RlclBhZ2VcIi5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBGb290ZXJDb250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpoZWFkZXJQYWdlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIGhlYWRlciBzZWN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEB1c2FnZSA8aGVhZGVyLXBhZ2U+PC9oZWFkZXItcGFnZT5cclxuICAgICAqKi9cbiAgICAuY29tcG9uZW50KFwiaGVhZGVyUGFnZVwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvaGVhZGVyL3RlbXBsYXRlL2hlYWRlclBhZ2UuaHRtbFwiLFxuICAgICAgICBiaW5kaW5nczoge30sXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJoZWFkZXJcIixcbiAgICAgICAgY29udHJvbGxlcjogSGVhZGVyQ29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpIZWFkZXJDb250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImhlYWRlclBhZ2VcIi5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpsb2dvUGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBsb2dvIHNlY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxsb2dvLXBhZ2U+PC9sb2dvLXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcImxvZ29QYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9sb2dvL3RlbXBsYXRlL2xvZ29QYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwibG9nb1wiLFxuICAgICAgICBjb250cm9sbGVyOiBMb2dvQ29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpMb2dvQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJsb2dvUGFnZVwiLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIExvZ29Db250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptYWluUGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBtYWluIHNlY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxtYWluLXBhZ2U+PC9tYWluLXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcIm1haW5QYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tYWluL3RlbXBsYXRlL21haW5QYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwibWFpblwiLFxuICAgICAgICBjb250cm9sbGVyOiBNYWluQ29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNYWluQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtYWluUGFnZVwiLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIE1haW5Db250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuXHQvKipcclxuICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptZWFsUGFnZVxyXG4gICpcclxuICAqIEBkZXNjcmlwdGlvblxyXG4gICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSBvZiBtZWFsLlxyXG4gICogQWNjZXB0cyBmcm9tIHBhcmVudCBjb250cm9sbGVyIHBhdGggd2hlcmUgdGhlIHVzZXIgY2FtZSBpbiB2YXJpYWJsZSBcInBhdGhcIi5cclxuICAqXHJcbiAgKiBAdXNhZ2UgPG1lYWwtcGFnZT48L21lYWwtcGFnZT5cclxuICAqKi9cblx0LmNvbXBvbmVudChcIm1lYWxQYWdlXCIsIHtcblx0XHR0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL21lYWwvdGVtcGxhdGUvbWVhbFBhZ2UuaHRtbFwiLFxuXHRcdGJpbmRpbmdzOiB7XG5cdFx0XHRwYXRoOiBcIkBcIlxuXHRcdH0sXG5cdFx0Y29udHJvbGxlckFzOiBcIm1lYWxcIixcblx0XHRjb250cm9sbGVyOiBNZWFsQ29udHJvbGxlclxuXHR9KTtcblxuXHQvKipcclxuICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyXHJcbiAgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgKiBAcmVxdWlyZXMgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBjdXJyZW50TWVhbCBDdXJyZW50IG1lYWwuXHJcbiAgKiBAcHJvcGVydHkge3N0cmluZ30gY3VycmVuY3kgQ3VycmVuY3kuXHJcbiAgKiBAcHJvcGVydHkge251bWJlcn0gc2VsZWN0QW1vdW50IEN1cnJlbnQgbWVhbCBzZWxlY3QgYW1vdW50LlxyXG4gICogQHByb3BlcnR5IHtzdHJpbmd9IG1lYWxTdGF0dXMgQ3VycmVudCBtZWFsIHN0YXR1cy5cclxuICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBjYXJ0Q291bnQgQ291bnQgbWVhbCBpbiBjYXJ0LlxyXG4gICpcclxuICAqIEBkZXNjcmlwdGlvblxyXG4gICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtZWFsUGFnZVwiLlxyXG4gICogQWxsb3dzIHRoZSB1c2VyIHRvIGFkZCBtZWFsIHRvIGNhcnQsIGRlbGV0ZSBtZWFsLCBlZGl0IG1lYWwgYW5kIGV0Yy5cclxuICAqKi9cblx0ZnVuY3Rpb24gTWVhbENvbnRyb2xsZXIoTWVhbHNGYWN0b3J5LCBDYXJ0RmFjdG9yeSkge1xuXG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdHZtLmN1cnJlbnRNZWFsID0gTWVhbHNGYWN0b3J5LmdldEN1cnJlbnRNZWFsKCk7XG5cdFx0dm0uY3VycmVuY3kgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVuY3koKTtcblx0XHR2bS5zZWxlY3RBbW91bnQgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVudE1lYWxBbW91bnQoKTtcblx0XHR2bS5tZWFsU3RhdHVzID0gTWVhbHNGYWN0b3J5LmdldEN1cnJlbnRNZWFsU3RhdHVzKCk7XG5cdFx0dm0uY2FydENvdW50ID0gQ2FydEZhY3RvcnkuZ2V0Q2FydExpc3RDb3VudCgpO1xuXHRcdHZtLmFkZE1lYWwgPSBhZGRNZWFsO1xuXHRcdHZtLnJlbW92ZU1lYWwgPSByZW1vdmVNZWFsO1xuXHRcdHZtLnNhdmVNZWFsID0gc2F2ZU1lYWw7XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsQ29udHJvbGxlciNhZGRNZWFsXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbENvbnRyb2xsZXJcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDYWxsIG1ldGhvZCBhZGRNZWFsVG9DYXJ0TGlzdCBvd25lZCBDYXJ0RmFjdG9yeS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gYWRkTWVhbCgpIHtcblx0XHRcdENhcnRGYWN0b3J5LmFkZE1lYWxUb0NhcnRMaXN0KHZtLmN1cnJlbnRNZWFsLCB2bS5zZWxlY3RBbW91bnQpO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyI3JlbW92ZU1lYWxcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpNZWFsQ29udHJvbGxlclxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENhbGwgbWV0aG9kIHJlbW92ZU1lYWwgb3duZWQgQ2FydEZhY3RvcnlcclxuICAgKiBhbmQgbWV0aG9kIGRlbGV0ZU1vZGlmaWVycyBvd25lZCBDYXJ0RmFjdG9yeS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlTWVhbCgpIHtcblx0XHRcdENhcnRGYWN0b3J5LnJlbW92ZU1lYWwoKTtcblx0XHRcdENhcnRGYWN0b3J5LmRlbGV0ZU1vZGlmaWVycygpO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyI3NhdmVNZWFsXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbENvbnRyb2xsZXJcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDYWxsIG1ldGhvZCByZW1vdmVNZWFsIG93bmVkIENhcnRGYWN0b3J5XHJcbiAgICogYW5kIG1ldGhvZCBhZGRNZWFsVG9DYXJ0TGlzdCBvd25lZCBDYXJ0RmFjdG9yeS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gc2F2ZU1lYWwoKSB7XG5cdFx0XHRDYXJ0RmFjdG9yeS5yZW1vdmVNZWFsKCk7XG5cdFx0XHR2bS5hZGRNZWFsKCk7XG5cdFx0fVxuXHR9XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcblx0LyoqXHJcbiAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6bWVhbHNMaXN0XHJcbiAgKlxyXG4gICogQGRlc2NyaXB0aW9uXHJcbiAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIGxpc3Qgb2YgbWVhbHMuXHJcbiAgKlxyXG4gICogQHVzYWdlIDxtZWFscy1saXN0PjwvbWVhbHMtbGlzdD5cclxuICAqKi9cblx0LmNvbXBvbmVudChcIm1lYWxzTGlzdFwiLCB7XG5cdFx0dGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tZWFsc0xpc3QvdGVtcGxhdGUvbWVhbHNMaXN0Lmh0bWxcIixcblx0XHRiaW5kaW5nczoge30sXG5cdFx0Y29udHJvbGxlckFzOiBcIm1lYWxzTGlzdFwiLFxuXHRcdGNvbnRyb2xsZXI6IE1lYWxzTGlzdENvbnRyb2xsZXJcblx0fSk7XG5cblx0LyoqXHJcbiAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyXHJcbiAgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgKiBAcHJvcGVydHkge3N0cmluZ30gY3VycmVuY3kgQ3VycmVuY3kuXHJcbiAgKiBAcHJvcGVydHkge29iamVjdFtdfSBwcm9kdWN0cyBBcnJheSBvZiBwcm9kdWN0cy5cclxuICAqXHJcbiAgKiBAZGVzY3JpcHRpb25cclxuICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwibWVhbHNMaXN0XCIuXHJcbiAgKiBIYW5kbGUgYSB1c2VyIGNob2ljZSBhYm91dCBtZWFsLlxyXG4gICoqL1xuXHRmdW5jdGlvbiBNZWFsc0xpc3RDb250cm9sbGVyKE1lYWxzRmFjdG9yeSkge1xuXG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdHZtLm9wZW5NZWFsID0gb3Blbk1lYWw7XG5cdFx0dm0uY3VycmVuY3kgPSBcIlwiO1xuXHRcdHZtLnByb2R1Y3RzID0gbnVsbDtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyI2FjdGl2YXRlXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlclxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIE1ldGhvZCB0byBpbml0aWFsaXplIGRhdGEuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdFx0TWVhbHNGYWN0b3J5LmdldE1lYWxzKCkudGhlbihnZXRQcm9kdWN0cyk7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlciNnZXRQcm9kdWN0c1xyXG4gICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXJcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBBc3NpZ25pbmcgYSBkYXRhIGF0IHByb3BlcnRpZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge29iamVjdH0gbWVhbHNPYmogTWVhbHMgb2JqZWN0IGNvbnRhaW5zIGN1cnJlbmN5IGFuZCBwcm9kdWN0cyBhcnJheS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gZ2V0UHJvZHVjdHMobWVhbHNPYmopIHtcblx0XHRcdHZtLmN1cnJlbmN5ID0gbWVhbHNPYmouY3VycmVuY3k7XG5cdFx0XHR2bS5wcm9kdWN0cyA9IG1lYWxzT2JqLnByb2R1Y3RzO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXIjb3Blbk1lYWxcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ2FsbCBtZXRob2Qgb3Blbk1lYWwgb3duZWQgTWVhbHNGYWN0b3J5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IG1lYWwgTWVhbCBvYmplY3QuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIG9wZW5NZWFsKG1lYWwpIHtcblx0XHRcdE1lYWxzRmFjdG9yeS5vcGVuTWVhbChtZWFsLCBcIm5ld1wiLCAxKTtcblx0XHR9XG5cdH1cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptZW51UGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBtZW51IHNlY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxtZW51LXBhZ2U+PC9tZW51LXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcIm1lbnVQYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tZW51L3RlbXBsYXRlL21lbnVQYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwibWVudVwiLFxuICAgICAgICBjb250cm9sbGVyOiBNZW51Q29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZW51Q29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtZW51UGFnZVwiLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIE1lbnVDb250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptb2RpZmllcnNQYWdlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIG9mIG1vZGlmaWVycyBzZWN0aW9uLlxyXG4gICAgICogQWNjZXB0cyBmcm9tIHBhcmVudCBjb250cm9sbGVyIGN1cnJlbmN5IGluIHZhcmlhYmxlIFwiY3VycmVuY3lcIi5cclxuICAgICAqXHJcbiAgICAgKiBAdXNhZ2UgPG1vZGlmaWVycy1wYWdlPjwvbW9kaWZpZXJzLXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcIm1vZGlmaWVyc1BhZ2VcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL21vZGlmaWVycy90ZW1wbGF0ZS9tb2RpZmllcnNQYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHtcbiAgICAgICAgICAgIGN1cnJlbmN5OiBcIkBcIlxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwibW9kXCIsXG4gICAgICAgIGNvbnRyb2xsZXI6IE1vZGlmaWVyc0NvbnRyb2xsZXJcbiAgICB9KTtcblxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TW9kaWZpZXJzQ29udHJvbGxlclxyXG4gICAgICogQHJlcXVpcmVzIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAgICogQHJlcXVpcmVzIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAqIEBwcm9wZXJ0eSB7b2JqZWN0W119IG1vZGlmaWVycyBBcnJheSBvZiBtb2RpZmllcnMuXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcIm1vZGlmaWVyc1BhZ2VcIi5cclxuICAgICAqIEhhbmRsZSBhIHVzZXIgY2hvaWNlIGFib3V0IG1vZGlmaWVycy5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBNb2RpZmllcnNDb250cm9sbGVyKE1lYWxzRmFjdG9yeSwgTW9kaWZpZXJzRmFjdG9yeSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZhciBzZWxlY3RlZE1vZGlmaWVycyA9IFtdO1xuXG4gICAgICAgIHZtLm1vZGlmaWVycyA9IE1lYWxzRmFjdG9yeS5nZXRNb2RpZmllcnMoKTtcbiAgICAgICAgdm0uc2VsZWN0TW9kaWZpZXIgPSBzZWxlY3RNb2RpZmllcjtcbiAgICAgICAgdm0uY2xlYW5QaWNrTW9kaWZpZXJzID0gY2xlYW5QaWNrTW9kaWZpZXJzO1xuXG4gICAgICAgIHZtLmNsZWFuUGlja01vZGlmaWVycygpO1xuXG4gICAgICAgIGlmIChNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVudE1lYWxTdGF0dXMoKSA9PT0gXCJlZGl0XCIpIHtcbiAgICAgICAgICAgIC8vUGljayBjaGVja2JveGVzIGZvciBzZWxlY3QgbW9kaWZpZXJzXG4gICAgICAgICAgICB2YXIgY2hlY2tlZE1vZGlmaWVycyA9IE1vZGlmaWVyc0ZhY3RvcnkuZ2V0Q2hlY2tlZE1vZGlmaWVycygpO1xuICAgICAgICAgICAgc2VsZWN0ZWRNb2RpZmllcnMgPSBNb2RpZmllcnNGYWN0b3J5LnBpY2tDaGVja2VkTW9kaWZpZXJzKHZtLm1vZGlmaWVycywgY2hlY2tlZE1vZGlmaWVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNb2RpZmllcnNDb250cm9sbGVyI2NsZWFuUGlja01vZGlmaWVyc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1vZGlmaWVyc0NvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDbGVhbiBwaWNrIG1vZGlmaWVycyBjaGVja2JveC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFuUGlja01vZGlmaWVycygpIHtcbiAgICAgICAgICAgIGlmICh2bS5tb2RpZmllcnMpIHtcbiAgICAgICAgICAgICAgICB2bS5tb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5jaGVjayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TW9kaWZpZXJzQ29udHJvbGxlciNzZWxlY3RNb2RpZmllclxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1vZGlmaWVyc0NvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDYWxsIG1ldGhvZCBzZWxlY3RNb2RpZmllciBvd25lZCBNb2RpZmllcnNGYWN0b3J5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1vZGlmaWVyIE1vZGlmaWVyIG9iamVjdC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdE1vZGlmaWVyKG1vZGlmaWVyKSB7XG4gICAgICAgICAgICBzZWxlY3RlZE1vZGlmaWVycyA9IE1vZGlmaWVyc0ZhY3Rvcnkuc2VsZWN0TW9kaWZpZXIoc2VsZWN0ZWRNb2RpZmllcnMsIG1vZGlmaWVyKTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpzZWxlY3RDb3VudFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBzZWxlY3QgYW1vdW50IG9mIG1lYWwuXHJcbiAgICAgKiBUcmFuc2ZlcnMgdG8gdGhlIHBhcmVudCBjb250cm9sbGVyIHNlbGVjdGVkIGFtb3VudCBvZiBtZWFsIGluIHZhcmlhYmxlIFwic2VsZWN0XCIuXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxzZWxlY3QtY291bnQ+PC9zZWxlY3QtY291bnQ+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcInNlbGVjdENvdW50XCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9zZWxlY3RDb3VudC90ZW1wbGF0ZS9zZWxlY3RDb3VudFBhZ2UuaHRtbFwiLFxuICAgICAgICBiaW5kaW5nczoge1xuICAgICAgICAgICAgc2VsZWN0OiBcIj1cIlxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwic2VsZWN0XCIsXG4gICAgICAgIGNvbnRyb2xsZXI6IFNlbGVjdENvdW50Q29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwic2VsZWN0Q291bnRcIi5cclxuICAgICAqIENhcHR1cmVzIHRoZSB1c2VyJ3MgY2hvaWNlIGF0IGFtb3VudC5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBTZWxlY3RDb3VudENvbnRyb2xsZXIoKSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5zZWxlY3ROdW0gPSBzZWxlY3ROdW07XG4gICAgICAgIHZtLmFjdGl2ZU51bSA9IGFjdGl2ZU51bTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXIjc2VsZWN0TnVtXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6U2VsZWN0Q291bnRDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogU2VsZWN0IG1lYWwgYW1vdW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG51bSBNZWFsIGFtb3VudC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdE51bShudW0pIHtcbiAgICAgICAgICAgIHZtLnNlbGVjdCA9IG51bTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOlNlbGVjdENvdW50Q29udHJvbGxlciNhY3RpdmVOdW1cclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB2YXJpYWJsZSBzZWxlY3QgaXMgbnVtLCBlbHNlIGZhbHNlLlxyXG4gICAgICAgICAqIElmIGZ1bmN0aW9uIHJldHVybiB0cnVlLCB0aGUgYnV0dG9uIHdpdGggbnVtIGdldCBjbGFzcyBcImFjdGl2ZVwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG51bSBNZWFsIGFtb3VudC5cclxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHNlbGVjdCBpcyBudW0uXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBhY3RpdmVOdW0obnVtKSB7XG4gICAgICAgICAgICByZXR1cm4gdm0uc2VsZWN0ID09PSBudW07XG4gICAgICAgIH1cbiAgICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIiwgW1xyXG4gICAgICAgICAgICBcInVpLnJvdXRlclwiXHJcbiAgICAgICAgXSk7XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC5jb25maWcoY29uZmlnKTtcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gY29uZmlnKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIHtcclxuXHJcbiAgICAgICAgJHN0YXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLnN0YXRlKFwiYXBwXCIsIHtcclxuICAgICAgICAgICAgICAgIHVybDogXCIvYXBwXCIsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8YXBwLXBhZ2U+PC9hcHAtcGFnZT5cIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoXCJhcHAubWFpblwiLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiL21haW5cIixcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxtYWluLXBhZ2U+PC9tYWluLXBhZ2U+XCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKFwiYXBwLm1haW4ubWVhbHNcIiwge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcIi9tZWFsc1wiLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiPG1lYWxzLWxpc3QgaWQ9J21lYWxzTGlzdCc+PC9tZWFscy1saXN0PlwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZShcImFwcC5tYWluLmRyaW5rc1wiLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiL2RyaW5rc1wiLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGRyaW5rcy1saXN0PjwvZHJpbmtzLWxpc3Q+XCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKFwiYXBwLm1lYWxcIiwge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcIi9tZWFsLzpwYXRoXCIsXHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyQXM6IFwibWVhbFwiLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogTWVhbENvbnRyb2xsZXIsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8bWVhbC1wYWdlIGlkPSdtZWFsJyBwYXRoPSd7eyBtZWFsLnBhdGggfX0nPjwvbWVhbC1wYWdlPlwiLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoXCJhcHAuY2FydFwiLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiL2NhcnRcIixcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxjYXJ0LXBhZ2UgaWQ9J2NhcnQnPjwvY2FydC1wYWdlPlwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZShcImVycm9yXCIsIHtcclxuICAgICAgICAgICAgICAgIHVybDogXCIvZXJyb3JcIixcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxlcnJvci1wYWdlPjwvZXJyb3ItcGFnZT5cIlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9hcHAvbWFpbi9tZWFsc1wiKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBNZWFsQ29udHJvbGxlcigkc3RhdGVQYXJhbXMpIHtcclxuICAgICAgICB0aGlzLnBhdGggPSAkc3RhdGVQYXJhbXMucGF0aDtcclxuICAgIH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLmZhY3RvcnkoXCJDYXJ0RmFjdG9yeVwiLCBDYXJ0RmFjdG9yeSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIEZhY3Rvcnkgd29yayB3aXRoIGNhcnQuXHJcbiAgICAgKlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gQ2FydEZhY3RvcnkoKSB7XHJcblxyXG4gICAgICAgIGxldCBjYXJ0TGlzdCAgICAgICAgICA9IFtdLFxyXG4gICAgICAgICAgICBtb2RpZmllcnMgICAgICAgICA9IG51bGwsXHJcbiAgICAgICAgICAgIGluZGV4RWRpdE1lYWwgICAgID0gMCxcclxuXHJcbiAgICAgICAgICAgIGZhY3RvcnkgPSB7XHJcbiAgICAgICAgICAgICAgICBnZXRJbmRleEVkaXRNZWFsICAgOiBnZXRJbmRleEVkaXRNZWFsLFxyXG4gICAgICAgICAgICAgICAgc2V0SW5kZXhFZGl0TWVhbCAgIDogc2V0SW5kZXhFZGl0TWVhbCxcclxuICAgICAgICAgICAgICAgIGdldENhcnRMaXN0Q291bnQgICA6IGdldENhcnRMaXN0Q291bnQsXHJcbiAgICAgICAgICAgICAgICBhZGRNb2RpZmllcnNUb0xpc3QgOiBhZGRNb2RpZmllcnNUb0xpc3QsXHJcbiAgICAgICAgICAgICAgICBhZGRNZWFsVG9DYXJ0TGlzdCAgOiBhZGRNZWFsVG9DYXJ0TGlzdCxcclxuICAgICAgICAgICAgICAgIGdldENhcnRMaXN0ICAgICAgICA6IGdldENhcnRMaXN0LFxyXG4gICAgICAgICAgICAgICAgZ2V0VG90YWxQcmljZSAgICAgIDogZ2V0VG90YWxQcmljZSxcclxuICAgICAgICAgICAgICAgIGRlbGV0ZU1vZGlmaWVycyAgICA6IGRlbGV0ZU1vZGlmaWVycyxcclxuICAgICAgICAgICAgICAgIHJlbW92ZU1lYWwgICAgICAgICA6IHJlbW92ZU1lYWwsXHJcbiAgICAgICAgICAgICAgICBnZXRNb2RpZmllcnNQcmljZSAgOiBnZXRNb2RpZmllcnNQcmljZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICByZXR1cm4gZmFjdG9yeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2dldE1vZGlmaWVyc1ByaWNlXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIHRvdGFsIHByaWNlIG9mIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IG1vZGlmaWVyc0FyciBBcnJheSBvZiBtb2RpZmllcnMgb2JqZWN0cy5cclxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRvdGFsIHByaWNlLlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRNb2RpZmllcnNQcmljZShtb2RpZmllcnNBcnIpIHtcclxuICAgICAgICAgICAgbGV0IHRvdGFsUHJpY2UgPSAwO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgbW9kaWZpZXIgb2YgbW9kaWZpZXJzQXJyKSB7XHJcbiAgICAgICAgICAgICAgICB0b3RhbFByaWNlICs9IG1vZGlmaWVyLnByaWNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWxQcmljZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNnZXRJbmRleEVkaXRNZWFsXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIGluZGV4IGZvIGVkaXQgbWVhbC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gSW5kZXggb2YgZWRpdCBtZWFsLlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRJbmRleEVkaXRNZWFsKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gaW5kZXhFZGl0TWVhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNzZXRJbmRleEVkaXRNZWFsXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogU2V0IGluZGV4IG9mIGVkaXQgbWVhbC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBvZiBlZGl0IG1lYWwuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNldEluZGV4RWRpdE1lYWwoaW5kZXgpIHtcclxuICAgICAgICAgICAgaW5kZXhFZGl0TWVhbCA9IGluZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2dldENhcnRMaXN0Q291bnRcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gY291bnQgb2YgZWxlbWVudHMgaW4gY2FydCBsaXN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBDYXJ0IGxpc3QgbGVuZ3RoLlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRDYXJ0TGlzdENvdW50KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FydExpc3QubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2FkZE1vZGlmaWVyc1RvTGlzdFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIEFkZCBtb2RpZmllcnMgdG8gbGlzdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IG1vZGlmIEFycmF5IHdpdGggbW9kaWZpZXJzIG9iamVjdHMuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGFkZE1vZGlmaWVyc1RvTGlzdChtb2RpZikge1xyXG4gICAgICAgICAgICBtb2RpZmllcnMgPSBtb2RpZjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNhZGRNZWFsVG9DYXJ0TGlzdFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIEFkZCBtZWFsIHRvIGNhcnQgbGlzdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtZWFsIE1lYWwgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgQW1vdW50IG9mIG1lYWwuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGFkZE1lYWxUb0NhcnRMaXN0KG1lYWwsIGFtb3VudCkge1xyXG4gICAgICAgICAgICBsZXQgbmV3TWVhbCA9IHt9O1xyXG5cclxuICAgICAgICAgICAgbmV3TWVhbC5pZCAgICAgICAgPSBtZWFsLmlkO1xyXG4gICAgICAgICAgICBuZXdNZWFsLm5hbWUgICAgICA9IG1lYWwubmFtZTtcclxuICAgICAgICAgICAgbmV3TWVhbC5wcmljZSAgICAgPSBtZWFsLnByaWNlO1xyXG4gICAgICAgICAgICBuZXdNZWFsLmFtb3VudCAgICA9IGFtb3VudDtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb2RpZmllcnMpIHtcclxuICAgICAgICAgICAgICAgIG5ld01lYWwubW9kaWZpZXJzID0gbW9kaWZpZXJzLnNsaWNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG1vZGlmaWVycyA9IG51bGw7XHJcbiAgICAgICAgICAgIGNhcnRMaXN0LnB1c2gobmV3TWVhbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjZ2V0Q2FydExpc3RcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gY2FydCBsaXN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7b2JqZWN0W119IENhcnQgbGlzdC5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2FydExpc3QoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYXJ0TGlzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNnZXRUb3RhbFByaWNlXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIGNhcnQgbGlzdCB0b3RhbCBwcmljZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gQ2FydCBsaXN0IHRvdGFsIHByaWNlLlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRUb3RhbFByaWNlKCkge1xyXG4gICAgICAgICAgICBsZXQgdG90YWxQcmljZSA9IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FydExpc3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGNhcnRMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsUHJpY2UgKz0gY2FydExpc3RbaV0ucHJpY2UgKiBjYXJ0TGlzdFtpXS5hbW91bnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXJ0TGlzdFtpXS5tb2RpZmllcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxQcmljZSArPSBnZXRNb2RpZmllcnNQcmljZShjYXJ0TGlzdFtpXS5tb2RpZmllcnMpICogY2FydExpc3RbaV0uYW1vdW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsUHJpY2UudG9GaXhlZCgyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNkZWxldGVNb2RpZmllcnNcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXNldCBtb2RpZmllcnMgdmFsdWUuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZU1vZGlmaWVycygpIHtcclxuICAgICAgICAgICAgbW9kaWZpZXJzID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNyZW1vdmVNZWFsXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmVtb3ZlIGVkaXQgbWVhbCBvZiBjYXJ0IGxpc3QuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZU1lYWwoKSB7XHJcbiAgICAgICAgICAgIGNhcnRMaXN0LnNwbGljZShpbmRleEVkaXRNZWFsLCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKFwiTWVhbHNcIilcclxuXHRcdC5mYWN0b3J5KFwiTWVhbHNGYWN0b3J5XCIsIE1lYWxzRmFjdG9yeSk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBuZ2RvYyBzZXJ2aWNlXHJcblx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0ICogQHJlcXVpcmVzICRodHRwXHJcblx0ICogQHJlcXVpcmVzICRxXHJcblx0ICpcclxuXHQgKiBAZGVzY3JpcHRpb25cclxuXHQgKiBGYWN0b3J5IGdldCBjdXJyZW5jeSwgYXJyYXkgb2YgcHJvZHVjdHMgYW5kIGFycmF5IG9mIGRyaW5rcyxcclxuXHQgKiBhbmQgd29yayB3aXRoIGN1cnJlbnQgbWVhbC5cclxuXHQgKlxyXG5cdCAqKi9cclxuXHRmdW5jdGlvbiBNZWFsc0ZhY3RvcnkoJGh0dHAsICRxKSB7XHJcblxyXG5cdFx0bGV0IG1lYWxBcGlVcmwgICAgICAgID0gXCJtZWFscy5qc29uXCIsXHJcblx0XHRcdG1lYWxzICAgICAgICAgICAgID0gbnVsbCxcclxuXHRcdFx0Y3VycmVuY3kgICAgICAgICAgPSBcIlwiLFxyXG5cdFx0XHRjdXJyZW50TWVhbCAgICAgICA9IG51bGwsXHJcblx0XHRcdGN1cnJlbnRNZWFsU3RhdHVzID0gXCJuZXdcIixcclxuXHRcdFx0Y3VycmVudEFtb3VudCAgICAgPSAxLFxyXG5cclxuXHRcdFx0ZmFjdG9yeSA9IHtcclxuXHRcdFx0XHRnZXRNb2RpZmllcnMgICAgICAgICA6IGdldE1vZGlmaWVycyxcclxuXHRcdFx0XHRnZXRNZWFscyAgICAgICAgICAgICA6IGdldE1lYWxzLFxyXG5cdFx0XHRcdGdldEN1cnJlbnRNZWFsICAgICAgIDogZ2V0Q3VycmVudE1lYWwsXHJcblx0XHRcdFx0c2V0Q3VycmVudE1lYWwgICAgICAgOiBzZXRDdXJyZW50TWVhbCxcclxuXHRcdFx0XHRnZXRDdXJyZW50TWVhbFN0YXR1cyA6IGdldEN1cnJlbnRNZWFsU3RhdHVzLFxyXG5cdFx0XHRcdHNldEN1cnJlbnRNZWFsU3RhdHVzIDogc2V0Q3VycmVudE1lYWxTdGF0dXMsXHJcblx0XHRcdFx0Z2V0Q3VycmVuY3kgICAgICAgICAgOiBnZXRDdXJyZW5jeSxcclxuXHRcdFx0XHRnZXRDdXJyZW50TWVhbEFtb3VudCA6IGdldEN1cnJlbnRNZWFsQW1vdW50LFxyXG5cdFx0XHRcdHNldEN1cnJlbnRNZWFsQW1vdW50IDogc2V0Q3VycmVudE1lYWxBbW91bnQsXHJcblx0XHRcdFx0c2V0Q3VycmVudE1lYWxCeUlkICAgOiBzZXRDdXJyZW50TWVhbEJ5SWQsXHJcblx0XHRcdFx0b3Blbk1lYWwgICAgICAgICAgICAgOiBvcGVuTWVhbFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdHJldHVybiBmYWN0b3J5O1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I29wZW5NZWFsXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKlxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBTZXQgY3VycmVudCBtZWFsLCBjdXJyZW50IG1lYWwgc3RhdHVzIGFuZCBjdXJyZW50IG1lYWwgYW1vdW50LlxyXG5cdFx0ICpcclxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSBtZWFsICAgQ3VycmVudCBtZWFsLlxyXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHN0YXR1cyBNZWFsIHN0YXR1cyhcIm5ld1wiIG9yIFwiZWRpdFwiKS5cclxuXHRcdCAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgTWVhbCBhbW91bnQuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBvcGVuTWVhbChtZWFsLCBzdGF0dXMsIGFtb3VudCkge1xyXG5cdFx0XHRzZXRDdXJyZW50TWVhbChtZWFsKTtcclxuXHRcdFx0c2V0Q3VycmVudE1lYWxTdGF0dXMoc3RhdHVzKTtcclxuXHRcdFx0c2V0Q3VycmVudE1lYWxBbW91bnQoYW1vdW50KTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRNZWFsc0Zyb21IdHRwXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIE9idGFpbmluZyBkYXRhIG9uIGZvb2RzIGFuZCBkcmlua3MgZnJvbSB0aGUgc2VydmVyLlxyXG5cdFx0ICpcclxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSBkZWZlcnJlZCBEZWZlcnJlZCBvYmplY3QuXHJcblx0XHQgKiBAcmV0dXJuIHtvYmplY3R9IERlZmVycmVkIG9iamVjdCB3aXRoIHJlc29sdmUgYW5kIHJlamVjdC5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIGdldE1lYWxzRnJvbUh0dHAoZGVmZXJyZWQpIHtcclxuXHJcblx0XHRcdCRodHRwKHttZXRob2QgOiBcIkdFVFwiLCB1cmwgOiBtZWFsQXBpVXJsfSlcclxuXHRcdFx0XHQuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG5cdFx0XHRcdFx0bWVhbHMgICAgPSBkYXRhO1xyXG5cdFx0XHRcdFx0Y3VycmVuY3kgPSBkYXRhLmN1cnJlbmN5O1xyXG5cclxuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuZXJyb3IoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xyXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiRXJyb3IgaW4gJGh0dHAgcmVxdWVzdFwiKTtcclxuXHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhkYXRhKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKHN0YXR1cyk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0TW9kaWZpZXJzXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIElmIG1lYWxzIGhhdmUgbW9kaWZpZXJzIHJldHVybiB0aGVtIGVsc2UgcmV0dXJuIGZhbHNlXHJcblx0XHQgKlxyXG5cdFx0ICogQHJldHVybiB7b2JqZWN0fGJvb2xlYW59IEN1cnJlbnQgbWVhbCBtb2RpZmllcnMgb3IgZmFsc2UuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBnZXRNb2RpZmllcnMoKSB7XHJcblxyXG5cdFx0XHRpZiAoY3VycmVudE1lYWwgIT09IG51bGwpIHtcclxuXHRcdFx0XHRyZXR1cm4gY3VycmVudE1lYWwubW9kaWZpZXJzO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldE1lYWxzXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFJldHVybiBwcm9taXNlIHdpdGggdGhlIHJlc3BvbnNlIHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlciBvclxyXG5cdFx0ICogaWYgdGhlIHJlcXVlc3QgaGFzIGFscmVhZHkgYmVlbiwgcmV0dXJuIHByb21pc2Ugd2l0aCB0aGVcclxuXHRcdCAqIG1lYWxzIG9iamVjdC5cclxuXHRcdCAqXHJcblx0XHQgKiBAcmV0dXJuIHtvYmplY3R9IFByb21pc2UuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBnZXRNZWFscygpIHtcclxuXHRcdFx0bGV0IGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuXHJcblx0XHRcdGlmICghbWVhbHMpIHtcclxuXHRcdFx0XHRkZWZlcnJlZCA9IGdldE1lYWxzRnJvbUh0dHAoZGVmZXJyZWQpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUobWVhbHMpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRDdXJyZW50TWVhbFxyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBSZXR1cm4gY3VycmVudCBtZWFsLlxyXG5cdFx0ICpcclxuXHRcdCAqIEByZXR1cm4ge29iamVjdH0gQ3VycmVudCBtZWFsLlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0Q3VycmVudE1lYWwoKSB7XHJcblx0XHRcdHJldHVybiBjdXJyZW50TWVhbDtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNzZXRDdXJyZW50TWVhbFxyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBTZXQgY3VycmVudCBtZWFsLlxyXG5cdFx0ICpcclxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSBtZWFsIEN1cnJlbnQgbWVhbC5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIHNldEN1cnJlbnRNZWFsKG1lYWwpIHtcclxuXHRcdFx0Y3VycmVudE1lYWwgPSBtZWFsO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldEN1cnJlbnRNZWFsU3RhdHVzXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFJldHVybiBjdXJyZW50IG1lYWwgc3RhdHVzKFwibmV3XCIgb3IgXCJlZGl0XCIpLlxyXG5cdFx0ICpcclxuXHRcdCAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVudCBtZWFsIHN0YXR1cyhcIm5ld1wiIG9yIFwiZWRpdFwiKS5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIGdldEN1cnJlbnRNZWFsU3RhdHVzKCkge1xyXG5cdFx0XHRyZXR1cm4gY3VycmVudE1lYWxTdGF0dXM7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3Rvcnkjc2V0Q3VycmVudE1lYWxTdGF0dXNcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogU2V0IGN1cnJlbnQgbWVhbCBzdGF0dXMoXCJuZXdcIiBvciBcImVkaXRcIikuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHN0YXR1cyBDdXJyZW50IG1lYWwgc3RhdHVzKFwibmV3XCIgb3IgXCJlZGl0XCIpLlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0Q3VycmVudE1lYWxTdGF0dXMoc3RhdHVzKSB7XHJcblx0XHRcdGN1cnJlbnRNZWFsU3RhdHVzID0gc3RhdHVzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldEN1cnJlbmN5XHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFJldHVybiBjdXJyZW5jeS5cclxuXHRcdCAqXHJcblx0XHQgKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbmN5LlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0Q3VycmVuY3koKSB7XHJcblx0XHRcdHJldHVybiBjdXJyZW5jeTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRDdXJyZW50TWVhbEFtb3VudFxyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBSZXR1cm4gY3VycmVudCBtZWFsIGFtb3VudC5cclxuXHRcdCAqXHJcblx0XHQgKiBAcmV0dXJuIHtudW1iZXJ9IEN1cnJlbnQgbWVhbCBhbW91bnQuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBnZXRDdXJyZW50TWVhbEFtb3VudCgpIHtcclxuXHRcdFx0cmV0dXJuIGN1cnJlbnRBbW91bnQ7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3Rvcnkjc2V0Q3VycmVudE1lYWxBbW91bnRcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogU2V0IGN1cnJlbnQgbWVhbCBhbW91bnQuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCBDdXJyZW50IG1lYWwgYW1vdW50LlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0Q3VycmVudE1lYWxBbW91bnQoYW1vdW50KSB7XHJcblx0XHRcdGN1cnJlbnRBbW91bnQgPSBhbW91bnQ7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3Rvcnkjc2V0Q3VycmVudE1lYWxCeUlkXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFNldCBjdXJyZW50IG1lYWwgYnkgaWQuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGlkIElkIG9mIGN1cnJlbnQgbWVhbC5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIHNldEN1cnJlbnRNZWFsQnlJZChpZCkge1xyXG5cclxuXHRcdFx0Y3VycmVudE1lYWwgPSBtZWFscy5wcm9kdWN0cy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uaWQgPT09IGlkKVswXTtcclxuXHJcblx0XHRcdGlmICghY3VycmVudE1lYWwpIHtcclxuXHRcdFx0XHRjdXJyZW50TWVhbCA9IG1lYWxzLmRyaW5rcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0uaWQgPT09IGlkKVswXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLmZhY3RvcnkoXCJNb2RpZmllcnNGYWN0b3J5XCIsIE1vZGlmaWVyc0ZhY3RvcnkpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAqIEBuYW1lIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAqIEByZXF1aXJlcyBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogRmFjdG9yeSB3b3JrIHdpdGggbW9kaWZpZXJzLlxyXG4gICAgICpcclxuICAgICAqKi9cclxuICAgIGZ1bmN0aW9uIE1vZGlmaWVyc0ZhY3RvcnkoQ2FydEZhY3RvcnkpIHtcclxuXHJcbiAgICAgICAgbGV0IGZhY3RvcnkgPSB7XHJcbiAgICAgICAgICAgIGdldENoZWNrZWRNb2RpZmllcnMgICAgIDogZ2V0Q2hlY2tlZE1vZGlmaWVycyxcclxuICAgICAgICAgICAgbW9kaWZpZXJIYXNCZWVuU2VsZWN0ZWQgOiBtb2RpZmllckhhc0JlZW5TZWxlY3RlZCxcclxuICAgICAgICAgICAgZGVsZXRlTW9kaWZpZXIgICAgICAgICAgOiBkZWxldGVNb2RpZmllcixcclxuICAgICAgICAgICAgc2VsZWN0TW9kaWZpZXIgICAgICAgICAgOiBzZWxlY3RNb2RpZmllcixcclxuICAgICAgICAgICAgcGlja0NoZWNrZWRNb2RpZmllcnMgICAgOiBwaWNrQ2hlY2tlZE1vZGlmaWVyc1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBmYWN0b3J5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeSNnZXRDaGVja2VkTW9kaWZpZXJzXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gYXJyYXkgd2l0aCBtb2RpZmllcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3RbXX0gQXJyYXkgb2YgbW9kaWZpZXJzIG9iamVjdHMuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldENoZWNrZWRNb2RpZmllcnMoKSB7XHJcbiAgICAgICAgICAgIGxldCBjYXJ0TGlzdCA9IENhcnRGYWN0b3J5LmdldENhcnRMaXN0KClbQ2FydEZhY3RvcnkuZ2V0SW5kZXhFZGl0TWVhbCgpXTtcclxuICAgICAgICAgICAgcmV0dXJuIGNhcnRMaXN0Lm1vZGlmaWVycztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I21vZGlmaWVySGFzQmVlblNlbGVjdGVkXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gdHJ1ZSBpZiBtb2RpZmllciBoYXMgYmVlbiBzZWxlY3RlZCwgb3IgZmFsc2UgaWYgbm8uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBzZWxlY3RlZE1vZGlmaWVycyBBcnJheSB3aXRoIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gbW9kaWZpZXIgTW9kaWZpZXIgb2JqZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbW9kaWZpZXIgaGFzIGJlZW4gc2VsZWN0ZWQsIGVsc2UgZmFsc2UuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIG1vZGlmaWVySGFzQmVlblNlbGVjdGVkKHNlbGVjdGVkTW9kaWZpZXJzLCBtb2RpZmllcikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRNb2RpZmllcnMuc29tZSgoaXRlbSkgPT4gbW9kaWZpZXIubmFtZSA9PT0gaXRlbS5uYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I2RlbGV0ZU1vZGlmaWVyXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBEZWxldGUgbW9kaWZpZXIgYXQgYXJyYXkgc2VsZWN0ZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gc2VsZWN0ZWRNb2RpZmllcnMgQXJyYXkgd2l0aCBzZWxlY3RlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1vZGlmaWVyIE1vZGlmaWVyIG9iamVjdCB3aG8gYmUgZGVsZXRlZC5cclxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3RbXX0gTmV3IGFycmF5IG9mIG1vZGlmaWVycy5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlTW9kaWZpZXIoc2VsZWN0ZWRNb2RpZmllcnMsIG1vZGlmaWVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZE1vZGlmaWVycy5maWx0ZXIoKGl0ZW0pID0+IG1vZGlmaWVyLm5hbWUgIT09IGl0ZW0ubmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeSNzZWxlY3RNb2RpZmllclxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5Nb2RpZmllcnNGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQWRkIG1vZGlmaWVyIGlmIGl0IG5vdCBoYXMgYmVlbiBzZWxlY3RlZCwgZWxzZSBkZWxldGUgbW9kaWZpZXIgYXRcclxuICAgICAgICAgKiBhcnJheSBvZiBzZWxlY3RlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBzZWxlY3RlZE1vZGlmaWVycyBBcnJheSB3aXRoIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gbW9kaWZpZXIgTW9kaWZpZXIgb2JqZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdFtdfSBBcnJheSB3aXRoIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0TW9kaWZpZXIoc2VsZWN0ZWRNb2RpZmllcnMsIG1vZGlmaWVyKSB7XHJcbiAgICAgICAgICAgIGxldCBzZWxlY3RlZE1vZGlmID0gc2VsZWN0ZWRNb2RpZmllcnMuc2xpY2UoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghbW9kaWZpZXJIYXNCZWVuU2VsZWN0ZWQoc2VsZWN0ZWRNb2RpZiwgbW9kaWZpZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE1vZGlmLnB1c2gobW9kaWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRNb2RpZiA9IGRlbGV0ZU1vZGlmaWVyKHNlbGVjdGVkTW9kaWYsIG1vZGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ2FydEZhY3RvcnkuYWRkTW9kaWZpZXJzVG9MaXN0KHNlbGVjdGVkTW9kaWYpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTW9kaWY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeSNwaWNrQ2hlY2tlZE1vZGlmaWVyc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5Nb2RpZmllcnNGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUGljayBhbGwgY2hlY2tlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBtb2RpZmllcnMgQWxsIG1vZGlmaWVycyBvZiBjdXJyZW50IG1lYWwuXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gY2hlY2tlZE1vZGlmaWVycyBBcnJheSB3aXRoIGNoZWNrZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdFtdfSBBcnJheSB3aXRoIGNoZWNrZWQgYW5kIHBpY2tlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHBpY2tDaGVja2VkTW9kaWZpZXJzKG1vZGlmaWVycywgY2hlY2tlZE1vZGlmaWVycykge1xyXG4gICAgICAgICAgICBsZXQgc2VsZWN0ZWRNb2RpZiA9IFtdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNoZWNrZWRNb2RpZmllcnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW5DaGVja2VkTW9kaWZpZXJzID0gY2hlY2tlZE1vZGlmaWVycy5sZW5ndGg7IGkgPCBsZW5DaGVja2VkTW9kaWZpZXJzOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDAsIGxlbk1vZGlmaWVycyA9IG1vZGlmaWVycy5sZW5ndGg7IGogPCBsZW5Nb2RpZmllcnM7IGorKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGlmaWVyc1tqXS5uYW1lID09PSBjaGVja2VkTW9kaWZpZXJzW2ldLm5hbWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RpZmllcnNbal0uY2hlY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRNb2RpZi5wdXNoKG1vZGlmaWVyc1tqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTW9kaWZcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCk7XHJcbiIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmFwcFBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2Ugb2YgYXBwLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxhcHAtcGFnZT48L2FwcC1wYWdlPlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICAuY29tcG9uZW50KFwiYXBwUGFnZVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvYXBwL3RlbXBsYXRlL2FwcFBhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5nczoge30sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogXCJhcHBcIixcclxuICAgICAgICAgICAgY29udHJvbGxlcjogQXBwQ29udHJvbGxlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6QXBwQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJhcHBQYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBBcHBDb250cm9sbGVyKCkge31cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpjYXJ0UGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBjYXJ0IHBhZ2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPGNhcnQtcGFnZT48L2NhcnQtcGFnZT5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcImNhcnRQYWdlXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9jYXJ0L3RlbXBsYXRlL2NhcnRQYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3M6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6IFwiY2FydFwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBDYXJ0Q29udHJvbGxlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6Q2FydENvbnRyb2xsZXJcclxuICAgICAqIEByZXF1aXJlcyBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgICAqIEByZXF1aXJlcyBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IGN1cnJlbmN5IEN1cnJlbmN5LlxyXG4gICAgICogQHByb3BlcnR5IHtvYmplY3RbXX0gIGNhcnRMaXN0IEFycmF5IG9mIHNlbGVjdCBtZWFscyBhbmQgZHJpbmtzLlxyXG4gICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHRvdGFsUHJpY2UgVG90YWwgcHJpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImNhcnRQYWdlXCIuXHJcbiAgICAgKiBEaXNwbGF5IHVzZXItc2VsZWN0ZWQgbWVhbHMgYW5kIGRyaW5rcyBhbmQgdGhlaXIgdG90YWwgcHJpY2UuXHJcbiAgICAgKiBQcm92aWRlcyB0aGUgYWJpbGl0eSB0byBlZGl0IHRoZWlyIGNob2ljZS5cclxuICAgICAqKi9cclxuICAgIGZ1bmN0aW9uIENhcnRDb250cm9sbGVyKE1lYWxzRmFjdG9yeSwgQ2FydEZhY3RvcnkpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZtLmN1cnJlbmN5ICAgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVuY3koKTtcclxuICAgICAgICB2bS5jYXJ0TGlzdCAgID0gQ2FydEZhY3RvcnkuZ2V0Q2FydExpc3QoKTtcclxuICAgICAgICB2bS50b3RhbFByaWNlID0gQ2FydEZhY3RvcnkuZ2V0VG90YWxQcmljZSgpO1xyXG4gICAgICAgIHZtLmVkaXRNZWFsICAgPSBlZGl0TWVhbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6Q2FydENvbnRyb2xsZXIjZWRpdE1lYWxcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpDYXJ0Q29udHJvbGxlclxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIE9wZW4gbWVhbCBmb3IgZWRpdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtZWFsIE1lYWwgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBDdXJyZW50IG1lYWwgaW5kZXguXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGVkaXRNZWFsKG1lYWwsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIENhcnRGYWN0b3J5LnNldEluZGV4RWRpdE1lYWwoaW5kZXgpO1xyXG4gICAgICAgICAgICBNZWFsc0ZhY3Rvcnkuc2V0Q3VycmVudE1lYWxCeUlkKG1lYWwuaWQpO1xyXG4gICAgICAgICAgICBNZWFsc0ZhY3Rvcnkuc2V0Q3VycmVudE1lYWxBbW91bnQobWVhbC5hbW91bnQpO1xyXG4gICAgICAgICAgICBNZWFsc0ZhY3Rvcnkuc2V0Q3VycmVudE1lYWxTdGF0dXMoXCJlZGl0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpjYXJ0SWNvblBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2Ugb2YgY2FydCBidXR0b24gYW5kIHN0cmluZyB3aXRoIG1lYWxzIGNvdW50LlxyXG4gICAgICAgICAqIEFjY2VwdHMgZnJvbSBwYXJlbnQgY29udHJvbGxlciBjb3VudCBtZWFscyBpbiBjYXJ0IGluIHZhcmlhYmxlIFwiY291bnRcIi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEB1c2FnZSA8Y2FydC1pY29uLXBhZ2U+PC9jYXJ0LWljb24tcGFnZT5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcImNhcnRJY29uUGFnZVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvY2FydEljb24vdGVtcGxhdGUvY2FydEljb25QYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIGNvdW50OiBcIkBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6IFwiY2FydEljb25cIixcclxuICAgICAgICAgICAgY29udHJvbGxlcjogQ2FydEljb25Db250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpDYXJ0SWNvbkNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiY2FydEljb25QYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBDYXJ0SWNvbkNvbnRyb2xsZXIoKSB7fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmVycm9yUGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSBvZiBlcnJvciBwYWdlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxlcnJvci1wYWdlPjwvZXJyb3ItcGFnZT5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcImVycm9yUGFnZVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvZXJyb3IvdGVtcGxhdGUvZXJyb3JQYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3M6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6IFwiZXJyb3JcIixcclxuICAgICAgICAgICAgY29udHJvbGxlcjogRXJyb3JDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpFcnJvckNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiZXJyb3JQYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBFcnJvckNvbnRyb2xsZXIoKSB7fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmRyaW5rc0xpc3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gbGlzdCBvZiBkcmlua3MuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPGRyaW5rcy1saXN0PjwvZHJpbmtzLWxpc3Q+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJkcmlua3NMaXN0XCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9kcmlua3NMaXN0L3RlbXBsYXRlL2RyaW5rc0xpc3QuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5nczoge30sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogXCJkcmlua3NMaXN0XCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IERyaW5rc0xpc3RDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlclxyXG4gICAgICogQHJlcXVpcmVzIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IGN1cnJlbmN5IEN1cnJlbmN5LlxyXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufSBvbmx5U29mdERyaW5rcyBWYXJpYWJsZSBpbmRpY2F0aW5nIHNlbGVjdCBvbmx5IHNvZnQgZHJpbmsgb3Igbm8uXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImRyaW5rc0xpc3RcIi5cclxuICAgICAqIEhhbmRsZSBhIHVzZXIgY2hvaWNlIGFib3V0IGRyaW5rLlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gRHJpbmtzTGlzdENvbnRyb2xsZXIoTWVhbHNGYWN0b3J5KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHZtICAgICA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZtLmRyaW5rcyAgICAgICAgICAgPSBbXTtcclxuICAgICAgICB2bS5vbmx5U29mdERyaW5rcyAgID0gZmFsc2U7XHJcbiAgICAgICAgdm0uY3VycmVuY3kgICAgICAgICA9IFwiXCI7XHJcbiAgICAgICAgdm0ub3BlbkRyaW5rICAgICAgICA9IG9wZW5EcmluaztcclxuICAgICAgICB2bS5nZXREcmlua3NGb3JWaWV3ID0gZ2V0RHJpbmtzRm9yVmlldztcclxuXHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6RHJpbmtzTGlzdENvbnRyb2xsZXIjYWN0aXZhdGVcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlclxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIE1ldGhvZCB0byBpbml0aWFsaXplIGRhdGEuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICBNZWFsc0ZhY3RvcnkuZ2V0TWVhbHMoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZ2V0RHJpbmtzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkRyaW5rc0xpc3RDb250cm9sbGVyI2dldERyaW5rc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOkRyaW5rc0xpc3RDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQXNzaWduaW5nIGEgZGF0YSBhdCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGRyaW5rc09iaiBEcmlua3Mgb2JqZWN0IGNvbnRhaW5zIGN1cnJlbmN5IGFuZCBkcmlua3MgYXJyYXkuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldERyaW5rcyhkcmlua3NPYmopIHtcclxuICAgICAgICAgICAgdm0uY3VycmVuY3kgPSBkcmlua3NPYmouY3VycmVuY3k7XHJcbiAgICAgICAgICAgIHZtLmRyaW5rcyAgID0gZHJpbmtzT2JqLmRyaW5rcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkRyaW5rc0xpc3RDb250cm9sbGVyI29wZW5Ecmlua1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOkRyaW5rc0xpc3RDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ2FsbCBtZXRob2Qgb3Blbk1lYWwgb3duZWQgTWVhbHNGYWN0b3J5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGRyaW5rIERyaW5rIG9iamVjdC5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gb3BlbkRyaW5rKGRyaW5rKSB7XHJcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5vcGVuTWVhbChkcmluaywgXCJuZXdcIiwgMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlciNnZXREcmlua3NGb3JWaWV3XHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6RHJpbmtzTGlzdENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gYWxsIGRyaW5rcyBvciBvbmx5IHNvZnQgZHJpbmtzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7b2JqZWN0W119IEFycmF5IG9mIGRyaW5rcy5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RHJpbmtzRm9yVmlldygpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2bS5vbmx5U29mdERyaW5rcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZtLmRyaW5rcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udGlwcGxlICE9PSB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2bS5kcmlua3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6Zm9vdGVyUGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBmb290ZXIgc2VjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEB1c2FnZSA8Zm9vdGVyLXBhZ2U+PC9mb290ZXItcGFnZT5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcImZvb3RlclBhZ2VcIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL2Zvb3Rlci90ZW1wbGF0ZS9mb290ZXJQYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3M6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6IFwiZm9vdGVyXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IEZvb3RlckNvbnRyb2xsZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkZvb3RlckNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiZm9vdGVyUGFnZVwiLlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gRm9vdGVyQ29udHJvbGxlcigpIHt9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6aGVhZGVyUGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBoZWFkZXIgc2VjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEB1c2FnZSA8aGVhZGVyLXBhZ2U+PC9oZWFkZXItcGFnZT5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcImhlYWRlclBhZ2VcIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL2hlYWRlci90ZW1wbGF0ZS9oZWFkZXJQYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3M6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6IFwiaGVhZGVyXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IEhlYWRlckNvbnRyb2xsZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkhlYWRlckNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiaGVhZGVyUGFnZVwiLlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcigpIHt9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6bG9nb1BhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gbG9nbyBzZWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxsb2dvLXBhZ2U+PC9sb2dvLXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJsb2dvUGFnZVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvbG9nby90ZW1wbGF0ZS9sb2dvUGFnZS5odG1sXCIsXHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7fSxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiBcImxvZ29cIixcclxuICAgICAgICAgICAgY29udHJvbGxlcjogTG9nb0NvbnRyb2xsZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkxvZ29Db250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImxvZ29QYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBMb2dvQ29udHJvbGxlcigpIHt9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6bWFpblBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gbWFpbiBzZWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxtYWluLXBhZ2U+PC9tYWluLXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJtYWluUGFnZVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvbWFpbi90ZW1wbGF0ZS9tYWluUGFnZS5odG1sXCIsXHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7fSxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiBcIm1haW5cIixcclxuICAgICAgICAgICAgY29udHJvbGxlcjogTWFpbkNvbnRyb2xsZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1haW5Db250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcIm1haW5QYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBNYWluQ29udHJvbGxlcigpIHt9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKFwiTWVhbHNcIilcclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIGRpcmVjdGl2ZVxyXG5cdFx0ICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOm1lYWxQYWdlXHJcblx0XHQgKlxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIG9mIG1lYWwuXHJcblx0XHQgKiBBY2NlcHRzIGZyb20gcGFyZW50IGNvbnRyb2xsZXIgcGF0aCB3aGVyZSB0aGUgdXNlciBjYW1lIGluIHZhcmlhYmxlIFwicGF0aFwiLlxyXG5cdFx0ICpcclxuXHRcdCAqIEB1c2FnZSA8bWVhbC1wYWdlPjwvbWVhbC1wYWdlPlxyXG5cdFx0ICoqL1xyXG5cdFx0LmNvbXBvbmVudChcIm1lYWxQYWdlXCIsIHtcclxuXHRcdFx0dGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tZWFsL3RlbXBsYXRlL21lYWxQYWdlLmh0bWxcIixcclxuXHRcdFx0YmluZGluZ3M6IHtcclxuXHRcdFx0XHRwYXRoOiBcIkBcIlxyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb250cm9sbGVyQXM6IFwibWVhbFwiLFxyXG5cdFx0XHRjb250cm9sbGVyOiBNZWFsQ29udHJvbGxlclxyXG5cdFx0fSk7XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBuZ2RvYyBjb250cm9sbGVyXHJcblx0ICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsQ29udHJvbGxlclxyXG5cdCAqIEByZXF1aXJlcyBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHQgKiBAcmVxdWlyZXMgTWVhbHMuQ2FydEZhY3RvcnlcclxuXHQgKiBAcHJvcGVydHkge29iamVjdH0gY3VycmVudE1lYWwgQ3VycmVudCBtZWFsLlxyXG5cdCAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjdXJyZW5jeSBDdXJyZW5jeS5cclxuXHQgKiBAcHJvcGVydHkge251bWJlcn0gc2VsZWN0QW1vdW50IEN1cnJlbnQgbWVhbCBzZWxlY3QgYW1vdW50LlxyXG5cdCAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBtZWFsU3RhdHVzIEN1cnJlbnQgbWVhbCBzdGF0dXMuXHJcblx0ICogQHByb3BlcnR5IHtudW1iZXJ9IGNhcnRDb3VudCBDb3VudCBtZWFsIGluIGNhcnQuXHJcblx0ICpcclxuXHQgKiBAZGVzY3JpcHRpb25cclxuXHQgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcIm1lYWxQYWdlXCIuXHJcblx0ICogQWxsb3dzIHRoZSB1c2VyIHRvIGFkZCBtZWFsIHRvIGNhcnQsIGRlbGV0ZSBtZWFsLCBlZGl0IG1lYWwgYW5kIGV0Yy5cclxuXHQgKiovXHJcblx0ZnVuY3Rpb24gTWVhbENvbnRyb2xsZXIoTWVhbHNGYWN0b3J5LCBDYXJ0RmFjdG9yeSkge1xyXG5cclxuXHRcdGNvbnN0IHZtID0gdGhpcztcclxuXHJcblx0XHR2bS5jdXJyZW50TWVhbCAgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVudE1lYWwoKTtcclxuXHRcdHZtLmN1cnJlbmN5ICAgICA9IE1lYWxzRmFjdG9yeS5nZXRDdXJyZW5jeSgpO1xyXG5cdFx0dm0uc2VsZWN0QW1vdW50ID0gTWVhbHNGYWN0b3J5LmdldEN1cnJlbnRNZWFsQW1vdW50KCk7XHJcblx0XHR2bS5tZWFsU3RhdHVzICAgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVudE1lYWxTdGF0dXMoKTtcclxuXHRcdHZtLmNhcnRDb3VudCAgICA9IENhcnRGYWN0b3J5LmdldENhcnRMaXN0Q291bnQoKTtcclxuXHRcdHZtLmFkZE1lYWwgICAgICA9IGFkZE1lYWw7XHJcblx0XHR2bS5yZW1vdmVNZWFsICAgPSByZW1vdmVNZWFsO1xyXG5cdFx0dm0uc2F2ZU1lYWwgICAgID0gc2F2ZU1lYWw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyI2FkZE1lYWxcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyXHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIENhbGwgbWV0aG9kIGFkZE1lYWxUb0NhcnRMaXN0IG93bmVkIENhcnRGYWN0b3J5LlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gYWRkTWVhbCgpIHtcclxuXHRcdFx0Q2FydEZhY3RvcnkuYWRkTWVhbFRvQ2FydExpc3Qodm0uY3VycmVudE1lYWwsIHZtLnNlbGVjdEFtb3VudCk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyI3JlbW92ZU1lYWxcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyXHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIENhbGwgbWV0aG9kIHJlbW92ZU1lYWwgb3duZWQgQ2FydEZhY3RvcnlcclxuXHRcdCAqIGFuZCBtZXRob2QgZGVsZXRlTW9kaWZpZXJzIG93bmVkIENhcnRGYWN0b3J5LlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlTWVhbCgpIHtcclxuXHRcdFx0Q2FydEZhY3RvcnkucmVtb3ZlTWVhbCgpO1xyXG5cdFx0XHRDYXJ0RmFjdG9yeS5kZWxldGVNb2RpZmllcnMoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TWVhbENvbnRyb2xsZXIjc2F2ZU1lYWxcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyXHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIENhbGwgbWV0aG9kIHJlbW92ZU1lYWwgb3duZWQgQ2FydEZhY3RvcnlcclxuXHRcdCAqIGFuZCBtZXRob2QgYWRkTWVhbFRvQ2FydExpc3Qgb3duZWQgQ2FydEZhY3RvcnkuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBzYXZlTWVhbCgpIHtcclxuXHRcdFx0Q2FydEZhY3RvcnkucmVtb3ZlTWVhbCgpO1xyXG5cdFx0XHR2bS5hZGRNZWFsKCk7XHJcblx0XHR9XHJcblx0fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcIk1lYWxzXCIpXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuXHRcdCAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptZWFsc0xpc3RcclxuXHRcdCAqXHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gbGlzdCBvZiBtZWFscy5cclxuXHRcdCAqXHJcblx0XHQgKiBAdXNhZ2UgPG1lYWxzLWxpc3Q+PC9tZWFscy1saXN0PlxyXG5cdFx0ICoqL1xyXG5cdFx0LmNvbXBvbmVudChcIm1lYWxzTGlzdFwiLCB7XHJcblx0XHRcdHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvbWVhbHNMaXN0L3RlbXBsYXRlL21lYWxzTGlzdC5odG1sXCIsXHJcblx0XHRcdGJpbmRpbmdzOiB7fSxcclxuXHRcdFx0Y29udHJvbGxlckFzOiBcIm1lYWxzTGlzdFwiLFxyXG5cdFx0XHRjb250cm9sbGVyOiBNZWFsc0xpc3RDb250cm9sbGVyXHJcblx0XHR9KTtcclxuXHJcblx0LyoqXHJcblx0ICogQG5nZG9jIGNvbnRyb2xsZXJcclxuXHQgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXJcclxuXHQgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0ICogQHByb3BlcnR5IHtzdHJpbmd9IGN1cnJlbmN5IEN1cnJlbmN5LlxyXG5cdCAqIEBwcm9wZXJ0eSB7b2JqZWN0W119IHByb2R1Y3RzIEFycmF5IG9mIHByb2R1Y3RzLlxyXG5cdCAqXHJcblx0ICogQGRlc2NyaXB0aW9uXHJcblx0ICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtZWFsc0xpc3RcIi5cclxuXHQgKiBIYW5kbGUgYSB1c2VyIGNob2ljZSBhYm91dCBtZWFsLlxyXG5cdCAqKi9cclxuXHRmdW5jdGlvbiBNZWFsc0xpc3RDb250cm9sbGVyKE1lYWxzRmFjdG9yeSkge1xyXG5cclxuXHRcdGNvbnN0IHZtID0gdGhpcztcclxuXHJcblx0XHR2bS5vcGVuTWVhbCA9IG9wZW5NZWFsO1xyXG5cdFx0dm0uY3VycmVuY3kgPSBcIlwiO1xyXG5cdFx0dm0ucHJvZHVjdHMgPSBudWxsO1xyXG5cclxuXHRcdGFjdGl2YXRlKCk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXIjYWN0aXZhdGVcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXJcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogTWV0aG9kIHRvIGluaXRpYWxpemUgZGF0YS5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG5cdFx0XHRNZWFsc0ZhY3RvcnkuZ2V0TWVhbHMoKVxyXG5cdFx0XHRcdC50aGVuKGdldFByb2R1Y3RzKTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlciNnZXRQcm9kdWN0c1xyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlclxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBBc3NpZ25pbmcgYSBkYXRhIGF0IHByb3BlcnRpZXMuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IG1lYWxzT2JqIE1lYWxzIG9iamVjdCBjb250YWlucyBjdXJyZW5jeSBhbmQgcHJvZHVjdHMgYXJyYXkuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBnZXRQcm9kdWN0cyhtZWFsc09iaikge1xyXG5cdFx0XHR2bS5jdXJyZW5jeSA9IG1lYWxzT2JqLmN1cnJlbmN5O1xyXG5cdFx0XHR2bS5wcm9kdWN0cyA9IG1lYWxzT2JqLnByb2R1Y3RzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyI29wZW5NZWFsXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyXHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIENhbGwgbWV0aG9kIG9wZW5NZWFsIG93bmVkIE1lYWxzRmFjdG9yeS5cclxuXHRcdCAqXHJcblx0XHQgKiBAcGFyYW0ge29iamVjdH0gbWVhbCBNZWFsIG9iamVjdC5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIG9wZW5NZWFsKG1lYWwpIHtcclxuXHRcdFx0TWVhbHNGYWN0b3J5Lm9wZW5NZWFsKG1lYWwsIFwibmV3XCIsIDEpO1xyXG5cdFx0fVxyXG5cdH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptZW51UGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBtZW51IHNlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPG1lbnUtcGFnZT48L21lbnUtcGFnZT5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcIm1lbnVQYWdlXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tZW51L3RlbXBsYXRlL21lbnVQYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3M6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6IFwibWVudVwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBNZW51Q29udHJvbGxlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TWVudUNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwibWVudVBhZ2VcIi5cclxuICAgICAqKi9cclxuICAgIGZ1bmN0aW9uIE1lbnVDb250cm9sbGVyKCkge31cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptb2RpZmllcnNQYWdlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIG9mIG1vZGlmaWVycyBzZWN0aW9uLlxyXG4gICAgICAgICAqIEFjY2VwdHMgZnJvbSBwYXJlbnQgY29udHJvbGxlciBjdXJyZW5jeSBpbiB2YXJpYWJsZSBcImN1cnJlbmN5XCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPG1vZGlmaWVycy1wYWdlPjwvbW9kaWZpZXJzLXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJtb2RpZmllcnNQYWdlXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tb2RpZmllcnMvdGVtcGxhdGUvbW9kaWZpZXJzUGFnZS5odG1sXCIsXHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW5jeTogXCJAXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiBcIm1vZFwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBNb2RpZmllcnNDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNb2RpZmllcnNDb250cm9sbGVyXHJcbiAgICAgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICAgKiBAcmVxdWlyZXMgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICogQHByb3BlcnR5IHtvYmplY3RbXX0gbW9kaWZpZXJzIEFycmF5IG9mIG1vZGlmaWVycy5cclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwibW9kaWZpZXJzUGFnZVwiLlxyXG4gICAgICogSGFuZGxlIGEgdXNlciBjaG9pY2UgYWJvdXQgbW9kaWZpZXJzLlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gTW9kaWZpZXJzQ29udHJvbGxlcihNZWFsc0ZhY3RvcnksIE1vZGlmaWVyc0ZhY3RvcnkpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgdm0gICAgICAgICAgICAgICAgPSB0aGlzO1xyXG4gICAgICAgIGxldCAgIHNlbGVjdGVkTW9kaWZpZXJzID0gW107XHJcblxyXG4gICAgICAgIHZtLm1vZGlmaWVycyAgICAgICAgICA9IE1lYWxzRmFjdG9yeS5nZXRNb2RpZmllcnMoKTtcclxuICAgICAgICB2bS5zZWxlY3RNb2RpZmllciAgICAgPSBzZWxlY3RNb2RpZmllcjtcclxuICAgICAgICB2bS5jbGVhblBpY2tNb2RpZmllcnMgPSBjbGVhblBpY2tNb2RpZmllcnM7XHJcblxyXG4gICAgICAgIHZtLmNsZWFuUGlja01vZGlmaWVycygpO1xyXG5cclxuICAgICAgICBpZiAoTWVhbHNGYWN0b3J5LmdldEN1cnJlbnRNZWFsU3RhdHVzKCkgPT09IFwiZWRpdFwiKSB7XHJcbiAgICAgICAgICAgIC8vUGljayBjaGVja2JveGVzIGZvciBzZWxlY3QgbW9kaWZpZXJzXHJcbiAgICAgICAgICAgIGxldCBjaGVja2VkTW9kaWZpZXJzID0gTW9kaWZpZXJzRmFjdG9yeS5nZXRDaGVja2VkTW9kaWZpZXJzKCk7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkTW9kaWZpZXJzICAgID0gTW9kaWZpZXJzRmFjdG9yeS5waWNrQ2hlY2tlZE1vZGlmaWVycyh2bS5tb2RpZmllcnMsIGNoZWNrZWRNb2RpZmllcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TW9kaWZpZXJzQ29udHJvbGxlciNjbGVhblBpY2tNb2RpZmllcnNcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpNb2RpZmllcnNDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ2xlYW4gcGljayBtb2RpZmllcnMgY2hlY2tib3guXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFuUGlja01vZGlmaWVycygpIHtcclxuICAgICAgICAgICAgaWYgKHZtLm1vZGlmaWVycykge1xyXG4gICAgICAgICAgICAgICAgdm0ubW9kaWZpZXJzLmZvckVhY2goKGl0ZW0pID0+IGl0ZW0uY2hlY2sgPSBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1vZGlmaWVyc0NvbnRyb2xsZXIjc2VsZWN0TW9kaWZpZXJcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpNb2RpZmllcnNDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ2FsbCBtZXRob2Qgc2VsZWN0TW9kaWZpZXIgb3duZWQgTW9kaWZpZXJzRmFjdG9yeS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtb2RpZmllciBNb2RpZmllciBvYmplY3QuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdE1vZGlmaWVyKG1vZGlmaWVyKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkTW9kaWZpZXJzID0gTW9kaWZpZXJzRmFjdG9yeS5zZWxlY3RNb2RpZmllcihzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpzZWxlY3RDb3VudFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBzZWxlY3QgYW1vdW50IG9mIG1lYWwuXHJcbiAgICAgICAgICogVHJhbnNmZXJzIHRvIHRoZSBwYXJlbnQgY29udHJvbGxlciBzZWxlY3RlZCBhbW91bnQgb2YgbWVhbCBpbiB2YXJpYWJsZSBcInNlbGVjdFwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxzZWxlY3QtY291bnQ+PC9zZWxlY3QtY291bnQ+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJzZWxlY3RDb3VudFwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvc2VsZWN0Q291bnQvdGVtcGxhdGUvc2VsZWN0Q291bnRQYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdDogXCI9XCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiBcInNlbGVjdFwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBTZWxlY3RDb3VudENvbnRyb2xsZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOlNlbGVjdENvdW50Q29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJzZWxlY3RDb3VudFwiLlxyXG4gICAgICogQ2FwdHVyZXMgdGhlIHVzZXIncyBjaG9pY2UgYXQgYW1vdW50LlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gU2VsZWN0Q291bnRDb250cm9sbGVyKCkge1xyXG5cclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZtLnNlbGVjdE51bSA9IHNlbGVjdE51bTtcclxuICAgICAgICB2bS5hY3RpdmVOdW0gPSBhY3RpdmVOdW07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOlNlbGVjdENvdW50Q29udHJvbGxlciNzZWxlY3ROdW1cclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBTZWxlY3QgbWVhbCBhbW91bnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtIE1lYWwgYW1vdW50LlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBzZWxlY3ROdW0obnVtKSB7XHJcbiAgICAgICAgICAgIHZtLnNlbGVjdCA9IG51bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOlNlbGVjdENvdW50Q29udHJvbGxlciNhY3RpdmVOdW1cclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB2YXJpYWJsZSBzZWxlY3QgaXMgbnVtLCBlbHNlIGZhbHNlLlxyXG4gICAgICAgICAqIElmIGZ1bmN0aW9uIHJldHVybiB0cnVlLCB0aGUgYnV0dG9uIHdpdGggbnVtIGdldCBjbGFzcyBcImFjdGl2ZVwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG51bSBNZWFsIGFtb3VudC5cclxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHNlbGVjdCBpcyBudW0uXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2ZU51bShudW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZtLnNlbGVjdCA9PT0gbnVtO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTsiXX0=
