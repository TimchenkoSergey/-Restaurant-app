"use strict";!function(){angular.module("Meals",["ui.router"])}(),function(){function e(e,n){e.state("app",{url:"/app",template:"<app-page></app-page>"}).state("app.main",{url:"/main",template:"<main-page></main-page>"}).state("app.main.meals",{url:"/meals",template:"<meals-list id='mealsList'></meals-list>"}).state("app.main.drinks",{url:"/drinks",template:"<drinks-list></drinks-list>"}).state("app.meal",{url:"/meal/:path",controllerAs:"meal",controller:t,template:"<meal-page id='meal' path='{{ meal.path }}'></meal-page>"}).state("app.cart",{url:"/cart",template:"<cart-page id='cart'></cart-page>"}).state("error",{url:"/error",template:"<error-page></error-page>"}),n.otherwise("/app/main/meals")}function t(e){this.path=e.path}e.$inject=["$stateProvider","$urlRouterProvider"],t.$inject=["$stateParams"],angular.module("Meals").config(e)}(),function(){function e(){function e(e){var t=0,n=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var i=a.value;t+=i.price}}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return t}function t(){return p}function n(e){p=e}function r(){return s.length}function o(e){m=e}function a(e,t){var n={};n.id=e.id,n.name=e.name,n.price=e.price,n.amount=t,m&&(n.modifiers=m.slice()),m=null,s.push(n)}function l(){return s}function i(){var t=0;if(s.length>0)for(var n=0,r=s.length;n<r;n++)t+=s[n].price*s[n].amount,s[n].modifiers&&(t+=e(s[n].modifiers)*s[n].amount);return t.toFixed(2)}function c(){m=null}function u(){s.splice(p,1)}var s=[],m=null,p=0,f={getIndexEditMeal:t,setIndexEditMeal:n,getCartListCount:r,addModifiersToList:o,addMealToCartList:a,getCartList:l,getTotalPrice:i,deleteModifiers:c,removeMeal:u};return f}angular.module("Meals").factory("CartFactory",e)}(),function(){function e(e,t){function n(e,t,n){i(e),u(t),p(n)}function r(t){return e({method:"GET",url:d}).success(function(e){g=e,M=e.currency,t.resolve(e)}).error(function(e,n){t.reject("Error in $http request"),console.log(e),console.log(n)}),t}function o(){return null!==h&&h.modifiers}function a(){var e=t.defer();return g?e.resolve(g):e=r(e),e.promise}function l(){return h}function i(e){h=e}function c(){return C}function u(e){C=e}function s(){return M}function m(){return y}function p(e){y=e}function f(e){h=g.products.filter(function(t){return t.id===e})[0],h||(h=g.drinks.filter(function(t){return t.id===e})[0])}var d="meals.json",g=null,M="",h=null,C="new",y=1,v={getModifiers:o,getMeals:a,getCurrentMeal:l,setCurrentMeal:i,getCurrentMealStatus:c,setCurrentMealStatus:u,getCurrency:s,getCurrentMealAmount:m,setCurrentMealAmount:p,setCurrentMealById:f,openMeal:n};return v}e.$inject=["$http","$q"],angular.module("Meals").factory("MealsFactory",e)}(),function(){function e(e){function t(){var t=e.getCartList()[e.getIndexEditMeal()];return t.modifiers}function n(e,t){return e.some(function(e){return t.name===e.name})}function r(e,t){return e.filter(function(e){return t.name!==e.name})}function o(t,o){n(t,o)?t=r(t,o):t.push(o),e.addModifiersToList(t)}function a(e,t,n){if(n)for(var r=0,a=n.length;r<a;r++)for(var l=0,i=e.length;l<i;l++)e[l].name===n[r].name&&(e[l].check=!0,o(t,e[l]))}var l={getCheckedModifiers:t,modifierHasBeenSelected:n,deleteModifier:r,selectModifier:o,pickCheckedModifiers:a};return l}e.$inject=["CartFactory"],angular.module("Meals").factory("ModifiersFactory",e)}(),function(){function e(){}angular.module("Meals").component("appPage",{templateUrl:"component-templates/app/template/appPage.html",bindings:{},controllerAs:"app",controller:e})}(),function(){function e(e,t){function n(n,r){t.setIndexEditMeal(r),e.setCurrentMealById(n.id),e.setCurrentMealAmount(n.amount),e.setCurrentMealStatus("edit")}var r=this;r.currency=e.getCurrency(),r.cartList=t.getCartList(),r.totalPrice=t.getTotalPrice(),r.editMeal=n}e.$inject=["MealsFactory","CartFactory"],angular.module("Meals").component("cartPage",{templateUrl:"component-templates/cart/template/cartPage.html",bindings:{},controllerAs:"cart",controller:e})}(),function(){function e(){}angular.module("Meals").component("cartIconPage",{templateUrl:"component-templates/cartIcon/template/cartIconPage.html",bindings:{count:"@"},controllerAs:"cartIcon",controller:e})}(),function(){function e(e){function t(){e.getMeals().then(n)}function n(e){a.currency=e.currency,l=e.drinks}function r(t){e.openMeal(t,"new",1)}function o(){return a.onlySoftDrinks?l.filter(function(e){return e.tipple!==!0}):l}var a=this,l=[];a.onlySoftDrinks=!1,a.currency="",a.openDrink=r,a.getDrinksForView=o,t()}e.$inject=["MealsFactory"],angular.module("Meals").component("drinksList",{templateUrl:"component-templates/drinksList/template/drinksList.html",bindings:{},controllerAs:"drinksList",controller:e})}(),function(){function e(){}angular.module("Meals").component("errorPage",{templateUrl:"component-templates/error/template/errorPage.html",bindings:{},controllerAs:"error",controller:e})}(),function(){function e(){}angular.module("Meals").component("footerPage",{templateUrl:"component-templates/footer/template/footerPage.html",bindings:{},controllerAs:"footer",controller:e})}(),function(){function e(){}angular.module("Meals").component("headerPage",{templateUrl:"component-templates/header/template/headerPage.html",bindings:{},controllerAs:"header",controller:e})}(),function(){function e(){}angular.module("Meals").component("logoPage",{templateUrl:"component-templates/logo/template/logoPage.html",bindings:{},controllerAs:"logo",controller:e})}(),function(){function e(){}angular.module("Meals").component("mainPage",{templateUrl:"component-templates/main/template/mainPage.html",bindings:{},controllerAs:"main",controller:e})}(),function(){function e(e,t){function n(){t.addMealToCartList(a.currentMeal,a.selectAmount)}function r(){t.removeMeal(),t.deleteModifiers()}function o(){t.removeMeal(),a.addMeal()}var a=this;a.currentMeal=e.getCurrentMeal(),a.currency=e.getCurrency(),a.selectAmount=e.getCurrentMealAmount(),a.mealStatus=e.getCurrentMealStatus(),a.cartCount=t.getCartListCount(),a.addMeal=n,a.removeMeal=r,a.saveMeal=o}e.$inject=["MealsFactory","CartFactory"],angular.module("Meals").component("mealPage",{templateUrl:"component-templates/meal/template/mealPage.html",bindings:{path:"@"},controllerAs:"meal",controller:e})}(),function(){function e(e){function t(){e.getMeals().then(n)}function n(e){o.currency=e.currency,o.products=e.products}function r(t){e.openMeal(t,"new",1)}var o=this;o.openMeal=r,o.currency="",o.products=null,t()}e.$inject=["MealsFactory"],angular.module("Meals").component("mealsList",{templateUrl:"component-templates/mealsList/template/mealsList.html",bindings:{},controllerAs:"mealsList",controller:e})}(),function(){function e(){}angular.module("Meals").component("menuPage",{templateUrl:"component-templates/menu/template/menuPage.html",bindings:{},controllerAs:"menu",controller:e})}(),function(){function e(e,t){function n(){o.modifiers&&o.modifiers.forEach(function(e){return e.check=!1})}function r(e){t.selectModifier(a,e)}var o=this,a=[];if(o.modifiers=e.getModifiers(),o.selectModifier=r,n(),"edit"===e.getCurrentMealStatus()){var l=t.getCheckedModifiers();t.pickCheckedModifiers(o.modifiers,a,l)}}e.$inject=["MealsFactory","ModifiersFactory"],angular.module("Meals").component("modifiersPage",{templateUrl:"component-templates/modifiers/template/modifiersPage.html",bindings:{currency:"@"},controllerAs:"mod",controller:e})}(),function(){function e(){function e(e){n.select=e}function t(e){return n.select===e}var n=this;n.selectNum=e,n.activeNum=t}angular.module("Meals").component("selectCount",{templateUrl:"component-templates/selectCount/template/selectCountPage.html",bindings:{select:"="},controllerAs:"select",controller:e})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1haW4uanMiLCJjb25maWcuanMiLCJjYXJ0RmFjdG9yeS5qcyIsIm1lYWxzRmFjdG9yeS5qcyIsIm1vZGlmaWVyc0ZhY3RvcnkuanMiLCJhcHAvYXBwLmpzIiwiY2FydC9jYXJ0LmpzIiwiY2FydEljb24vY2FydEljb24uanMiLCJkcmlua3NMaXN0L2RyaW5rc0xpc3QuanMiLCJlcnJvci9lcnJvci5qcyIsImZvb3Rlci9mb290ZXIuanMiLCJoZWFkZXIvaGVhZGVyLmpzIiwibG9nby9sb2dvLmpzIiwibWFpbi9tYWluLmpzIiwibWVhbC9tZWFsLmpzIiwibWVhbHNMaXN0L21lYWxzTGlzdC5qcyIsIm1lbnUvbWVudS5qcyIsIm1vZGlmaWVycy9tb2RpZmllcnMuanMiLCJzZWxlY3RDb3VudC9zZWxlY3RDb3VudC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlIiwiY29udHJvbGxlckFzIiwiY29udHJvbGxlciIsIk1lYWxDb250cm9sbGVyIiwib3RoZXJ3aXNlIiwiJHN0YXRlUGFyYW1zIiwidGhpcyIsInBhdGgiLCJDYXJ0RmFjdG9yeSIsImdldE1vZGlmaWVyc1ByaWNlIiwibW9kaWZpZXJzQXJyIiwidG90YWxQcmljZSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwidW5kZWZpbmVkIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwibW9kaWZpZXIiLCJ2YWx1ZSIsInByaWNlIiwiZXJyIiwicmV0dXJuIiwiZ2V0SW5kZXhFZGl0TWVhbCIsImluZGV4RWRpdE1lYWwiLCJzZXRJbmRleEVkaXRNZWFsIiwiaW5kZXgiLCJnZXRDYXJ0TGlzdENvdW50IiwiY2FydExpc3QiLCJsZW5ndGgiLCJhZGRNb2RpZmllcnNUb0xpc3QiLCJtb2RpZiIsIm1vZGlmaWVycyIsImFkZE1lYWxUb0NhcnRMaXN0IiwibWVhbCIsImFtb3VudCIsIm5ld01lYWwiLCJpZCIsIm5hbWUiLCJzbGljZSIsInB1c2giLCJnZXRDYXJ0TGlzdCIsImdldFRvdGFsUHJpY2UiLCJpIiwibGVuIiwidG9GaXhlZCIsImRlbGV0ZU1vZGlmaWVycyIsInJlbW92ZU1lYWwiLCJzcGxpY2UiLCJmYWN0b3J5IiwiTWVhbHNGYWN0b3J5IiwiJGh0dHAiLCIkcSIsIm9wZW5NZWFsIiwic3RhdHVzIiwic2V0Q3VycmVudE1lYWwiLCJzZXRDdXJyZW50TWVhbFN0YXR1cyIsInNldEN1cnJlbnRNZWFsQW1vdW50IiwiZ2V0TWVhbHNGcm9tSHR0cCIsImRlZmVycmVkIiwibWV0aG9kIiwibWVhbEFwaVVybCIsInN1Y2Nlc3MiLCJkYXRhIiwibWVhbHMiLCJjdXJyZW5jeSIsInJlc29sdmUiLCJlcnJvciIsInJlamVjdCIsImNvbnNvbGUiLCJsb2ciLCJnZXRNb2RpZmllcnMiLCJjdXJyZW50TWVhbCIsImdldE1lYWxzIiwiZGVmZXIiLCJwcm9taXNlIiwiZ2V0Q3VycmVudE1lYWwiLCJnZXRDdXJyZW50TWVhbFN0YXR1cyIsImN1cnJlbnRNZWFsU3RhdHVzIiwiZ2V0Q3VycmVuY3kiLCJnZXRDdXJyZW50TWVhbEFtb3VudCIsImN1cnJlbnRBbW91bnQiLCJzZXRDdXJyZW50TWVhbEJ5SWQiLCJwcm9kdWN0cyIsImZpbHRlciIsIml0ZW0iLCJkcmlua3MiLCJNb2RpZmllcnNGYWN0b3J5IiwiZ2V0Q2hlY2tlZE1vZGlmaWVycyIsIm1vZGlmaWVySGFzQmVlblNlbGVjdGVkIiwic2VsZWN0ZWRNb2RpZmllcnMiLCJzb21lIiwiZGVsZXRlTW9kaWZpZXIiLCJzZWxlY3RNb2RpZmllciIsInBpY2tDaGVja2VkTW9kaWZpZXJzIiwiY2hlY2tlZE1vZGlmaWVycyIsImxlbkNoZWNrZWRNb2RpZmllcnMiLCJqIiwibGVuTW9kaWZpZXJzIiwiY2hlY2siLCJBcHBDb250cm9sbGVyIiwiY29tcG9uZW50IiwidGVtcGxhdGVVcmwiLCJiaW5kaW5ncyIsIkNhcnRDb250cm9sbGVyIiwiZWRpdE1lYWwiLCJ2bSIsIkNhcnRJY29uQ29udHJvbGxlciIsImNvdW50IiwiRHJpbmtzTGlzdENvbnRyb2xsZXIiLCJhY3RpdmF0ZSIsInRoZW4iLCJnZXREcmlua3MiLCJkcmlua3NPYmoiLCJvcGVuRHJpbmsiLCJkcmluayIsImdldERyaW5rc0ZvclZpZXciLCJvbmx5U29mdERyaW5rcyIsInRpcHBsZSIsIkVycm9yQ29udHJvbGxlciIsIkZvb3RlckNvbnRyb2xsZXIiLCJIZWFkZXJDb250cm9sbGVyIiwiTG9nb0NvbnRyb2xsZXIiLCJNYWluQ29udHJvbGxlciIsImFkZE1lYWwiLCJzZWxlY3RBbW91bnQiLCJzYXZlTWVhbCIsIm1lYWxTdGF0dXMiLCJjYXJ0Q291bnQiLCJNZWFsc0xpc3RDb250cm9sbGVyIiwiZ2V0UHJvZHVjdHMiLCJtZWFsc09iaiIsIk1lbnVDb250cm9sbGVyIiwiTW9kaWZpZXJzQ29udHJvbGxlciIsImNsZWFuUGlja01vZGlmaWVycyIsImZvckVhY2giLCJTZWxlY3RDb3VudENvbnRyb2xsZXIiLCJzZWxlY3ROdW0iLCJudW0iLCJzZWxlY3QiLCJhY3RpdmVOdW0iXSwibWFwcGluZ3MiOiJBQUFBLGNDQUEsV0FHSUEsUUFDS0MsT0FBTyxTQUFVLGlCQ0oxQixXQU9JLFFBQVNDLEdBQU9DLEVBQWdCQyxHQUU1QkQsRUFDS0UsTUFBTSxPQUNIQyxJQUFLLE9BQ0xDLFNBQVUsMEJBRWJGLE1BQU0sWUFDSEMsSUFBSyxRQUNMQyxTQUFVLDRCQUViRixNQUFNLGtCQUNIQyxJQUFLLFNBQ0xDLFNBQVUsNkNBRWJGLE1BQU0sbUJBQ0hDLElBQUssVUFDTEMsU0FBVSxnQ0FFYkYsTUFBTSxZQUNIQyxJQUFLLGNBQ0xFLGFBQWMsT0FDZEMsV0FBWUMsRUFDWkgsU0FBVSw2REFFYkYsTUFBTSxZQUNIQyxJQUFLLFFBQ0xDLFNBQVUsc0NB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LFVBQVlBLEVBbENuQnZKLFFBQ0tDLE9BQU8sU0FXUCtHLFVBQVUsZUFDUEMsWUFBYyxnRUFDZEMsVUFDSW9DLE9BQVEsS0FFWjlJLGFBQWUsU0FDZkMsV0FBYTBJIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiLCBbXCJ1aS5yb3V0ZXJcIl0pO1xufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKS5jb25maWcoY29uZmlnKTtcblxuICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XG5cbiAgICAgICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoXCJhcHBcIiwge1xuICAgICAgICAgICAgdXJsOiBcIi9hcHBcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxhcHAtcGFnZT48L2FwcC1wYWdlPlwiXG4gICAgICAgIH0pLnN0YXRlKFwiYXBwLm1haW5cIiwge1xuICAgICAgICAgICAgdXJsOiBcIi9tYWluXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8bWFpbi1wYWdlPjwvbWFpbi1wYWdlPlwiXG4gICAgICAgIH0pLnN0YXRlKFwiYXBwLm1haW4ubWVhbHNcIiwge1xuICAgICAgICAgICAgdXJsOiBcIi9tZWFsc1wiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPG1lYWxzLWxpc3QgaWQ9J21lYWxzTGlzdCc+PC9tZWFscy1saXN0PlwiXG4gICAgICAgIH0pLnN0YXRlKFwiYXBwLm1haW4uZHJpbmtzXCIsIHtcbiAgICAgICAgICAgIHVybDogXCIvZHJpbmtzXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8ZHJpbmtzLWxpc3Q+PC9kcmlua3MtbGlzdD5cIlxuICAgICAgICB9KS5zdGF0ZShcImFwcC5tZWFsXCIsIHtcbiAgICAgICAgICAgIHVybDogXCIvbWVhbC86cGF0aFwiLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiBcIm1lYWxcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IE1lYWxDb250cm9sbGVyLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPG1lYWwtcGFnZSBpZD0nbWVhbCcgcGF0aD0ne3sgbWVhbC5wYXRoIH19Jz48L21lYWwtcGFnZT5cIlxuICAgICAgICB9KS5zdGF0ZShcImFwcC5jYXJ0XCIsIHtcbiAgICAgICAgICAgIHVybDogXCIvY2FydFwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGNhcnQtcGFnZSBpZD0nY2FydCc+PC9jYXJ0LXBhZ2U+XCJcbiAgICAgICAgfSkuc3RhdGUoXCJlcnJvclwiLCB7XG4gICAgICAgICAgICB1cmw6IFwiL2Vycm9yXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8ZXJyb3ItcGFnZT48L2Vycm9yLXBhZ2U+XCJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9hcHAvbWFpbi9tZWFsc1wiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBNZWFsQ29udHJvbGxlcigkc3RhdGVQYXJhbXMpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gJHN0YXRlUGFyYW1zLnBhdGg7XG4gICAgfVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKS5mYWN0b3J5KFwiQ2FydEZhY3RvcnlcIiwgQ2FydEZhY3RvcnkpO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIEZhY3Rvcnkgd29yayB3aXRoIGNhcnQuXHJcbiAgICAgKlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIENhcnRGYWN0b3J5KCkge1xuXG4gICAgICAgIHZhciBjYXJ0TGlzdCA9IFtdLFxuICAgICAgICAgICAgbW9kaWZpZXJzID0gbnVsbCxcbiAgICAgICAgICAgIGluZGV4RWRpdE1lYWwgPSAwLFxuICAgICAgICAgICAgZmFjdG9yeSA9IHtcbiAgICAgICAgICAgIGdldEluZGV4RWRpdE1lYWw6IGdldEluZGV4RWRpdE1lYWwsXG4gICAgICAgICAgICBzZXRJbmRleEVkaXRNZWFsOiBzZXRJbmRleEVkaXRNZWFsLFxuICAgICAgICAgICAgZ2V0Q2FydExpc3RDb3VudDogZ2V0Q2FydExpc3RDb3VudCxcbiAgICAgICAgICAgIGFkZE1vZGlmaWVyc1RvTGlzdDogYWRkTW9kaWZpZXJzVG9MaXN0LFxuICAgICAgICAgICAgYWRkTWVhbFRvQ2FydExpc3Q6IGFkZE1lYWxUb0NhcnRMaXN0LFxuICAgICAgICAgICAgZ2V0Q2FydExpc3Q6IGdldENhcnRMaXN0LFxuICAgICAgICAgICAgZ2V0VG90YWxQcmljZTogZ2V0VG90YWxQcmljZSxcbiAgICAgICAgICAgIGRlbGV0ZU1vZGlmaWVyczogZGVsZXRlTW9kaWZpZXJzLFxuICAgICAgICAgICAgcmVtb3ZlTWVhbDogcmVtb3ZlTWVhbFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBmYWN0b3J5O1xuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNnZXRNb2RpZmllcnNQcmljZVxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiB0b3RhbCBwcmljZSBvZiBtb2RpZmllcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBtb2RpZmllcnNBcnIgQXJyYXkgb2YgbW9kaWZpZXJzIG9iamVjdHMuXHJcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBUb3RhbCBwcmljZS5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGdldE1vZGlmaWVyc1ByaWNlKG1vZGlmaWVyc0Fycikge1xuICAgICAgICAgICAgdmFyIHRvdGFsUHJpY2UgPSAwO1xuXG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSBtb2RpZmllcnNBcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtb2RpZmllciA9IF9zdGVwLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsUHJpY2UgKz0gbW9kaWZpZXIucHJpY2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yID0gZXJyO1xuICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIV9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gJiYgX2l0ZXJhdG9yLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kaWRJdGVyYXRvckVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsUHJpY2U7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjZ2V0SW5kZXhFZGl0TWVhbFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBpbmRleCBmbyBlZGl0IG1lYWwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEluZGV4IG9mIGVkaXQgbWVhbC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGdldEluZGV4RWRpdE1lYWwoKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXhFZGl0TWVhbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNzZXRJbmRleEVkaXRNZWFsXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogU2V0IGluZGV4IG9mIGVkaXQgbWVhbC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBvZiBlZGl0IG1lYWwuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBzZXRJbmRleEVkaXRNZWFsKGluZGV4KSB7XG4gICAgICAgICAgICBpbmRleEVkaXRNZWFsID0gaW5kZXg7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjZ2V0Q2FydExpc3RDb3VudFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBjb3VudCBvZiBlbGVtZW50cyBpbiBjYXJ0IGxpc3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IENhcnQgbGlzdCBsZW5ndGguXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBnZXRDYXJ0TGlzdENvdW50KCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhcnRMaXN0Lmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNhZGRNb2RpZmllcnNUb0xpc3RcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBBZGQgbW9kaWZpZXJzIHRvIGxpc3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBtb2RpZiBBcnJheSB3aXRoIG1vZGlmaWVycyBvYmplY3RzLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gYWRkTW9kaWZpZXJzVG9MaXN0KG1vZGlmKSB7XG4gICAgICAgICAgICBtb2RpZmllcnMgPSBtb2RpZjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNhZGRNZWFsVG9DYXJ0TGlzdFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIEFkZCBtZWFsIHRvIGNhcnQgbGlzdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtZWFsIE1lYWwgb2JqZWN0LlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnQgQW1vdW50IG9mIG1lYWwuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBhZGRNZWFsVG9DYXJ0TGlzdChtZWFsLCBhbW91bnQpIHtcbiAgICAgICAgICAgIHZhciBuZXdNZWFsID0ge307XG5cbiAgICAgICAgICAgIG5ld01lYWwuaWQgPSBtZWFsLmlkO1xuICAgICAgICAgICAgbmV3TWVhbC5uYW1lID0gbWVhbC5uYW1lO1xuICAgICAgICAgICAgbmV3TWVhbC5wcmljZSA9IG1lYWwucHJpY2U7XG4gICAgICAgICAgICBuZXdNZWFsLmFtb3VudCA9IGFtb3VudDtcblxuICAgICAgICAgICAgaWYgKG1vZGlmaWVycykge1xuICAgICAgICAgICAgICAgIG5ld01lYWwubW9kaWZpZXJzID0gbW9kaWZpZXJzLnNsaWNlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1vZGlmaWVycyA9IG51bGw7XG4gICAgICAgICAgICBjYXJ0TGlzdC5wdXNoKG5ld01lYWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2dldENhcnRMaXN0XHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIGNhcnQgbGlzdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdFtdfSBDYXJ0IGxpc3QuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBnZXRDYXJ0TGlzdCgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYXJ0TGlzdDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNnZXRUb3RhbFByaWNlXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIGNhcnQgbGlzdCB0b3RhbCBwcmljZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gQ2FydCBsaXN0IHRvdGFsIHByaWNlLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0VG90YWxQcmljZSgpIHtcbiAgICAgICAgICAgIHZhciB0b3RhbFByaWNlID0gMDtcblxuICAgICAgICAgICAgaWYgKGNhcnRMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2FydExpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICB0b3RhbFByaWNlICs9IGNhcnRMaXN0W2ldLnByaWNlICogY2FydExpc3RbaV0uYW1vdW50O1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXJ0TGlzdFtpXS5tb2RpZmllcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsUHJpY2UgKz0gZ2V0TW9kaWZpZXJzUHJpY2UoY2FydExpc3RbaV0ubW9kaWZpZXJzKSAqIGNhcnRMaXN0W2ldLmFtb3VudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRvdGFsUHJpY2UudG9GaXhlZCgyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNkZWxldGVNb2RpZmllcnNcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXNldCBtb2RpZmllcnMgdmFsdWUuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBkZWxldGVNb2RpZmllcnMoKSB7XG4gICAgICAgICAgICBtb2RpZmllcnMgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I3JlbW92ZU1lYWxcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZW1vdmUgZWRpdCBtZWFsIG9mIGNhcnQgbGlzdC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZU1lYWwoKSB7XG4gICAgICAgICAgICBjYXJ0TGlzdC5zcGxpY2UoaW5kZXhFZGl0TWVhbCwgMSk7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIikuZmFjdG9yeShcIk1lYWxzRmFjdG9yeVwiLCBNZWFsc0ZhY3RvcnkpO1xuXG5cdC8qKlxyXG4gICogQG5nZG9jIHNlcnZpY2VcclxuICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICogQHJlcXVpcmVzICRodHRwXHJcbiAgKiBAcmVxdWlyZXMgJHFcclxuICAqXHJcbiAgKiBAZGVzY3JpcHRpb25cclxuICAqIEZhY3RvcnkgZ2V0IGN1cnJlbmN5LCBhcnJheSBvZiBwcm9kdWN0cyBhbmQgYXJyYXkgb2YgZHJpbmtzLFxyXG4gICogYW5kIHdvcmsgd2l0aCBjdXJyZW50IG1lYWwuXHJcbiAgKlxyXG4gICoqL1xuXHRmdW5jdGlvbiBNZWFsc0ZhY3RvcnkoJGh0dHAsICRxKSB7XG5cblx0XHR2YXIgbWVhbEFwaVVybCA9IFwibWVhbHMuanNvblwiLFxuXHRcdCAgICBtZWFscyA9IG51bGwsXG5cdFx0ICAgIGN1cnJlbmN5ID0gXCJcIixcblx0XHQgICAgY3VycmVudE1lYWwgPSBudWxsLFxuXHRcdCAgICBjdXJyZW50TWVhbFN0YXR1cyA9IFwibmV3XCIsXG5cdFx0ICAgIGN1cnJlbnRBbW91bnQgPSAxLFxuXHRcdCAgICBmYWN0b3J5ID0ge1xuXHRcdFx0Z2V0TW9kaWZpZXJzOiBnZXRNb2RpZmllcnMsXG5cdFx0XHRnZXRNZWFsczogZ2V0TWVhbHMsXG5cdFx0XHRnZXRDdXJyZW50TWVhbDogZ2V0Q3VycmVudE1lYWwsXG5cdFx0XHRzZXRDdXJyZW50TWVhbDogc2V0Q3VycmVudE1lYWwsXG5cdFx0XHRnZXRDdXJyZW50TWVhbFN0YXR1czogZ2V0Q3VycmVudE1lYWxTdGF0dXMsXG5cdFx0XHRzZXRDdXJyZW50TWVhbFN0YXR1czogc2V0Q3VycmVudE1lYWxTdGF0dXMsXG5cdFx0XHRnZXRDdXJyZW5jeTogZ2V0Q3VycmVuY3ksXG5cdFx0XHRnZXRDdXJyZW50TWVhbEFtb3VudDogZ2V0Q3VycmVudE1lYWxBbW91bnQsXG5cdFx0XHRzZXRDdXJyZW50TWVhbEFtb3VudDogc2V0Q3VycmVudE1lYWxBbW91bnQsXG5cdFx0XHRzZXRDdXJyZW50TWVhbEJ5SWQ6IHNldEN1cnJlbnRNZWFsQnlJZCxcblx0XHRcdG9wZW5NZWFsOiBvcGVuTWVhbFxuXHRcdH07XG5cblx0XHRyZXR1cm4gZmFjdG9yeTtcblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3Rvcnkjb3Blbk1lYWxcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXQgY3VycmVudCBtZWFsLCBjdXJyZW50IG1lYWwgc3RhdHVzIGFuZCBjdXJyZW50IG1lYWwgYW1vdW50LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IG1lYWwgICBDdXJyZW50IG1lYWwuXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXR1cyBNZWFsIHN0YXR1cyhcIm5ld1wiIG9yIFwiZWRpdFwiKS5cclxuICAgKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IE1lYWwgYW1vdW50LlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBvcGVuTWVhbChtZWFsLCBzdGF0dXMsIGFtb3VudCkge1xuXHRcdFx0c2V0Q3VycmVudE1lYWwobWVhbCk7XG5cdFx0XHRzZXRDdXJyZW50TWVhbFN0YXR1cyhzdGF0dXMpO1xuXHRcdFx0c2V0Q3VycmVudE1lYWxBbW91bnQoYW1vdW50KTtcblx0XHR9XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldE1lYWxzRnJvbUh0dHBcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogT2J0YWluaW5nIGRhdGEgb24gZm9vZHMgYW5kIGRyaW5rcyBmcm9tIHRoZSBzZXJ2ZXIuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge29iamVjdH0gZGVmZXJyZWQgRGVmZXJyZWQgb2JqZWN0LlxyXG4gICAqIEByZXR1cm4ge29iamVjdH0gRGVmZXJyZWQgb2JqZWN0IHdpdGggcmVzb2x2ZSBhbmQgcmVqZWN0LlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBnZXRNZWFsc0Zyb21IdHRwKGRlZmVycmVkKSB7XG5cblx0XHRcdCRodHRwKHsgbWV0aG9kOiBcIkdFVFwiLCB1cmw6IG1lYWxBcGlVcmwgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXHRcdFx0XHRtZWFscyA9IGRhdGE7XG5cdFx0XHRcdGN1cnJlbmN5ID0gZGF0YS5jdXJyZW5jeTtcblxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xuXHRcdFx0fSkuZXJyb3IoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cykge1xuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJFcnJvciBpbiAkaHR0cCByZXF1ZXN0XCIpO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKGRhdGEpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhzdGF0dXMpO1xuXHRcdFx0fSk7XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZDtcblx0XHR9XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldE1vZGlmaWVyc1xyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBJZiBtZWFscyBoYXZlIG1vZGlmaWVycyByZXR1cm4gdGhlbSBlbHNlIHJldHVybiBmYWxzZVxyXG4gICAqXHJcbiAgICogQHJldHVybiB7b2JqZWN0fGJvb2xlYW59IEN1cnJlbnQgbWVhbCBtb2RpZmllcnMgb3IgZmFsc2UuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIGdldE1vZGlmaWVycygpIHtcblxuXHRcdFx0aWYgKGN1cnJlbnRNZWFsICE9PSBudWxsKSB7XG5cdFx0XHRcdHJldHVybiBjdXJyZW50TWVhbC5tb2RpZmllcnM7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRNZWFsc1xyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXR1cm4gcHJvbWlzZSB3aXRoIHRoZSByZXNwb25zZSByZWNlaXZlZCBmcm9tIHRoZSBzZXJ2ZXIgb3JcclxuICAgKiBpZiB0aGUgcmVxdWVzdCBoYXMgYWxyZWFkeSBiZWVuLCByZXR1cm4gcHJvbWlzZSB3aXRoIHRoZVxyXG4gICAqIG1lYWxzIG9iamVjdC5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge29iamVjdH0gUHJvbWlzZS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gZ2V0TWVhbHMoKSB7XG5cdFx0XHR2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG5cdFx0XHRpZiAoIW1lYWxzKSB7XG5cdFx0XHRcdGRlZmVycmVkID0gZ2V0TWVhbHNGcm9tSHR0cChkZWZlcnJlZCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKG1lYWxzKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRDdXJyZW50TWVhbFxyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXR1cm4gY3VycmVudCBtZWFsLlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7b2JqZWN0fSBDdXJyZW50IG1lYWwuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIGdldEN1cnJlbnRNZWFsKCkge1xuXHRcdFx0cmV0dXJuIGN1cnJlbnRNZWFsO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3Rvcnkjc2V0Q3VycmVudE1lYWxcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0IGN1cnJlbnQgbWVhbC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBtZWFsIEN1cnJlbnQgbWVhbC5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gc2V0Q3VycmVudE1lYWwobWVhbCkge1xuXHRcdFx0Y3VycmVudE1lYWwgPSBtZWFsO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0Q3VycmVudE1lYWxTdGF0dXNcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmV0dXJuIGN1cnJlbnQgbWVhbCBzdGF0dXMoXCJuZXdcIiBvciBcImVkaXRcIikuXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbnQgbWVhbCBzdGF0dXMoXCJuZXdcIiBvciBcImVkaXRcIikuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIGdldEN1cnJlbnRNZWFsU3RhdHVzKCkge1xuXHRcdFx0cmV0dXJuIGN1cnJlbnRNZWFsU3RhdHVzO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3Rvcnkjc2V0Q3VycmVudE1lYWxTdGF0dXNcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0IGN1cnJlbnQgbWVhbCBzdGF0dXMoXCJuZXdcIiBvciBcImVkaXRcIikuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIEN1cnJlbnQgbWVhbCBzdGF0dXMoXCJuZXdcIiBvciBcImVkaXRcIikuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIHNldEN1cnJlbnRNZWFsU3RhdHVzKHN0YXR1cykge1xuXHRcdFx0Y3VycmVudE1lYWxTdGF0dXMgPSBzdGF0dXM7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRDdXJyZW5jeVxyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXR1cm4gY3VycmVuY3kuXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbmN5LlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBnZXRDdXJyZW5jeSgpIHtcblx0XHRcdHJldHVybiBjdXJyZW5jeTtcblx0XHR9XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldEN1cnJlbnRNZWFsQW1vdW50XHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFJldHVybiBjdXJyZW50IG1lYWwgYW1vdW50LlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7bnVtYmVyfSBDdXJyZW50IG1lYWwgYW1vdW50LlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBnZXRDdXJyZW50TWVhbEFtb3VudCgpIHtcblx0XHRcdHJldHVybiBjdXJyZW50QW1vdW50O1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3Rvcnkjc2V0Q3VycmVudE1lYWxBbW91bnRcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0IGN1cnJlbnQgbWVhbCBhbW91bnQuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IEN1cnJlbnQgbWVhbCBhbW91bnQuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIHNldEN1cnJlbnRNZWFsQW1vdW50KGFtb3VudCkge1xuXHRcdFx0Y3VycmVudEFtb3VudCA9IGFtb3VudDtcblx0XHR9XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I3NldEN1cnJlbnRNZWFsQnlJZFxyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBTZXQgY3VycmVudCBtZWFsIGJ5IGlkLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElkIG9mIGN1cnJlbnQgbWVhbC5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gc2V0Q3VycmVudE1lYWxCeUlkKGlkKSB7XG5cblx0XHRcdGN1cnJlbnRNZWFsID0gbWVhbHMucHJvZHVjdHMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG5cdFx0XHRcdHJldHVybiBpdGVtLmlkID09PSBpZDtcblx0XHRcdH0pWzBdO1xuXG5cdFx0XHRpZiAoIWN1cnJlbnRNZWFsKSB7XG5cdFx0XHRcdGN1cnJlbnRNZWFsID0gbWVhbHMuZHJpbmtzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuXHRcdFx0XHRcdHJldHVybiBpdGVtLmlkID09PSBpZDtcblx0XHRcdFx0fSlbMF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcIk1lYWxzXCIpLmZhY3RvcnkoXCJNb2RpZmllcnNGYWN0b3J5XCIsIE1vZGlmaWVyc0ZhY3RvcnkpO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICAgICogQG5hbWUgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICogQHJlcXVpcmVzIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBGYWN0b3J5IHdvcmsgd2l0aCBtb2RpZmllcnMuXHJcbiAgICAgKlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIE1vZGlmaWVyc0ZhY3RvcnkoQ2FydEZhY3RvcnkpIHtcblxuICAgICAgICB2YXIgZmFjdG9yeSA9IHtcbiAgICAgICAgICAgIGdldENoZWNrZWRNb2RpZmllcnM6IGdldENoZWNrZWRNb2RpZmllcnMsXG4gICAgICAgICAgICBtb2RpZmllckhhc0JlZW5TZWxlY3RlZDogbW9kaWZpZXJIYXNCZWVuU2VsZWN0ZWQsXG4gICAgICAgICAgICBkZWxldGVNb2RpZmllcjogZGVsZXRlTW9kaWZpZXIsXG4gICAgICAgICAgICBzZWxlY3RNb2RpZmllcjogc2VsZWN0TW9kaWZpZXIsXG4gICAgICAgICAgICBwaWNrQ2hlY2tlZE1vZGlmaWVyczogcGlja0NoZWNrZWRNb2RpZmllcnNcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZmFjdG9yeTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeSNnZXRDaGVja2VkTW9kaWZpZXJzXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gYXJyYXkgd2l0aCBtb2RpZmllcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3RbXX0gQXJyYXkgb2YgbW9kaWZpZXJzIG9iamVjdHMuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBnZXRDaGVja2VkTW9kaWZpZXJzKCkge1xuICAgICAgICAgICAgdmFyIGNhcnRMaXN0ID0gQ2FydEZhY3RvcnkuZ2V0Q2FydExpc3QoKVtDYXJ0RmFjdG9yeS5nZXRJbmRleEVkaXRNZWFsKCldO1xuICAgICAgICAgICAgcmV0dXJuIGNhcnRMaXN0Lm1vZGlmaWVycztcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I21vZGlmaWVySGFzQmVlblNlbGVjdGVkXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gdHJ1ZSBpZiBtb2RpZmllciBoYXMgYmVlbiBzZWxlY3RlZCwgb3IgZmFsc2UgaWYgbm8uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBzZWxlY3RlZE1vZGlmaWVycyBBcnJheSB3aXRoIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gbW9kaWZpZXIgTW9kaWZpZXIgb2JqZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbW9kaWZpZXIgaGFzIGJlZW4gc2VsZWN0ZWQsIGVsc2UgZmFsc2UuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBtb2RpZmllckhhc0JlZW5TZWxlY3RlZChzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZE1vZGlmaWVycy5zb21lKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGlmaWVyLm5hbWUgPT09IGl0ZW0ubmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnkjZGVsZXRlTW9kaWZpZXJcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIERlbGV0ZSBtb2RpZmllciBhdCBhcnJheSBzZWxlY3RlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBzZWxlY3RlZE1vZGlmaWVycyBBcnJheSB3aXRoIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gbW9kaWZpZXIgTW9kaWZpZXIgb2JqZWN0IHdobyBiZSBkZWxldGVkLlxyXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdFtdfSBOZXcgYXJyYXkgb2YgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlTW9kaWZpZXIoc2VsZWN0ZWRNb2RpZmllcnMsIG1vZGlmaWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRNb2RpZmllcnMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGlmaWVyLm5hbWUgIT09IGl0ZW0ubmFtZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLk1vZGlmaWVyc0ZhY3Rvcnkjc2VsZWN0TW9kaWZpZXJcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIEFkZCBtb2RpZmllciBpZiBpdCBub3QgaGFzIGJlZW4gc2VsZWN0ZWQsIGVsc2UgZGVsZXRlIG1vZGlmaWVyIGF0XHJcbiAgICAgICAgICogYXJyYXkgb2Ygc2VsZWN0ZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gc2VsZWN0ZWRNb2RpZmllcnMgQXJyYXkgd2l0aCBzZWxlY3RlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1vZGlmaWVyIE1vZGlmaWVyIG9iamVjdC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdE1vZGlmaWVyKHNlbGVjdGVkTW9kaWZpZXJzLCBtb2RpZmllcikge1xuXG4gICAgICAgICAgICBpZiAoIW1vZGlmaWVySGFzQmVlblNlbGVjdGVkKHNlbGVjdGVkTW9kaWZpZXJzLCBtb2RpZmllcikpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE1vZGlmaWVycy5wdXNoKG1vZGlmaWVyKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRNb2RpZmllcnMgPSBkZWxldGVNb2RpZmllcihzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBDYXJ0RmFjdG9yeS5hZGRNb2RpZmllcnNUb0xpc3Qoc2VsZWN0ZWRNb2RpZmllcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnkjcGlja0NoZWNrZWRNb2RpZmllcnNcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFBpY2sgYWxsIGNoZWNrZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gbW9kaWZpZXJzIEFsbCBtb2RpZmllcnMgb2YgY3VycmVudCBtZWFsLlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IHNlbGVjdGVkTW9kaWZpZXJzIEFycmF5IHdoZXJlIHdpbGwgYmUgcGxhY2VkIG1vZGlmaWVycy5cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBjaGVja2VkTW9kaWZpZXJzIEFycmF5IHdpdGggY2hlY2tlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBwaWNrQ2hlY2tlZE1vZGlmaWVycyhtb2RpZmllcnMsIHNlbGVjdGVkTW9kaWZpZXJzLCBjaGVja2VkTW9kaWZpZXJzKSB7XG5cbiAgICAgICAgICAgIGlmIChjaGVja2VkTW9kaWZpZXJzKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbkNoZWNrZWRNb2RpZmllcnMgPSBjaGVja2VkTW9kaWZpZXJzLmxlbmd0aDsgaSA8IGxlbkNoZWNrZWRNb2RpZmllcnM7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsZW5Nb2RpZmllcnMgPSBtb2RpZmllcnMubGVuZ3RoOyBqIDwgbGVuTW9kaWZpZXJzOyBqKyspIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGlmaWVyc1tqXS5uYW1lID09PSBjaGVja2VkTW9kaWZpZXJzW2ldLm5hbWUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVyc1tqXS5jaGVjayA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0TW9kaWZpZXIoc2VsZWN0ZWRNb2RpZmllcnMsIG1vZGlmaWVyc1tqXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcIk1lYWxzXCIpXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6YXBwUGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSBvZiBhcHAuXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxhcHAtcGFnZT48L2FwcC1wYWdlPlxyXG4gICAgICoqL1xuICAgIC5jb21wb25lbnQoXCJhcHBQYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9hcHAvdGVtcGxhdGUvYXBwUGFnZS5odG1sXCIsXG4gICAgICAgIGJpbmRpbmdzOiB7fSxcbiAgICAgICAgY29udHJvbGxlckFzOiBcImFwcFwiLFxuICAgICAgICBjb250cm9sbGVyOiBBcHBDb250cm9sbGVyXG4gICAgfSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkFwcENvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiYXBwUGFnZVwiLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIEFwcENvbnRyb2xsZXIoKSB7fVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOnNlbGVjdENvdW50XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIHNlbGVjdCBhbW91bnQgb2YgbWVhbC5cclxuICAgICAqIFRyYW5zZmVycyB0byB0aGUgcGFyZW50IGNvbnRyb2xsZXIgc2VsZWN0ZWQgYW1vdW50IG9mIG1lYWwgaW4gdmFyaWFibGUgXCJzZWxlY3RcIi5cclxuICAgICAqXHJcbiAgICAgKiBAdXNhZ2UgPHNlbGVjdC1jb3VudD48L3NlbGVjdC1jb3VudD5cclxuICAgICAqKi9cbiAgICAuY29tcG9uZW50KFwiY2FydFBhZ2VcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL2NhcnQvdGVtcGxhdGUvY2FydFBhZ2UuaHRtbFwiLFxuICAgICAgICBiaW5kaW5nczoge30sXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJjYXJ0XCIsXG4gICAgICAgIGNvbnRyb2xsZXI6IENhcnRDb250cm9sbGVyXG4gICAgfSk7XG5cbiAgICBmdW5jdGlvbiBDYXJ0Q29udHJvbGxlcihNZWFsc0ZhY3RvcnksIENhcnRGYWN0b3J5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcblxuICAgICAgICB2bS5jdXJyZW5jeSA9IE1lYWxzRmFjdG9yeS5nZXRDdXJyZW5jeSgpO1xuICAgICAgICB2bS5jYXJ0TGlzdCA9IENhcnRGYWN0b3J5LmdldENhcnRMaXN0KCk7XG4gICAgICAgIHZtLnRvdGFsUHJpY2UgPSBDYXJ0RmFjdG9yeS5nZXRUb3RhbFByaWNlKCk7XG4gICAgICAgIHZtLmVkaXRNZWFsID0gZWRpdE1lYWw7XG5cbiAgICAgICAgZnVuY3Rpb24gZWRpdE1lYWwobWVhbCwgaW5kZXgpIHtcbiAgICAgICAgICAgIENhcnRGYWN0b3J5LnNldEluZGV4RWRpdE1lYWwoaW5kZXgpO1xuICAgICAgICAgICAgTWVhbHNGYWN0b3J5LnNldEN1cnJlbnRNZWFsQnlJZChtZWFsLmlkKTtcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5zZXRDdXJyZW50TWVhbEFtb3VudChtZWFsLmFtb3VudCk7XG4gICAgICAgICAgICBNZWFsc0ZhY3Rvcnkuc2V0Q3VycmVudE1lYWxTdGF0dXMoXCJlZGl0XCIpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmNhcnRJY29uUGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSBvZiBjYXJ0IGJ1dHRvbiBhbmQgc3RyaW5nIHdpdGggbWVhbHMgY291bnQuXHJcbiAgICAgKiBBY2NlcHRzIGZyb20gcGFyZW50IGNvbnRyb2xsZXIgY291bnQgbWVhbHMgaW4gY2FydCBpbiB2YXJpYWJsZSBcImNvdW50XCIuXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxjYXJ0LWljb24tcGFnZT48L2NhcnQtaWNvbi1wYWdlPlxyXG4gICAgICoqL1xuICAgIC5jb21wb25lbnQoXCJjYXJ0SWNvblBhZ2VcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL2NhcnRJY29uL3RlbXBsYXRlL2NhcnRJY29uUGFnZS5odG1sXCIsXG4gICAgICAgIGJpbmRpbmdzOiB7XG4gICAgICAgICAgICBjb3VudDogXCJAXCJcbiAgICAgICAgfSxcbiAgICAgICAgY29udHJvbGxlckFzOiBcImNhcnRJY29uXCIsXG4gICAgICAgIGNvbnRyb2xsZXI6IENhcnRJY29uQ29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpDYXJ0SWNvbkNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiY2FydEljb25QYWdlXCIuXHJcbiAgICAgKiovXG4gICAgZnVuY3Rpb24gQ2FydEljb25Db250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpkcmlua3NMaXN0XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIGxpc3Qgb2YgZHJpbmtzLlxyXG4gICAgICpcclxuICAgICAqIEB1c2FnZSA8ZHJpbmtzLWxpc3Q+PC9kcmlua3MtbGlzdD5cclxuICAgICAqKi9cbiAgICAuY29tcG9uZW50KFwiZHJpbmtzTGlzdFwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvZHJpbmtzTGlzdC90ZW1wbGF0ZS9kcmlua3NMaXN0Lmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwiZHJpbmtzTGlzdFwiLFxuICAgICAgICBjb250cm9sbGVyOiBEcmlua3NMaXN0Q29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gRHJpbmtzTGlzdENvbnRyb2xsZXIoTWVhbHNGYWN0b3J5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdmFyIGRyaW5rcyA9IFtdO1xuXG4gICAgICAgIHZtLm9ubHlTb2Z0RHJpbmtzID0gZmFsc2U7XG4gICAgICAgIHZtLmN1cnJlbmN5ID0gXCJcIjtcbiAgICAgICAgdm0ub3BlbkRyaW5rID0gb3BlbkRyaW5rO1xuICAgICAgICB2bS5nZXREcmlua3NGb3JWaWV3ID0gZ2V0RHJpbmtzRm9yVmlldztcblxuICAgICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgTWVhbHNGYWN0b3J5LmdldE1lYWxzKCkudGhlbihnZXREcmlua3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RHJpbmtzKGRyaW5rc09iaikge1xuICAgICAgICAgICAgdm0uY3VycmVuY3kgPSBkcmlua3NPYmouY3VycmVuY3k7XG4gICAgICAgICAgICBkcmlua3MgPSBkcmlua3NPYmouZHJpbmtzO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb3BlbkRyaW5rKGRyaW5rKSB7XG4gICAgICAgICAgICBNZWFsc0ZhY3Rvcnkub3Blbk1lYWwoZHJpbmssIFwibmV3XCIsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0RHJpbmtzRm9yVmlldygpIHtcblxuICAgICAgICAgICAgaWYgKHZtLm9ubHlTb2Z0RHJpbmtzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyaW5rcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udGlwcGxlICE9PSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZHJpbmtzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmVycm9yUGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSBvZiBlcnJvciBwYWdlLlxyXG4gICAgICpcclxuICAgICAqIEB1c2FnZSA8ZXJyb3ItcGFnZT48L2Vycm9yLXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcImVycm9yUGFnZVwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvZXJyb3IvdGVtcGxhdGUvZXJyb3JQYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwiZXJyb3JcIixcbiAgICAgICAgY29udHJvbGxlcjogRXJyb3JDb250cm9sbGVyXG4gICAgfSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkVycm9yQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJlcnJvclBhZ2VcIi5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBFcnJvckNvbnRyb2xsZXIoKSB7fVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmZvb3RlclBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gZm9vdGVyIHNlY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxmb290ZXItcGFnZT48L2Zvb3Rlci1wYWdlPlxyXG4gICAgICoqL1xuICAgIC5jb21wb25lbnQoXCJmb290ZXJQYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9mb290ZXIvdGVtcGxhdGUvZm9vdGVyUGFnZS5odG1sXCIsXG4gICAgICAgIGJpbmRpbmdzOiB7fSxcbiAgICAgICAgY29udHJvbGxlckFzOiBcImZvb3RlclwiLFxuICAgICAgICBjb250cm9sbGVyOiBGb290ZXJDb250cm9sbGVyXG4gICAgfSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkZvb3RlckNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiZm9vdGVyUGFnZVwiLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIEZvb3RlckNvbnRyb2xsZXIoKSB7fVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmhlYWRlclBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gaGVhZGVyIHNlY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxoZWFkZXItcGFnZT48L2hlYWRlci1wYWdlPlxyXG4gICAgICoqL1xuICAgIC5jb21wb25lbnQoXCJoZWFkZXJQYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9oZWFkZXIvdGVtcGxhdGUvaGVhZGVyUGFnZS5odG1sXCIsXG4gICAgICAgIGJpbmRpbmdzOiB7fSxcbiAgICAgICAgY29udHJvbGxlckFzOiBcImhlYWRlclwiLFxuICAgICAgICBjb250cm9sbGVyOiBIZWFkZXJDb250cm9sbGVyXG4gICAgfSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkhlYWRlckNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiaGVhZGVyUGFnZVwiLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIEhlYWRlckNvbnRyb2xsZXIoKSB7fVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmxvZ29QYWdlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIGxvZ28gc2VjdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAdXNhZ2UgPGxvZ28tcGFnZT48L2xvZ28tcGFnZT5cclxuICAgICAqKi9cbiAgICAuY29tcG9uZW50KFwibG9nb1BhZ2VcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL2xvZ28vdGVtcGxhdGUvbG9nb1BhZ2UuaHRtbFwiLFxuICAgICAgICBiaW5kaW5nczoge30sXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJsb2dvXCIsXG4gICAgICAgIGNvbnRyb2xsZXI6IExvZ29Db250cm9sbGVyXG4gICAgfSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkxvZ29Db250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImxvZ29QYWdlXCIuXHJcbiAgICAgKiovXG4gICAgZnVuY3Rpb24gTG9nb0NvbnRyb2xsZXIoKSB7fVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOm1haW5QYWdlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIG1haW4gc2VjdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAdXNhZ2UgPG1haW4tcGFnZT48L21haW4tcGFnZT5cclxuICAgICAqKi9cbiAgICAuY29tcG9uZW50KFwibWFpblBhZ2VcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL21haW4vdGVtcGxhdGUvbWFpblBhZ2UuaHRtbFwiLFxuICAgICAgICBiaW5kaW5nczoge30sXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJtYWluXCIsXG4gICAgICAgIGNvbnRyb2xsZXI6IE1haW5Db250cm9sbGVyXG4gICAgfSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1haW5Db250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcIm1haW5QYWdlXCIuXHJcbiAgICAgKiovXG4gICAgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoKSB7fVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZShcIk1lYWxzXCIpXG5cdC8qKlxyXG4gICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOnNlbGVjdENvdW50XHJcbiAgKlxyXG4gICogQGRlc2NyaXB0aW9uXHJcbiAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIHNlbGVjdCBhbW91bnQgb2YgbWVhbC5cclxuICAqIFRyYW5zZmVycyB0byB0aGUgcGFyZW50IGNvbnRyb2xsZXIgc2VsZWN0ZWQgYW1vdW50IG9mIG1lYWwgaW4gdmFyaWFibGUgXCJzZWxlY3RcIi5cclxuICAqXHJcbiAgKiBAdXNhZ2UgPHNlbGVjdC1jb3VudD48L3NlbGVjdC1jb3VudD5cclxuICAqKi9cblx0LmNvbXBvbmVudChcIm1lYWxQYWdlXCIsIHtcblx0XHR0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL21lYWwvdGVtcGxhdGUvbWVhbFBhZ2UuaHRtbFwiLFxuXHRcdGJpbmRpbmdzOiB7XG5cdFx0XHRwYXRoOiBcIkBcIlxuXHRcdH0sXG5cdFx0Y29udHJvbGxlckFzOiBcIm1lYWxcIixcblx0XHRjb250cm9sbGVyOiBNZWFsQ29udHJvbGxlclxuXHR9KTtcblxuXHRmdW5jdGlvbiBNZWFsQ29udHJvbGxlcihNZWFsc0ZhY3RvcnksIENhcnRGYWN0b3J5KSB7XG5cblx0XHR2YXIgdm0gPSB0aGlzO1xuXG5cdFx0dm0uY3VycmVudE1lYWwgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVudE1lYWwoKTtcblx0XHR2bS5jdXJyZW5jeSA9IE1lYWxzRmFjdG9yeS5nZXRDdXJyZW5jeSgpO1xuXHRcdHZtLnNlbGVjdEFtb3VudCA9IE1lYWxzRmFjdG9yeS5nZXRDdXJyZW50TWVhbEFtb3VudCgpO1xuXHRcdHZtLm1lYWxTdGF0dXMgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVudE1lYWxTdGF0dXMoKTtcblx0XHR2bS5jYXJ0Q291bnQgPSBDYXJ0RmFjdG9yeS5nZXRDYXJ0TGlzdENvdW50KCk7XG5cdFx0dm0uYWRkTWVhbCA9IGFkZE1lYWw7XG5cdFx0dm0ucmVtb3ZlTWVhbCA9IHJlbW92ZU1lYWw7XG5cdFx0dm0uc2F2ZU1lYWwgPSBzYXZlTWVhbDtcblxuXHRcdGZ1bmN0aW9uIGFkZE1lYWwoKSB7XG5cdFx0XHRDYXJ0RmFjdG9yeS5hZGRNZWFsVG9DYXJ0TGlzdCh2bS5jdXJyZW50TWVhbCwgdm0uc2VsZWN0QW1vdW50KTtcblx0XHR9XG5cblx0XHRmdW5jdGlvbiByZW1vdmVNZWFsKCkge1xuXHRcdFx0Q2FydEZhY3RvcnkucmVtb3ZlTWVhbCgpO1xuXHRcdFx0Q2FydEZhY3RvcnkuZGVsZXRlTW9kaWZpZXJzKCk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gc2F2ZU1lYWwoKSB7XG5cdFx0XHRDYXJ0RmFjdG9yeS5yZW1vdmVNZWFsKCk7XG5cdFx0XHR2bS5hZGRNZWFsKCk7XG5cdFx0fVxuXHR9XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcblx0LyoqXHJcbiAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6bWVhbHNMaXN0XHJcbiAgKlxyXG4gICogQGRlc2NyaXB0aW9uXHJcbiAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIGxpc3Qgb2YgbWVhbHMuXHJcbiAgKlxyXG4gICogQHVzYWdlIDxtZWFscy1saXN0PjwvbWVhbHMtbGlzdD5cclxuICAqKi9cblx0LmNvbXBvbmVudChcIm1lYWxzTGlzdFwiLCB7XG5cdFx0dGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tZWFsc0xpc3QvdGVtcGxhdGUvbWVhbHNMaXN0Lmh0bWxcIixcblx0XHRiaW5kaW5nczoge30sXG5cdFx0Y29udHJvbGxlckFzOiBcIm1lYWxzTGlzdFwiLFxuXHRcdGNvbnRyb2xsZXI6IE1lYWxzTGlzdENvbnRyb2xsZXJcblx0fSk7XG5cblx0LyoqXHJcbiAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyXHJcbiAgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgKiBAcHJvcGVydHkge3N0cmluZ30gY3VycmVuY3kgQ3VycmVuY3kuXHJcbiAgKiBAcHJvcGVydHkge29iamVjdFtdfSBwcm9kdWN0cyBBcnJheSBvZiBwcm9kdWN0cy5cclxuICAqXHJcbiAgKiBAZGVzY3JpcHRpb25cclxuICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwibWVhbHNMaXN0XCIuXHJcbiAgKiBIYW5kbGUgYSB1c2VyIGNob2ljZSBhYm91dCBtZWFsLlxyXG4gICoqL1xuXHRmdW5jdGlvbiBNZWFsc0xpc3RDb250cm9sbGVyKE1lYWxzRmFjdG9yeSkge1xuXG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdHZtLm9wZW5NZWFsID0gb3Blbk1lYWw7XG5cdFx0dm0uY3VycmVuY3kgPSBcIlwiO1xuXHRcdHZtLnByb2R1Y3RzID0gbnVsbDtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyI2FjdGl2YXRlXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlclxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIE1ldGhvZCB0byBpbml0aWFsaXplIGRhdGEuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdFx0TWVhbHNGYWN0b3J5LmdldE1lYWxzKCkudGhlbihnZXRQcm9kdWN0cyk7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlciNnZXRQcm9kdWN0c1xyXG4gICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXJcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBBc3NpZ25pbmcgYSBkYXRhIGF0IHByb3BlcnRpZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge29iamVjdH0gbWVhbHNPYmogTWVhbHMgb2JqZWN0IGNvbnRhaW5zIGN1cnJlbmN5IGFuZCBwcm9kdWN0cyBhcnJheS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gZ2V0UHJvZHVjdHMobWVhbHNPYmopIHtcblx0XHRcdHZtLmN1cnJlbmN5ID0gbWVhbHNPYmouY3VycmVuY3k7XG5cdFx0XHR2bS5wcm9kdWN0cyA9IG1lYWxzT2JqLnByb2R1Y3RzO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXIjb3Blbk1lYWxcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ2FsbCBtZXRob2Qgb3Blbk1lYWwgb3duZWQgTWVhbHNGYWN0b3J5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IG1lYWwgTWVhbCBvYmplY3QuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIG9wZW5NZWFsKG1lYWwpIHtcblx0XHRcdE1lYWxzRmFjdG9yeS5vcGVuTWVhbChtZWFsLCBcIm5ld1wiLCAxKTtcblx0XHR9XG5cdH1cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptZW51UGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBtZW51IHNlY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxtZW51LXBhZ2U+PC9tZW51LXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcIm1lbnVQYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tZW51L3RlbXBsYXRlL21lbnVQYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwibWVudVwiLFxuICAgICAgICBjb250cm9sbGVyOiBNZW51Q29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZW51Q29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtZW51UGFnZVwiLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIE1lbnVDb250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpzZWxlY3RDb3VudFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBzZWxlY3QgYW1vdW50IG9mIG1lYWwuXHJcbiAgICAgKiBUcmFuc2ZlcnMgdG8gdGhlIHBhcmVudCBjb250cm9sbGVyIHNlbGVjdGVkIGFtb3VudCBvZiBtZWFsIGluIHZhcmlhYmxlIFwic2VsZWN0XCIuXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxzZWxlY3QtY291bnQ+PC9zZWxlY3QtY291bnQ+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcIm1vZGlmaWVyc1BhZ2VcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL21vZGlmaWVycy90ZW1wbGF0ZS9tb2RpZmllcnNQYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHtcbiAgICAgICAgICAgIGN1cnJlbmN5OiBcIkBcIlxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwibW9kXCIsXG4gICAgICAgIGNvbnRyb2xsZXI6IE1vZGlmaWVyc0NvbnRyb2xsZXJcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIE1vZGlmaWVyc0NvbnRyb2xsZXIoTWVhbHNGYWN0b3J5LCBNb2RpZmllcnNGYWN0b3J5KSB7XG5cbiAgICAgICAgdmFyIHZtID0gdGhpcztcbiAgICAgICAgdmFyIHNlbGVjdGVkTW9kaWZpZXJzID0gW107XG5cbiAgICAgICAgdm0ubW9kaWZpZXJzID0gTWVhbHNGYWN0b3J5LmdldE1vZGlmaWVycygpO1xuICAgICAgICB2bS5zZWxlY3RNb2RpZmllciA9IHNlbGVjdE1vZGlmaWVyO1xuXG4gICAgICAgIGNsZWFuUGlja01vZGlmaWVycygpO1xuXG4gICAgICAgIGlmIChNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVudE1lYWxTdGF0dXMoKSA9PT0gXCJlZGl0XCIpIHtcbiAgICAgICAgICAgIHZhciBjaGVja2VkTW9kaWZpZXJzID0gTW9kaWZpZXJzRmFjdG9yeS5nZXRDaGVja2VkTW9kaWZpZXJzKCk7XG4gICAgICAgICAgICBNb2RpZmllcnNGYWN0b3J5LnBpY2tDaGVja2VkTW9kaWZpZXJzKHZtLm1vZGlmaWVycywgc2VsZWN0ZWRNb2RpZmllcnMsIGNoZWNrZWRNb2RpZmllcnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gY2xlYW5QaWNrTW9kaWZpZXJzKCkge1xuICAgICAgICAgICAgaWYgKHZtLm1vZGlmaWVycykge1xuICAgICAgICAgICAgICAgIHZtLm1vZGlmaWVycy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLmNoZWNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZWxlY3RNb2RpZmllcihtb2RpZmllcikge1xuICAgICAgICAgICAgTW9kaWZpZXJzRmFjdG9yeS5zZWxlY3RNb2RpZmllcihzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOnNlbGVjdENvdW50XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIHNlbGVjdCBhbW91bnQgb2YgbWVhbC5cclxuICAgICAqIFRyYW5zZmVycyB0byB0aGUgcGFyZW50IGNvbnRyb2xsZXIgc2VsZWN0ZWQgYW1vdW50IG9mIG1lYWwgaW4gdmFyaWFibGUgXCJzZWxlY3RcIi5cclxuICAgICAqXHJcbiAgICAgKiBAdXNhZ2UgPHNlbGVjdC1jb3VudD48L3NlbGVjdC1jb3VudD5cclxuICAgICAqKi9cbiAgICAuY29tcG9uZW50KFwic2VsZWN0Q291bnRcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL3NlbGVjdENvdW50L3RlbXBsYXRlL3NlbGVjdENvdW50UGFnZS5odG1sXCIsXG4gICAgICAgIGJpbmRpbmdzOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IFwiPVwiXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJzZWxlY3RcIixcbiAgICAgICAgY29udHJvbGxlcjogU2VsZWN0Q291bnRDb250cm9sbGVyXG4gICAgfSk7XG5cbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOlNlbGVjdENvdW50Q29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJzZWxlY3RDb3VudFwiLlxyXG4gICAgICogQ2FwdHVyZXMgdGhlIHVzZXIncyBjaG9pY2UgYXQgYW1vdW50LlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIFNlbGVjdENvdW50Q29udHJvbGxlcigpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLnNlbGVjdE51bSA9IHNlbGVjdE51bTtcbiAgICAgICAgdm0uYWN0aXZlTnVtID0gYWN0aXZlTnVtO1xuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOlNlbGVjdENvdW50Q29udHJvbGxlciNzZWxlY3ROdW1cclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBTZWxlY3QgbWVhbCBhbW91bnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtIE1lYWwgYW1vdW50LlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0TnVtKG51bSkge1xuICAgICAgICAgICAgdm0uc2VsZWN0ID0gbnVtO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6U2VsZWN0Q291bnRDb250cm9sbGVyI2FjdGl2ZU51bVxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOlNlbGVjdENvdW50Q29udHJvbGxlclxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiB0cnVlIGlmIHZhcmlhYmxlIHNlbGVjdCBpcyBudW0sIGVsc2UgZmFsc2UuXHJcbiAgICAgICAgICogSWYgZnVuY3Rpb24gcmV0dXJuIHRydWUsIHRoZSBidXR0b24gd2l0aCBudW0gZ2V0IGNsYXNzIFwiYWN0aXZlXCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtIE1lYWwgYW1vdW50LlxyXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgc2VsZWN0IGlzIG51bS5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2ZU51bShudW0pIHtcbiAgICAgICAgICAgIHJldHVybiB2bS5zZWxlY3QgPT09IG51bTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiLCBbXCJ1aS5yb3V0ZXJcIl0pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAuY29uZmlnKGNvbmZpZyk7XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcblxyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZShcImFwcFwiLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiL2FwcFwiLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGFwcC1wYWdlPjwvYXBwLXBhZ2U+XCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKFwiYXBwLm1haW5cIiwge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcIi9tYWluXCIsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8bWFpbi1wYWdlPjwvbWFpbi1wYWdlPlwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZShcImFwcC5tYWluLm1lYWxzXCIsIHtcclxuICAgICAgICAgICAgICAgIHVybDogXCIvbWVhbHNcIixcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxtZWFscy1saXN0IGlkPSdtZWFsc0xpc3QnPjwvbWVhbHMtbGlzdD5cIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoXCJhcHAubWFpbi5kcmlua3NcIiwge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcIi9kcmlua3NcIixcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkcmlua3MtbGlzdD48L2RyaW5rcy1saXN0PlwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZShcImFwcC5tZWFsXCIsIHtcclxuICAgICAgICAgICAgICAgIHVybDogXCIvbWVhbC86cGF0aFwiLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiBcIm1lYWxcIixcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IE1lYWxDb250cm9sbGVyLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiPG1lYWwtcGFnZSBpZD0nbWVhbCcgcGF0aD0ne3sgbWVhbC5wYXRoIH19Jz48L21lYWwtcGFnZT5cIixcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKFwiYXBwLmNhcnRcIiwge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcIi9jYXJ0XCIsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8Y2FydC1wYWdlIGlkPSdjYXJ0Jz48L2NhcnQtcGFnZT5cIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoXCJlcnJvclwiLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiL2Vycm9yXCIsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8ZXJyb3ItcGFnZT48L2Vycm9yLXBhZ2U+XCJcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvYXBwL21haW4vbWVhbHNcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gTWVhbENvbnRyb2xsZXIoJHN0YXRlUGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gJHN0YXRlUGFyYW1zLnBhdGg7XHJcbiAgICB9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC5mYWN0b3J5KFwiQ2FydEZhY3RvcnlcIiwgQ2FydEZhY3RvcnkpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBGYWN0b3J5IHdvcmsgd2l0aCBjYXJ0LlxyXG4gICAgICpcclxuICAgICAqKi9cclxuICAgIGZ1bmN0aW9uIENhcnRGYWN0b3J5KCkge1xyXG5cclxuICAgICAgICBsZXQgY2FydExpc3QgICAgICAgICAgPSBbXSxcclxuICAgICAgICAgICAgbW9kaWZpZXJzICAgICAgICAgPSBudWxsLFxyXG4gICAgICAgICAgICBpbmRleEVkaXRNZWFsICAgICA9IDAsXHJcblxyXG4gICAgICAgICAgICBmYWN0b3J5ID0ge1xyXG4gICAgICAgICAgICAgICAgZ2V0SW5kZXhFZGl0TWVhbCAgIDogZ2V0SW5kZXhFZGl0TWVhbCxcclxuICAgICAgICAgICAgICAgIHNldEluZGV4RWRpdE1lYWwgICA6IHNldEluZGV4RWRpdE1lYWwsXHJcbiAgICAgICAgICAgICAgICBnZXRDYXJ0TGlzdENvdW50ICAgOiBnZXRDYXJ0TGlzdENvdW50LFxyXG4gICAgICAgICAgICAgICAgYWRkTW9kaWZpZXJzVG9MaXN0IDogYWRkTW9kaWZpZXJzVG9MaXN0LFxyXG4gICAgICAgICAgICAgICAgYWRkTWVhbFRvQ2FydExpc3QgIDogYWRkTWVhbFRvQ2FydExpc3QsXHJcbiAgICAgICAgICAgICAgICBnZXRDYXJ0TGlzdCAgICAgICAgOiBnZXRDYXJ0TGlzdCxcclxuICAgICAgICAgICAgICAgIGdldFRvdGFsUHJpY2UgICAgICA6IGdldFRvdGFsUHJpY2UsXHJcbiAgICAgICAgICAgICAgICBkZWxldGVNb2RpZmllcnMgICAgOiBkZWxldGVNb2RpZmllcnMsXHJcbiAgICAgICAgICAgICAgICByZW1vdmVNZWFsICAgICAgICAgOiByZW1vdmVNZWFsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBmYWN0b3J5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjZ2V0TW9kaWZpZXJzUHJpY2VcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gdG90YWwgcHJpY2Ugb2YgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gbW9kaWZpZXJzQXJyIEFycmF5IG9mIG1vZGlmaWVycyBvYmplY3RzLlxyXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gVG90YWwgcHJpY2UuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldE1vZGlmaWVyc1ByaWNlKG1vZGlmaWVyc0Fycikge1xyXG4gICAgICAgICAgICBsZXQgdG90YWxQcmljZSA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBtb2RpZmllciBvZiBtb2RpZmllcnNBcnIpIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsUHJpY2UgKz0gbW9kaWZpZXIucHJpY2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbFByaWNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2dldEluZGV4RWRpdE1lYWxcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gaW5kZXggZm8gZWRpdCBtZWFsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBJbmRleCBvZiBlZGl0IG1lYWwuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldEluZGV4RWRpdE1lYWwoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbmRleEVkaXRNZWFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I3NldEluZGV4RWRpdE1lYWxcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBTZXQgaW5kZXggb2YgZWRpdCBtZWFsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4IG9mIGVkaXQgbWVhbC5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0SW5kZXhFZGl0TWVhbChpbmRleCkge1xyXG4gICAgICAgICAgICBpbmRleEVkaXRNZWFsID0gaW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjZ2V0Q2FydExpc3RDb3VudFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBjb3VudCBvZiBlbGVtZW50cyBpbiBjYXJ0IGxpc3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IENhcnQgbGlzdCBsZW5ndGguXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldENhcnRMaXN0Q291bnQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYXJ0TGlzdC5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjYWRkTW9kaWZpZXJzVG9MaXN0XHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQWRkIG1vZGlmaWVycyB0byBsaXN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gbW9kaWYgQXJyYXkgd2l0aCBtb2RpZmllcnMgb2JqZWN0cy5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkTW9kaWZpZXJzVG9MaXN0KG1vZGlmKSB7XHJcbiAgICAgICAgICAgIG1vZGlmaWVycyA9IG1vZGlmO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2FkZE1lYWxUb0NhcnRMaXN0XHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQWRkIG1lYWwgdG8gY2FydCBsaXN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1lYWwgTWVhbCBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCBBbW91bnQgb2YgbWVhbC5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkTWVhbFRvQ2FydExpc3QobWVhbCwgYW1vdW50KSB7XHJcbiAgICAgICAgICAgIGxldCBuZXdNZWFsID0ge307XHJcblxyXG4gICAgICAgICAgICBuZXdNZWFsLmlkICAgICAgICA9IG1lYWwuaWQ7XHJcbiAgICAgICAgICAgIG5ld01lYWwubmFtZSAgICAgID0gbWVhbC5uYW1lO1xyXG4gICAgICAgICAgICBuZXdNZWFsLnByaWNlICAgICA9IG1lYWwucHJpY2U7XHJcbiAgICAgICAgICAgIG5ld01lYWwuYW1vdW50ICAgID0gYW1vdW50O1xyXG5cclxuICAgICAgICAgICAgaWYgKG1vZGlmaWVycykge1xyXG4gICAgICAgICAgICAgICAgbmV3TWVhbC5tb2RpZmllcnMgPSBtb2RpZmllcnMuc2xpY2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbW9kaWZpZXJzID0gbnVsbDtcclxuICAgICAgICAgICAgY2FydExpc3QucHVzaChuZXdNZWFsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNnZXRDYXJ0TGlzdFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBjYXJ0IGxpc3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3RbXX0gQ2FydCBsaXN0LlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRDYXJ0TGlzdCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhcnRMaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2dldFRvdGFsUHJpY2VcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gY2FydCBsaXN0IHRvdGFsIHByaWNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBDYXJ0IGxpc3QgdG90YWwgcHJpY2UuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldFRvdGFsUHJpY2UoKSB7XHJcbiAgICAgICAgICAgIGxldCB0b3RhbFByaWNlID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYXJ0TGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gY2FydExpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxQcmljZSArPSBjYXJ0TGlzdFtpXS5wcmljZSAqIGNhcnRMaXN0W2ldLmFtb3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcnRMaXN0W2ldLm1vZGlmaWVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFByaWNlICs9IGdldE1vZGlmaWVyc1ByaWNlKGNhcnRMaXN0W2ldLm1vZGlmaWVycykgKiBjYXJ0TGlzdFtpXS5hbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWxQcmljZS50b0ZpeGVkKDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2RlbGV0ZU1vZGlmaWVyc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJlc2V0IG1vZGlmaWVycyB2YWx1ZS5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlTW9kaWZpZXJzKCkge1xyXG4gICAgICAgICAgICBtb2RpZmllcnMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I3JlbW92ZU1lYWxcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZW1vdmUgZWRpdCBtZWFsIG9mIGNhcnQgbGlzdC5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTWVhbCgpIHtcclxuICAgICAgICAgICAgY2FydExpc3Quc3BsaWNlKGluZGV4RWRpdE1lYWwsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJNZWFsc1wiKVxyXG5cdFx0LmZhY3RvcnkoXCJNZWFsc0ZhY3RvcnlcIiwgTWVhbHNGYWN0b3J5KTtcclxuXHJcblx0LyoqXHJcblx0ICogQG5nZG9jIHNlcnZpY2VcclxuXHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHQgKiBAcmVxdWlyZXMgJGh0dHBcclxuXHQgKiBAcmVxdWlyZXMgJHFcclxuXHQgKlxyXG5cdCAqIEBkZXNjcmlwdGlvblxyXG5cdCAqIEZhY3RvcnkgZ2V0IGN1cnJlbmN5LCBhcnJheSBvZiBwcm9kdWN0cyBhbmQgYXJyYXkgb2YgZHJpbmtzLFxyXG5cdCAqIGFuZCB3b3JrIHdpdGggY3VycmVudCBtZWFsLlxyXG5cdCAqXHJcblx0ICoqL1xyXG5cdGZ1bmN0aW9uIE1lYWxzRmFjdG9yeSgkaHR0cCwgJHEpIHtcclxuXHJcblx0XHRsZXQgbWVhbEFwaVVybCAgICAgICAgPSBcIm1lYWxzLmpzb25cIixcclxuXHRcdFx0bWVhbHMgICAgICAgICAgICAgPSBudWxsLFxyXG5cdFx0XHRjdXJyZW5jeSAgICAgICAgICA9IFwiXCIsXHJcblx0XHRcdGN1cnJlbnRNZWFsICAgICAgID0gbnVsbCxcclxuXHRcdFx0Y3VycmVudE1lYWxTdGF0dXMgPSBcIm5ld1wiLFxyXG5cdFx0XHRjdXJyZW50QW1vdW50ICAgICA9IDEsXHJcblxyXG5cdFx0XHRmYWN0b3J5ID0ge1xyXG5cdFx0XHRcdGdldE1vZGlmaWVycyAgICAgICAgIDogZ2V0TW9kaWZpZXJzLFxyXG5cdFx0XHRcdGdldE1lYWxzICAgICAgICAgICAgIDogZ2V0TWVhbHMsXHJcblx0XHRcdFx0Z2V0Q3VycmVudE1lYWwgICAgICAgOiBnZXRDdXJyZW50TWVhbCxcclxuXHRcdFx0XHRzZXRDdXJyZW50TWVhbCAgICAgICA6IHNldEN1cnJlbnRNZWFsLFxyXG5cdFx0XHRcdGdldEN1cnJlbnRNZWFsU3RhdHVzIDogZ2V0Q3VycmVudE1lYWxTdGF0dXMsXHJcblx0XHRcdFx0c2V0Q3VycmVudE1lYWxTdGF0dXMgOiBzZXRDdXJyZW50TWVhbFN0YXR1cyxcclxuXHRcdFx0XHRnZXRDdXJyZW5jeSAgICAgICAgICA6IGdldEN1cnJlbmN5LFxyXG5cdFx0XHRcdGdldEN1cnJlbnRNZWFsQW1vdW50IDogZ2V0Q3VycmVudE1lYWxBbW91bnQsXHJcblx0XHRcdFx0c2V0Q3VycmVudE1lYWxBbW91bnQgOiBzZXRDdXJyZW50TWVhbEFtb3VudCxcclxuXHRcdFx0XHRzZXRDdXJyZW50TWVhbEJ5SWQgICA6IHNldEN1cnJlbnRNZWFsQnlJZCxcclxuXHRcdFx0XHRvcGVuTWVhbCAgICAgICAgICAgICA6IG9wZW5NZWFsXHJcblx0XHRcdH07XHJcblxyXG5cdFx0cmV0dXJuIGZhY3Rvcnk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3Rvcnkjb3Blbk1lYWxcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqXHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFNldCBjdXJyZW50IG1lYWwsIGN1cnJlbnQgbWVhbCBzdGF0dXMgYW5kIGN1cnJlbnQgbWVhbCBhbW91bnQuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IG1lYWwgICBDdXJyZW50IG1lYWwuXHJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIE1lYWwgc3RhdHVzKFwibmV3XCIgb3IgXCJlZGl0XCIpLlxyXG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCBNZWFsIGFtb3VudC5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIG9wZW5NZWFsKG1lYWwsIHN0YXR1cywgYW1vdW50KSB7XHJcblx0XHRcdHNldEN1cnJlbnRNZWFsKG1lYWwpO1xyXG5cdFx0XHRzZXRDdXJyZW50TWVhbFN0YXR1cyhzdGF0dXMpO1xyXG5cdFx0XHRzZXRDdXJyZW50TWVhbEFtb3VudChhbW91bnQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldE1lYWxzRnJvbUh0dHBcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogT2J0YWluaW5nIGRhdGEgb24gZm9vZHMgYW5kIGRyaW5rcyBmcm9tIHRoZSBzZXJ2ZXIuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IGRlZmVycmVkIERlZmVycmVkIG9iamVjdC5cclxuXHRcdCAqIEByZXR1cm4ge29iamVjdH0gRGVmZXJyZWQgb2JqZWN0IHdpdGggcmVzb2x2ZSBhbmQgcmVqZWN0LlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0TWVhbHNGcm9tSHR0cChkZWZlcnJlZCkge1xyXG5cclxuXHRcdFx0JGh0dHAoe21ldGhvZCA6IFwiR0VUXCIsIHVybCA6IG1lYWxBcGlVcmx9KVxyXG5cdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdFx0XHRtZWFscyAgICA9IGRhdGE7XHJcblx0XHRcdFx0XHRjdXJyZW5jeSA9IGRhdGEuY3VycmVuY3k7XHJcblxyXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5lcnJvcihmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XHJcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJFcnJvciBpbiAkaHR0cCByZXF1ZXN0XCIpO1xyXG5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coc3RhdHVzKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiBkZWZlcnJlZDtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRNb2RpZmllcnNcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogSWYgbWVhbHMgaGF2ZSBtb2RpZmllcnMgcmV0dXJuIHRoZW0gZWxzZSByZXR1cm4gZmFsc2VcclxuXHRcdCAqXHJcblx0XHQgKiBAcmV0dXJuIHtvYmplY3R8Ym9vbGVhbn0gQ3VycmVudCBtZWFsIG1vZGlmaWVycyBvciBmYWxzZS5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIGdldE1vZGlmaWVycygpIHtcclxuXHJcblx0XHRcdGlmIChjdXJyZW50TWVhbCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHJldHVybiBjdXJyZW50TWVhbC5tb2RpZmllcnM7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0TWVhbHNcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogUmV0dXJuIHByb21pc2Ugd2l0aCB0aGUgcmVzcG9uc2UgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIG9yXHJcblx0XHQgKiBpZiB0aGUgcmVxdWVzdCBoYXMgYWxyZWFkeSBiZWVuLCByZXR1cm4gcHJvbWlzZSB3aXRoIHRoZVxyXG5cdFx0ICogbWVhbHMgb2JqZWN0LlxyXG5cdFx0ICpcclxuXHRcdCAqIEByZXR1cm4ge29iamVjdH0gUHJvbWlzZS5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIGdldE1lYWxzKCkge1xyXG5cdFx0XHRsZXQgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuXHRcdFx0aWYgKCFtZWFscykge1xyXG5cdFx0XHRcdGRlZmVycmVkID0gZ2V0TWVhbHNGcm9tSHR0cChkZWZlcnJlZCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShtZWFscyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldEN1cnJlbnRNZWFsXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFJldHVybiBjdXJyZW50IG1lYWwuXHJcblx0XHQgKlxyXG5cdFx0ICogQHJldHVybiB7b2JqZWN0fSBDdXJyZW50IG1lYWwuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBnZXRDdXJyZW50TWVhbCgpIHtcclxuXHRcdFx0cmV0dXJuIGN1cnJlbnRNZWFsO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I3NldEN1cnJlbnRNZWFsXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFNldCBjdXJyZW50IG1lYWwuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IG1lYWwgQ3VycmVudCBtZWFsLlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0Q3VycmVudE1lYWwobWVhbCkge1xyXG5cdFx0XHRjdXJyZW50TWVhbCA9IG1lYWw7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0Q3VycmVudE1lYWxTdGF0dXNcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogUmV0dXJuIGN1cnJlbnQgbWVhbCBzdGF0dXMoXCJuZXdcIiBvciBcImVkaXRcIikuXHJcblx0XHQgKlxyXG5cdFx0ICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW50IG1lYWwgc3RhdHVzKFwibmV3XCIgb3IgXCJlZGl0XCIpLlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0Q3VycmVudE1lYWxTdGF0dXMoKSB7XHJcblx0XHRcdHJldHVybiBjdXJyZW50TWVhbFN0YXR1cztcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNzZXRDdXJyZW50TWVhbFN0YXR1c1xyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBTZXQgY3VycmVudCBtZWFsIHN0YXR1cyhcIm5ld1wiIG9yIFwiZWRpdFwiKS5cclxuXHRcdCAqXHJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIEN1cnJlbnQgbWVhbCBzdGF0dXMoXCJuZXdcIiBvciBcImVkaXRcIikuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBzZXRDdXJyZW50TWVhbFN0YXR1cyhzdGF0dXMpIHtcclxuXHRcdFx0Y3VycmVudE1lYWxTdGF0dXMgPSBzdGF0dXM7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0Q3VycmVuY3lcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogUmV0dXJuIGN1cnJlbmN5LlxyXG5cdFx0ICpcclxuXHRcdCAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVuY3kuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBnZXRDdXJyZW5jeSgpIHtcclxuXHRcdFx0cmV0dXJuIGN1cnJlbmN5O1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldEN1cnJlbnRNZWFsQW1vdW50XHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFJldHVybiBjdXJyZW50IG1lYWwgYW1vdW50LlxyXG5cdFx0ICpcclxuXHRcdCAqIEByZXR1cm4ge251bWJlcn0gQ3VycmVudCBtZWFsIGFtb3VudC5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIGdldEN1cnJlbnRNZWFsQW1vdW50KCkge1xyXG5cdFx0XHRyZXR1cm4gY3VycmVudEFtb3VudDtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNzZXRDdXJyZW50TWVhbEFtb3VudFxyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBTZXQgY3VycmVudCBtZWFsIGFtb3VudC5cclxuXHRcdCAqXHJcblx0XHQgKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IEN1cnJlbnQgbWVhbCBhbW91bnQuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBzZXRDdXJyZW50TWVhbEFtb3VudChhbW91bnQpIHtcclxuXHRcdFx0Y3VycmVudEFtb3VudCA9IGFtb3VudDtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNzZXRDdXJyZW50TWVhbEJ5SWRcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogU2V0IGN1cnJlbnQgbWVhbCBieSBpZC5cclxuXHRcdCAqXHJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gaWQgSWQgb2YgY3VycmVudCBtZWFsLlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0Q3VycmVudE1lYWxCeUlkKGlkKSB7XHJcblxyXG5cdFx0XHRjdXJyZW50TWVhbCA9IG1lYWxzLnByb2R1Y3RzLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpWzBdO1xyXG5cclxuXHRcdFx0aWYgKCFjdXJyZW50TWVhbCkge1xyXG5cdFx0XHRcdGN1cnJlbnRNZWFsID0gbWVhbHMuZHJpbmtzLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpWzBdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAuZmFjdG9yeShcIk1vZGlmaWVyc0ZhY3RvcnlcIiwgTW9kaWZpZXJzRmFjdG9yeSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICAgICogQG5hbWUgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICogQHJlcXVpcmVzIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBGYWN0b3J5IHdvcmsgd2l0aCBtb2RpZmllcnMuXHJcbiAgICAgKlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gTW9kaWZpZXJzRmFjdG9yeShDYXJ0RmFjdG9yeSkge1xyXG5cclxuICAgICAgICBsZXQgZmFjdG9yeSA9IHtcclxuICAgICAgICAgICAgZ2V0Q2hlY2tlZE1vZGlmaWVycyAgICAgOiBnZXRDaGVja2VkTW9kaWZpZXJzLFxyXG4gICAgICAgICAgICBtb2RpZmllckhhc0JlZW5TZWxlY3RlZCA6IG1vZGlmaWVySGFzQmVlblNlbGVjdGVkLFxyXG4gICAgICAgICAgICBkZWxldGVNb2RpZmllciAgICAgICAgICA6IGRlbGV0ZU1vZGlmaWVyLFxyXG4gICAgICAgICAgICBzZWxlY3RNb2RpZmllciAgICAgICAgICA6IHNlbGVjdE1vZGlmaWVyLFxyXG4gICAgICAgICAgICBwaWNrQ2hlY2tlZE1vZGlmaWVycyAgICA6IHBpY2tDaGVja2VkTW9kaWZpZXJzXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I2dldENoZWNrZWRNb2RpZmllcnNcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBhcnJheSB3aXRoIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdFtdfSBBcnJheSBvZiBtb2RpZmllcnMgb2JqZWN0cy5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2hlY2tlZE1vZGlmaWVycygpIHtcclxuICAgICAgICAgICAgbGV0IGNhcnRMaXN0ID0gQ2FydEZhY3RvcnkuZ2V0Q2FydExpc3QoKVtDYXJ0RmFjdG9yeS5nZXRJbmRleEVkaXRNZWFsKCldO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FydExpc3QubW9kaWZpZXJzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnkjbW9kaWZpZXJIYXNCZWVuU2VsZWN0ZWRcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiB0cnVlIGlmIG1vZGlmaWVyIGhhcyBiZWVuIHNlbGVjdGVkLCBvciBmYWxzZSBpZiBuby5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IHNlbGVjdGVkTW9kaWZpZXJzIEFycmF5IHdpdGggc2VsZWN0ZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtb2RpZmllciBNb2RpZmllciBvYmplY3QuXHJcbiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtb2RpZmllciBoYXMgYmVlbiBzZWxlY3RlZCwgZWxzZSBmYWxzZS5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gbW9kaWZpZXJIYXNCZWVuU2VsZWN0ZWQoc2VsZWN0ZWRNb2RpZmllcnMsIG1vZGlmaWVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZE1vZGlmaWVycy5zb21lKChpdGVtKSA9PiBtb2RpZmllci5uYW1lID09PSBpdGVtLm5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnkjZGVsZXRlTW9kaWZpZXJcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIERlbGV0ZSBtb2RpZmllciBhdCBhcnJheSBzZWxlY3RlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBzZWxlY3RlZE1vZGlmaWVycyBBcnJheSB3aXRoIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gbW9kaWZpZXIgTW9kaWZpZXIgb2JqZWN0IHdobyBiZSBkZWxldGVkLlxyXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdFtdfSBOZXcgYXJyYXkgb2YgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBkZWxldGVNb2RpZmllcihzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTW9kaWZpZXJzLmZpbHRlcigoaXRlbSkgPT4gbW9kaWZpZXIubmFtZSAhPT0gaXRlbS5uYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I3NlbGVjdE1vZGlmaWVyXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBBZGQgbW9kaWZpZXIgaWYgaXQgbm90IGhhcyBiZWVuIHNlbGVjdGVkLCBlbHNlIGRlbGV0ZSBtb2RpZmllciBhdFxyXG4gICAgICAgICAqIGFycmF5IG9mIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IHNlbGVjdGVkTW9kaWZpZXJzIEFycmF5IHdpdGggc2VsZWN0ZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtb2RpZmllciBNb2RpZmllciBvYmplY3QuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdE1vZGlmaWVyKHNlbGVjdGVkTW9kaWZpZXJzLCBtb2RpZmllcikge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFtb2RpZmllckhhc0JlZW5TZWxlY3RlZChzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE1vZGlmaWVycy5wdXNoKG1vZGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkTW9kaWZpZXJzID0gZGVsZXRlTW9kaWZpZXIoc2VsZWN0ZWRNb2RpZmllcnMsIG1vZGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ2FydEZhY3RvcnkuYWRkTW9kaWZpZXJzVG9MaXN0KHNlbGVjdGVkTW9kaWZpZXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I3BpY2tDaGVja2VkTW9kaWZpZXJzXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBQaWNrIGFsbCBjaGVja2VkIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IG1vZGlmaWVycyBBbGwgbW9kaWZpZXJzIG9mIGN1cnJlbnQgbWVhbC5cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBzZWxlY3RlZE1vZGlmaWVycyBBcnJheSB3aGVyZSB3aWxsIGJlIHBsYWNlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gY2hlY2tlZE1vZGlmaWVycyBBcnJheSB3aXRoIGNoZWNrZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBwaWNrQ2hlY2tlZE1vZGlmaWVycyhtb2RpZmllcnMsIHNlbGVjdGVkTW9kaWZpZXJzLCBjaGVja2VkTW9kaWZpZXJzKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2hlY2tlZE1vZGlmaWVycykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbkNoZWNrZWRNb2RpZmllcnMgPSBjaGVja2VkTW9kaWZpZXJzLmxlbmd0aDsgaSA8IGxlbkNoZWNrZWRNb2RpZmllcnM7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgbGVuTW9kaWZpZXJzID0gbW9kaWZpZXJzLmxlbmd0aDsgaiA8IGxlbk1vZGlmaWVyczsgaisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kaWZpZXJzW2pdLm5hbWUgPT09IGNoZWNrZWRNb2RpZmllcnNbaV0ubmFtZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVyc1tqXS5jaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RNb2RpZmllcihzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXJzW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6YXBwUGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSBvZiBhcHAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPGFwcC1wYWdlPjwvYXBwLXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJhcHBQYWdlXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvYXBwL3RlbXBsYXRlL2FwcFBhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcImFwcFwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogQXBwQ29udHJvbGxlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6QXBwQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJhcHBQYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBBcHBDb250cm9sbGVyKCkge31cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpzZWxlY3RDb3VudFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBzZWxlY3QgYW1vdW50IG9mIG1lYWwuXHJcbiAgICAgICAgICogVHJhbnNmZXJzIHRvIHRoZSBwYXJlbnQgY29udHJvbGxlciBzZWxlY3RlZCBhbW91bnQgb2YgbWVhbCBpbiB2YXJpYWJsZSBcInNlbGVjdFwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxzZWxlY3QtY291bnQ+PC9zZWxlY3QtY291bnQ+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJjYXJ0UGFnZVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJjb21wb25lbnQtdGVtcGxhdGVzL2NhcnQvdGVtcGxhdGUvY2FydFBhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcImNhcnRcIixcclxuICAgICAgICAgICAgY29udHJvbGxlciA6IENhcnRDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIENhcnRDb250cm9sbGVyKE1lYWxzRmFjdG9yeSwgQ2FydEZhY3RvcnkpIHtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZtLmN1cnJlbmN5ICAgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVuY3koKTtcclxuICAgICAgICB2bS5jYXJ0TGlzdCAgID0gQ2FydEZhY3RvcnkuZ2V0Q2FydExpc3QoKTtcclxuICAgICAgICB2bS50b3RhbFByaWNlID0gQ2FydEZhY3RvcnkuZ2V0VG90YWxQcmljZSgpO1xyXG4gICAgICAgIHZtLmVkaXRNZWFsICAgPSBlZGl0TWVhbDtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZWRpdE1lYWwobWVhbCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgQ2FydEZhY3Rvcnkuc2V0SW5kZXhFZGl0TWVhbChpbmRleCk7XHJcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5zZXRDdXJyZW50TWVhbEJ5SWQobWVhbC5pZCk7XHJcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5zZXRDdXJyZW50TWVhbEFtb3VudChtZWFsLmFtb3VudCk7XHJcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5zZXRDdXJyZW50TWVhbFN0YXR1cyhcImVkaXRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmNhcnRJY29uUGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSBvZiBjYXJ0IGJ1dHRvbiBhbmQgc3RyaW5nIHdpdGggbWVhbHMgY291bnQuXHJcbiAgICAgICAgICogQWNjZXB0cyBmcm9tIHBhcmVudCBjb250cm9sbGVyIGNvdW50IG1lYWxzIGluIGNhcnQgaW4gdmFyaWFibGUgXCJjb3VudFwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxjYXJ0LWljb24tcGFnZT48L2NhcnQtaWNvbi1wYWdlPlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICAuY29tcG9uZW50KFwiY2FydEljb25QYWdlXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvY2FydEljb24vdGVtcGxhdGUvY2FydEljb25QYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3MgOiB7XHJcbiAgICAgICAgICAgICAgICBjb3VudDogXCJAXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJjYXJ0SWNvblwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogQ2FydEljb25Db250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpDYXJ0SWNvbkNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiY2FydEljb25QYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBDYXJ0SWNvbkNvbnRyb2xsZXIoKSB7fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmRyaW5rc0xpc3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gbGlzdCBvZiBkcmlua3MuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPGRyaW5rcy1saXN0PjwvZHJpbmtzLWxpc3Q+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJkcmlua3NMaXN0XCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvZHJpbmtzTGlzdC90ZW1wbGF0ZS9kcmlua3NMaXN0Lmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3MgOiB7fSxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJkcmlua3NMaXN0XCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBEcmlua3NMaXN0Q29udHJvbGxlclxyXG4gICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICBmdW5jdGlvbiBEcmlua3NMaXN0Q29udHJvbGxlcihNZWFsc0ZhY3RvcnkpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgdm0gICAgID0gdGhpcztcclxuICAgICAgICBsZXQgICBkcmlua3MgPSBbXTtcclxuXHJcbiAgICAgICAgdm0ub25seVNvZnREcmlua3MgICA9IGZhbHNlO1xyXG4gICAgICAgIHZtLmN1cnJlbmN5ICAgICAgICAgPSBcIlwiO1xyXG4gICAgICAgIHZtLm9wZW5EcmluayAgICAgICAgPSBvcGVuRHJpbms7XHJcbiAgICAgICAgdm0uZ2V0RHJpbmtzRm9yVmlldyA9IGdldERyaW5rc0ZvclZpZXc7XHJcblxyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICBNZWFsc0ZhY3RvcnkuZ2V0TWVhbHMoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZ2V0RHJpbmtzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldERyaW5rcyhkcmlua3NPYmopIHtcclxuICAgICAgICAgICAgdm0uY3VycmVuY3kgPSBkcmlua3NPYmouY3VycmVuY3k7XHJcbiAgICAgICAgICAgIGRyaW5rcyAgICAgID0gZHJpbmtzT2JqLmRyaW5rcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9wZW5Ecmluayhkcmluaykge1xyXG4gICAgICAgICAgICBNZWFsc0ZhY3Rvcnkub3Blbk1lYWwoZHJpbmssIFwibmV3XCIsIDEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RHJpbmtzRm9yVmlldygpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh2bS5vbmx5U29mdERyaW5rcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyaW5rcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udGlwcGxlICE9PSB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkcmlua3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6ZXJyb3JQYWdlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIG9mIGVycm9yIHBhZ2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPGVycm9yLXBhZ2U+PC9lcnJvci1wYWdlPlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICAuY29tcG9uZW50KFwiZXJyb3JQYWdlXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvZXJyb3IvdGVtcGxhdGUvZXJyb3JQYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3MgOiB7fSxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJlcnJvclwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogRXJyb3JDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpFcnJvckNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiZXJyb3JQYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBFcnJvckNvbnRyb2xsZXIoKSB7fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmZvb3RlclBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gZm9vdGVyIHNlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPGZvb3Rlci1wYWdlPjwvZm9vdGVyLXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJmb290ZXJQYWdlXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvZm9vdGVyL3RlbXBsYXRlL2Zvb3RlclBhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcImZvb3RlclwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogRm9vdGVyQ29udHJvbGxlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6Rm9vdGVyQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJmb290ZXJQYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBGb290ZXJDb250cm9sbGVyKCkge31cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpoZWFkZXJQYWdlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIGhlYWRlciBzZWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxoZWFkZXItcGFnZT48L2hlYWRlci1wYWdlPlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICAuY29tcG9uZW50KFwiaGVhZGVyUGFnZVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJjb21wb25lbnQtdGVtcGxhdGVzL2hlYWRlci90ZW1wbGF0ZS9oZWFkZXJQYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3MgOiB7fSxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJoZWFkZXJcIixcclxuICAgICAgICAgICAgY29udHJvbGxlciA6IEhlYWRlckNvbnRyb2xsZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkhlYWRlckNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiaGVhZGVyUGFnZVwiLlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gSGVhZGVyQ29udHJvbGxlcigpIHt9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6bG9nb1BhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gbG9nbyBzZWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxsb2dvLXBhZ2U+PC9sb2dvLXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJsb2dvUGFnZVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJjb21wb25lbnQtdGVtcGxhdGVzL2xvZ28vdGVtcGxhdGUvbG9nb1BhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcImxvZ29cIixcclxuICAgICAgICAgICAgY29udHJvbGxlciA6IExvZ29Db250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpMb2dvQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJsb2dvUGFnZVwiLlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gTG9nb0NvbnRyb2xsZXIoKSB7fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOm1haW5QYWdlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIG1haW4gc2VjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEB1c2FnZSA8bWFpbi1wYWdlPjwvbWFpbi1wYWdlPlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICAuY29tcG9uZW50KFwibWFpblBhZ2VcIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tYWluL3RlbXBsYXRlL21haW5QYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3MgOiB7fSxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzIDogXCJtYWluXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBNYWluQ29udHJvbGxlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TWFpbkNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwibWFpblBhZ2VcIi5cclxuICAgICAqKi9cclxuICAgIGZ1bmN0aW9uIE1haW5Db250cm9sbGVyKCkge31cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJNZWFsc1wiKVxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgZGlyZWN0aXZlXHJcblx0XHQgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6c2VsZWN0Q291bnRcclxuXHRcdCAqXHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gc2VsZWN0IGFtb3VudCBvZiBtZWFsLlxyXG5cdFx0ICogVHJhbnNmZXJzIHRvIHRoZSBwYXJlbnQgY29udHJvbGxlciBzZWxlY3RlZCBhbW91bnQgb2YgbWVhbCBpbiB2YXJpYWJsZSBcInNlbGVjdFwiLlxyXG5cdFx0ICpcclxuXHRcdCAqIEB1c2FnZSA8c2VsZWN0LWNvdW50Pjwvc2VsZWN0LWNvdW50PlxyXG5cdFx0ICoqL1xyXG5cdFx0LmNvbXBvbmVudChcIm1lYWxQYWdlXCIsIHtcclxuXHRcdFx0dGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvbWVhbC90ZW1wbGF0ZS9tZWFsUGFnZS5odG1sXCIsXHJcblx0XHRcdGJpbmRpbmdzIDoge1xyXG5cdFx0XHRcdHBhdGg6IFwiQFwiXHJcblx0XHRcdH0sXHJcblx0XHRcdGNvbnRyb2xsZXJBcyA6IFwibWVhbFwiLFxyXG5cdFx0XHRjb250cm9sbGVyIDogTWVhbENvbnRyb2xsZXJcclxuXHRcdH0pO1xyXG5cclxuXHRmdW5jdGlvbiBNZWFsQ29udHJvbGxlcihNZWFsc0ZhY3RvcnksIENhcnRGYWN0b3J5KSB7XHJcblxyXG5cdFx0Y29uc3Qgdm0gPSB0aGlzO1xyXG5cclxuXHRcdHZtLmN1cnJlbnRNZWFsICA9IE1lYWxzRmFjdG9yeS5nZXRDdXJyZW50TWVhbCgpO1xyXG5cdFx0dm0uY3VycmVuY3kgICAgID0gTWVhbHNGYWN0b3J5LmdldEN1cnJlbmN5KCk7XHJcblx0XHR2bS5zZWxlY3RBbW91bnQgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVudE1lYWxBbW91bnQoKTtcclxuXHRcdHZtLm1lYWxTdGF0dXMgICA9IE1lYWxzRmFjdG9yeS5nZXRDdXJyZW50TWVhbFN0YXR1cygpO1xyXG5cdFx0dm0uY2FydENvdW50ICAgID0gQ2FydEZhY3RvcnkuZ2V0Q2FydExpc3RDb3VudCgpO1xyXG5cdFx0dm0uYWRkTWVhbCAgICAgID0gYWRkTWVhbDtcclxuXHRcdHZtLnJlbW92ZU1lYWwgICA9IHJlbW92ZU1lYWw7XHJcblx0XHR2bS5zYXZlTWVhbCAgICAgPSBzYXZlTWVhbDtcclxuXHJcblx0XHRmdW5jdGlvbiBhZGRNZWFsKCkge1xyXG5cdFx0XHRDYXJ0RmFjdG9yeS5hZGRNZWFsVG9DYXJ0TGlzdCh2bS5jdXJyZW50TWVhbCwgdm0uc2VsZWN0QW1vdW50KTtcclxuXHRcdH1cclxuXHJcblx0XHRmdW5jdGlvbiByZW1vdmVNZWFsKCkge1xyXG5cdFx0XHRDYXJ0RmFjdG9yeS5yZW1vdmVNZWFsKCk7XHJcblx0XHRcdENhcnRGYWN0b3J5LmRlbGV0ZU1vZGlmaWVycygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNhdmVNZWFsKCkge1xyXG5cdFx0XHRDYXJ0RmFjdG9yeS5yZW1vdmVNZWFsKCk7XHJcblx0XHRcdHZtLmFkZE1lYWwoKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKFwiTWVhbHNcIilcclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIGRpcmVjdGl2ZVxyXG5cdFx0ICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOm1lYWxzTGlzdFxyXG5cdFx0ICpcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBsaXN0IG9mIG1lYWxzLlxyXG5cdFx0ICpcclxuXHRcdCAqIEB1c2FnZSA8bWVhbHMtbGlzdD48L21lYWxzLWxpc3Q+XHJcblx0XHQgKiovXHJcblx0XHQuY29tcG9uZW50KFwibWVhbHNMaXN0XCIsIHtcclxuXHRcdFx0dGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvbWVhbHNMaXN0L3RlbXBsYXRlL21lYWxzTGlzdC5odG1sXCIsXHJcblx0XHRcdGJpbmRpbmdzIDoge30sXHJcblx0XHRcdGNvbnRyb2xsZXJBcyA6IFwibWVhbHNMaXN0XCIsXHJcblx0XHRcdGNvbnRyb2xsZXIgOiBNZWFsc0xpc3RDb250cm9sbGVyXHJcblx0XHR9KTtcclxuXHJcblx0LyoqXHJcblx0ICogQG5nZG9jIGNvbnRyb2xsZXJcclxuXHQgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXJcclxuXHQgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0ICogQHByb3BlcnR5IHtzdHJpbmd9IGN1cnJlbmN5IEN1cnJlbmN5LlxyXG5cdCAqIEBwcm9wZXJ0eSB7b2JqZWN0W119IHByb2R1Y3RzIEFycmF5IG9mIHByb2R1Y3RzLlxyXG5cdCAqXHJcblx0ICogQGRlc2NyaXB0aW9uXHJcblx0ICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtZWFsc0xpc3RcIi5cclxuXHQgKiBIYW5kbGUgYSB1c2VyIGNob2ljZSBhYm91dCBtZWFsLlxyXG5cdCAqKi9cclxuXHRmdW5jdGlvbiBNZWFsc0xpc3RDb250cm9sbGVyKE1lYWxzRmFjdG9yeSkge1xyXG5cclxuXHRcdGNvbnN0IHZtID0gdGhpcztcclxuXHJcblxyXG5cdFx0dm0ub3Blbk1lYWwgPSBvcGVuTWVhbDtcclxuXHRcdHZtLmN1cnJlbmN5ID0gXCJcIjtcclxuXHRcdHZtLnByb2R1Y3RzID0gbnVsbDtcclxuXHJcblx0XHRhY3RpdmF0ZSgpO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyI2FjdGl2YXRlXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyXHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIE1ldGhvZCB0byBpbml0aWFsaXplIGRhdGEuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuXHRcdFx0TWVhbHNGYWN0b3J5LmdldE1lYWxzKClcclxuXHRcdFx0XHQudGhlbihnZXRQcm9kdWN0cyk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXIjZ2V0UHJvZHVjdHNcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXJcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogQXNzaWduaW5nIGEgZGF0YSBhdCBwcm9wZXJ0aWVzLlxyXG5cdFx0ICpcclxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSBtZWFsc09iaiBNZWFscyBvYmplY3QgY29udGFpbnMgY3VycmVuY3kgYW5kIHByb2R1Y3RzIGFycmF5LlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0UHJvZHVjdHMobWVhbHNPYmopIHtcclxuXHRcdFx0dm0uY3VycmVuY3kgPSBtZWFsc09iai5jdXJyZW5jeTtcclxuXHRcdFx0dm0ucHJvZHVjdHMgPSBtZWFsc09iai5wcm9kdWN0cztcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlciNvcGVuTWVhbFxyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlclxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBDYWxsIG1ldGhvZCBvcGVuTWVhbCBvd25lZCBNZWFsc0ZhY3RvcnkuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IG1lYWwgTWVhbCBvYmplY3QuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBvcGVuTWVhbChtZWFsKSB7XHJcblx0XHRcdE1lYWxzRmFjdG9yeS5vcGVuTWVhbChtZWFsLCBcIm5ld1wiLCAxKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6bWVudVBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gbWVudSBzZWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxtZW51LXBhZ2U+PC9tZW51LXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJtZW51UGFnZVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJjb21wb25lbnQtdGVtcGxhdGVzL21lbnUvdGVtcGxhdGUvbWVudVBhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIm1lbnVcIixcclxuICAgICAgICAgICAgY29udHJvbGxlciA6IE1lbnVDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZW51Q29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtZW51UGFnZVwiLlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gTWVudUNvbnRyb2xsZXIoKSB7fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOnNlbGVjdENvdW50XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIHNlbGVjdCBhbW91bnQgb2YgbWVhbC5cclxuICAgICAgICAgKiBUcmFuc2ZlcnMgdG8gdGhlIHBhcmVudCBjb250cm9sbGVyIHNlbGVjdGVkIGFtb3VudCBvZiBtZWFsIGluIHZhcmlhYmxlIFwic2VsZWN0XCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPHNlbGVjdC1jb3VudD48L3NlbGVjdC1jb3VudD5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcIm1vZGlmaWVyc1BhZ2VcIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tb2RpZmllcnMvdGVtcGxhdGUvbW9kaWZpZXJzUGFnZS5odG1sXCIsXHJcbiAgICAgICAgICAgIGJpbmRpbmdzIDoge1xyXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IFwiQFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwibW9kXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBNb2RpZmllcnNDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gTW9kaWZpZXJzQ29udHJvbGxlcihNZWFsc0ZhY3RvcnksIE1vZGlmaWVyc0ZhY3RvcnkpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgdm0gICAgICAgICAgICAgICAgPSB0aGlzO1xyXG4gICAgICAgIGxldCAgIHNlbGVjdGVkTW9kaWZpZXJzID0gW107XHJcblxyXG4gICAgICAgIHZtLm1vZGlmaWVycyAgICAgID0gTWVhbHNGYWN0b3J5LmdldE1vZGlmaWVycygpO1xyXG4gICAgICAgIHZtLnNlbGVjdE1vZGlmaWVyID0gc2VsZWN0TW9kaWZpZXI7XHJcblxyXG4gICAgICAgIGNsZWFuUGlja01vZGlmaWVycygpO1xyXG5cclxuICAgICAgICBpZiAoTWVhbHNGYWN0b3J5LmdldEN1cnJlbnRNZWFsU3RhdHVzKCkgPT09IFwiZWRpdFwiKSB7XHJcbiAgICAgICAgICAgIGxldCBjaGVja2VkTW9kaWZpZXJzID0gTW9kaWZpZXJzRmFjdG9yeS5nZXRDaGVja2VkTW9kaWZpZXJzKCk7XHJcbiAgICAgICAgICAgIE1vZGlmaWVyc0ZhY3RvcnkucGlja0NoZWNrZWRNb2RpZmllcnModm0ubW9kaWZpZXJzLCBzZWxlY3RlZE1vZGlmaWVycywgY2hlY2tlZE1vZGlmaWVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjbGVhblBpY2tNb2RpZmllcnMoKSB7XHJcbiAgICAgICAgICAgIGlmICh2bS5tb2RpZmllcnMpIHtcclxuICAgICAgICAgICAgICAgIHZtLm1vZGlmaWVycy5mb3JFYWNoKChpdGVtKSA9PiBpdGVtLmNoZWNrID0gZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWxlY3RNb2RpZmllcihtb2RpZmllcikge1xyXG4gICAgICAgICAgICBNb2RpZmllcnNGYWN0b3J5LnNlbGVjdE1vZGlmaWVyKHNlbGVjdGVkTW9kaWZpZXJzLCBtb2RpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOnNlbGVjdENvdW50XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIHNlbGVjdCBhbW91bnQgb2YgbWVhbC5cclxuICAgICAgICAgKiBUcmFuc2ZlcnMgdG8gdGhlIHBhcmVudCBjb250cm9sbGVyIHNlbGVjdGVkIGFtb3VudCBvZiBtZWFsIGluIHZhcmlhYmxlIFwic2VsZWN0XCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPHNlbGVjdC1jb3VudD48L3NlbGVjdC1jb3VudD5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcInNlbGVjdENvdW50XCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvc2VsZWN0Q291bnQvdGVtcGxhdGUvc2VsZWN0Q291bnRQYWdlLmh0bWxcIixcclxuICAgICAgICAgICAgYmluZGluZ3MgOiB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3Q6IFwiPVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwic2VsZWN0XCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBTZWxlY3RDb3VudENvbnRyb2xsZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOlNlbGVjdENvdW50Q29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJzZWxlY3RDb3VudFwiLlxyXG4gICAgICogQ2FwdHVyZXMgdGhlIHVzZXIncyBjaG9pY2UgYXQgYW1vdW50LlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gU2VsZWN0Q291bnRDb250cm9sbGVyKCkge1xyXG5cclxuICAgICAgICBjb25zdCB2bSA9IHRoaXM7XHJcblxyXG4gICAgICAgIHZtLnNlbGVjdE51bSA9IHNlbGVjdE51bTtcclxuICAgICAgICB2bS5hY3RpdmVOdW0gPSBhY3RpdmVOdW07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOlNlbGVjdENvdW50Q29udHJvbGxlciNzZWxlY3ROdW1cclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBTZWxlY3QgbWVhbCBhbW91bnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gbnVtIE1lYWwgYW1vdW50LlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBzZWxlY3ROdW0obnVtKSB7XHJcbiAgICAgICAgICAgIHZtLnNlbGVjdCA9IG51bTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOlNlbGVjdENvdW50Q29udHJvbGxlciNhY3RpdmVOdW1cclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gdHJ1ZSBpZiB2YXJpYWJsZSBzZWxlY3QgaXMgbnVtLCBlbHNlIGZhbHNlLlxyXG4gICAgICAgICAqIElmIGZ1bmN0aW9uIHJldHVybiB0cnVlLCB0aGUgYnV0dG9uIHdpdGggbnVtIGdldCBjbGFzcyBcImFjdGl2ZVwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG51bSBNZWFsIGFtb3VudC5cclxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHNlbGVjdCBpcyBudW0uXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2ZU51bShudW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZtLnNlbGVjdCA9PT0gbnVtO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTsiXX0=
