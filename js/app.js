"use strict";!function(){angular.module("Meals",["ui.router"])}(),function(){function e(e,n){e.state("app",{url:"/app",template:"<app-page></app-page>"}).state("app.main",{url:"/main",template:"<main-page></main-page>"}).state("app.main.meals",{url:"/meals",template:"<meals-list id='mealsList'></meals-list>"}).state("app.main.drinks",{url:"/drinks",template:"<drinks-list></drinks-list>"}).state("app.meal",{url:"/meal/:path",controllerAs:"meal",controller:t,template:"<meal-page id='meal' path='{{ meal.path }}'></meal-page>"}).state("app.cart",{url:"/cart",template:"<cart-page id='cart'></cart-page>"}).state("error",{url:"/error",template:"<error-page></error-page>"}),n.otherwise("/app/main/meals")}function t(e){this.path=e.path}e.$inject=["$stateProvider","$urlRouterProvider"],t.$inject=["$stateParams"],angular.module("Meals").config(e)}(),function(){function e(){function e(e){var t=0,n=!0,r=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var i=a.value;t+=i.price}}catch(e){r=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw o}}return t}function t(){return p}function n(e){p=e}function r(){return s.length}function o(e){m=e}function a(e,t){var n={};n.id=e.id,n.name=e.name,n.price=e.price,n.amount=t,m&&(n.modifiers=m.slice()),m=null,s.push(n)}function l(){return s}function i(){var t=0;if(s.length>0)for(var n=0,r=s.length;n<r;n++)t+=s[n].price*s[n].amount,s[n].modifiers&&(t+=e(s[n].modifiers)*s[n].amount);return t.toFixed(2)}function c(){m=null}function u(){s.splice(p,1)}var s=[],m=null,p=0,f={getIndexEditMeal:t,setIndexEditMeal:n,getCartListCount:r,addModifiersToList:o,addMealToCartList:a,getCartList:l,getTotalPrice:i,deleteModifiers:c,removeMeal:u};return f}angular.module("Meals").factory("CartFactory",e)}(),function(){function e(e,t){function n(e,t,n){i(e),u(t),p(n)}function r(t){return e({method:"GET",url:d}).success(function(e){g=e,M=e.currency,t.resolve(e)}).error(function(e,n){t.reject("Error in $http request"),console.log(e),console.log(n)}),t}function o(){return null!==h&&h.modifiers}function a(){var e=t.defer();return g?e.resolve(g):e=r(e),e.promise}function l(){return h}function i(e){h=e}function c(){return C}function u(e){C=e}function s(){return M}function m(){return y}function p(e){y=e}function f(e){h=g.products.filter(function(t){return t.id===e})[0],h||(h=g.drinks.filter(function(t){return t.id===e})[0])}var d="meals.json",g=null,M="",h=null,C="new",y=1,v={getModifiers:o,getMeals:a,getCurrentMeal:l,setCurrentMeal:i,getCurrentMealStatus:c,setCurrentMealStatus:u,getCurrency:s,getCurrentMealAmount:m,setCurrentMealAmount:p,setCurrentMealById:f,openMeal:n};return v}e.$inject=["$http","$q"],angular.module("Meals").factory("MealsFactory",e)}(),function(){function e(e){function t(){var t=e.getCartList()[e.getIndexEditMeal()];return t.modifiers}function n(e,t){return e.some(function(e){return t.name===e.name})}function r(e,t){return e.filter(function(e){return t.name!==e.name})}function o(t,o){n(t,o)?t=r(t,o):t.push(o),e.addModifiersToList(t)}function a(e,t,n){if(n)for(var r=0,a=n.length;r<a;r++)for(var l=0,i=e.length;l<i;l++)e[l].name===n[r].name&&(e[l].check=!0,o(t,e[l]))}var l={getCheckedModifiers:t,modifierHasBeenSelected:n,deleteModifier:r,selectModifier:o,pickCheckedModifiers:a};return l}e.$inject=["CartFactory"],angular.module("Meals").factory("ModifiersFactory",e)}(),function(){function e(){}angular.module("Meals").component("appPage",{templateUrl:"component-templates/app/template/appPage.html",bindings:{},controllerAs:"app",controller:e})}(),function(){function e(e,t){function n(n,r){t.setIndexEditMeal(r),e.setCurrentMealById(n.id),e.setCurrentMealAmount(n.amount),e.setCurrentMealStatus("edit")}var r=this;r.currency=e.getCurrency(),r.cartList=t.getCartList(),r.totalPrice=t.getTotalPrice(),r.editMeal=n}e.$inject=["MealsFactory","CartFactory"],angular.module("Meals").component("cartPage",{templateUrl:"component-templates/cart/template/cartPage.html",bindings:{},controllerAs:"cart",controller:e})}(),function(){function e(){}angular.module("Meals").component("cartIconPage",{templateUrl:"component-templates/cartIcon/template/cartIconPage.html",bindings:{count:"@"},controllerAs:"cartIcon",controller:e})}(),function(){function e(e){function t(){e.getMeals().then(n)}function n(e){a.currency=e.currency,l=e.drinks}function r(t){e.openMeal(t,"new",1)}function o(){return a.onlySoftDrinks?l.filter(function(e){return e.tipple!==!0}):l}var a=this,l=[];a.onlySoftDrinks=!1,a.currency="",a.openDrink=r,a.getDrinksForView=o,t()}e.$inject=["MealsFactory"],angular.module("Meals").component("drinksList",{templateUrl:"component-templates/drinksList/template/drinksList.html",bindings:{},controllerAs:"drinksList",controller:e})}(),function(){function e(){}angular.module("Meals").component("errorPage",{templateUrl:"component-templates/error/template/errorPage.html",bindings:{},controllerAs:"error",controller:e})}(),function(){function e(){}angular.module("Meals").component("footerPage",{templateUrl:"component-templates/footer/template/footerPage.html",bindings:{},controllerAs:"footer",controller:e})}(),function(){function e(){}angular.module("Meals").component("headerPage",{templateUrl:"component-templates/header/template/headerPage.html",bindings:{},controllerAs:"header",controller:e})}(),function(){function e(){}angular.module("Meals").component("logoPage",{templateUrl:"component-templates/logo/template/logoPage.html",bindings:{},controllerAs:"logo",controller:e})}(),function(){function e(){}angular.module("Meals").component("mainPage",{templateUrl:"component-templates/main/template/mainPage.html",bindings:{},controllerAs:"main",controller:e})}(),function(){function e(e,t){function n(){t.addMealToCartList(a.currentMeal,a.selectAmount)}function r(){t.removeMeal(),t.deleteModifiers()}function o(){t.removeMeal(),a.addMeal()}var a=this;a.currentMeal=e.getCurrentMeal(),a.currency=e.getCurrency(),a.selectAmount=e.getCurrentMealAmount(),a.mealStatus=e.getCurrentMealStatus(),a.cartCount=t.getCartListCount(),a.addMeal=n,a.removeMeal=r,a.saveMeal=o}e.$inject=["MealsFactory","CartFactory"],angular.module("Meals").component("mealPage",{templateUrl:"component-templates/meal/template/mealPage.html",bindings:{path:"@"},controllerAs:"meal",controller:e})}(),function(){function e(e){function t(){e.getMeals().then(n)}function n(e){o.currency=e.currency,o.products=e.products}function r(t){e.openMeal(t,"new",1)}var o=this;o.openMeal=r,o.currency="",o.products=null,t()}e.$inject=["MealsFactory"],angular.module("Meals").component("mealsList",{templateUrl:"component-templates/mealsList/template/mealsList.html",bindings:{},controllerAs:"mealsList",controller:e})}(),function(){function e(){}angular.module("Meals").component("menuPage",{templateUrl:"component-templates/menu/template/menuPage.html",bindings:{},controllerAs:"menu",controller:e})}(),function(){function e(e,t){function n(){o.modifiers&&o.modifiers.forEach(function(e){return e.check=!1})}function r(e){t.selectModifier(a,e)}var o=this,a=[];if(o.modifiers=e.getModifiers(),o.selectModifier=r,n(),"edit"===e.getCurrentMealStatus()){var l=t.getCheckedModifiers();t.pickCheckedModifiers(o.modifiers,a,l)}}e.$inject=["MealsFactory","ModifiersFactory"],angular.module("Meals").component("modifiersPage",{templateUrl:"component-templates/modifiers/template/modifiersPage.html",bindings:{currency:"@"},controllerAs:"mod",controller:e})}(),function(){function e(){function e(e){n.select=e}function t(e){return n.select===e}var n=this;n.selectNum=e,n.activeNum=t}angular.module("Meals").component("selectCount",{templateUrl:"component-templates/selectCount/template/selectCountPage.html",bindings:{select:"="},controllerAs:"select",controller:e})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1haW4uanMiLCJjb25maWcuanMiLCJjYXJ0RmFjdG9yeS5qcyIsIm1lYWxzRmFjdG9yeS5qcyIsIm1vZGlmaWVyc0ZhY3RvcnkuanMiLCJhcHAvYXBwLmpzIiwiY2FydC9jYXJ0LmpzIiwiY2FydEljb24vY2FydEljb24uanMiLCJkcmlua3NMaXN0L2RyaW5rc0xpc3QuanMiLCJlcnJvci9lcnJvci5qcyIsImZvb3Rlci9mb290ZXIuanMiLCJoZWFkZXIvaGVhZGVyLmpzIiwibG9nby9sb2dvLmpzIiwibWFpbi9tYWluLmpzIiwibWVhbC9tZWFsLmpzIiwibWVhbHNMaXN0L21lYWxzTGlzdC5qcyIsIm1lbnUvbWVudS5qcyIsIm1vZGlmaWVycy9tb2RpZmllcnMuanMiLCJzZWxlY3RDb3VudC9zZWxlY3RDb3VudC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHN0YXRlUHJvdmlkZXIiLCIkdXJsUm91dGVyUHJvdmlkZXIiLCJzdGF0ZSIsInVybCIsInRlbXBsYXRlIiwiY29udHJvbGxlckFzIiwiY29udHJvbGxlciIsIk1lYWxDb250cm9sbGVyIiwib3RoZXJ3aXNlIiwiJHN0YXRlUGFyYW1zIiwidGhpcyIsInBhdGgiLCJDYXJ0RmFjdG9yeSIsImdldE1vZGlmaWVyc1ByaWNlIiwibW9kaWZpZXJzQXJyIiwidG90YWxQcmljZSIsIl9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24iLCJfZGlkSXRlcmF0b3JFcnJvciIsIl9pdGVyYXRvckVycm9yIiwidW5kZWZpbmVkIiwiX3N0ZXAiLCJfaXRlcmF0b3IiLCJTeW1ib2wiLCJpdGVyYXRvciIsIm5leHQiLCJkb25lIiwibW9kaWZpZXIiLCJ2YWx1ZSIsInByaWNlIiwiZXJyIiwicmV0dXJuIiwiZ2V0SW5kZXhFZGl0TWVhbCIsImluZGV4RWRpdE1lYWwiLCJzZXRJbmRleEVkaXRNZWFsIiwiaW5kZXgiLCJnZXRDYXJ0TGlzdENvdW50IiwiY2FydExpc3QiLCJsZW5ndGgiLCJhZGRNb2RpZmllcnNUb0xpc3QiLCJtb2RpZiIsIm1vZGlmaWVycyIsImFkZE1lYWxUb0NhcnRMaXN0IiwibWVhbCIsImFtb3VudCIsIm5ld01lYWwiLCJpZCIsIm5hbWUiLCJzbGljZSIsInB1c2giLCJnZXRDYXJ0TGlzdCIsImdldFRvdGFsUHJpY2UiLCJpIiwibGVuIiwidG9GaXhlZCIsImRlbGV0ZU1vZGlmaWVycyIsInJlbW92ZU1lYWwiLCJzcGxpY2UiLCJmYWN0b3J5IiwiTWVhbHNGYWN0b3J5IiwiJGh0dHAiLCIkcSIsIm9wZW5NZWFsIiwic3RhdHVzIiwic2V0Q3VycmVudE1lYWwiLCJzZXRDdXJyZW50TWVhbFN0YXR1cyIsInNldEN1cnJlbnRNZWFsQW1vdW50IiwiZ2V0TWVhbHNGcm9tSHR0cCIsImRlZmVycmVkIiwibWV0aG9kIiwibWVhbEFwaVVybCIsInN1Y2Nlc3MiLCJkYXRhIiwibWVhbHMiLCJjdXJyZW5jeSIsInJlc29sdmUiLCJlcnJvciIsInJlamVjdCIsImNvbnNvbGUiLCJsb2ciLCJnZXRNb2RpZmllcnMiLCJjdXJyZW50TWVhbCIsImdldE1lYWxzIiwiZGVmZXIiLCJwcm9taXNlIiwiZ2V0Q3VycmVudE1lYWwiLCJnZXRDdXJyZW50TWVhbFN0YXR1cyIsImN1cnJlbnRNZWFsU3RhdHVzIiwiZ2V0Q3VycmVuY3kiLCJnZXRDdXJyZW50TWVhbEFtb3VudCIsImN1cnJlbnRBbW91bnQiLCJzZXRDdXJyZW50TWVhbEJ5SWQiLCJwcm9kdWN0cyIsImZpbHRlciIsIml0ZW0iLCJkcmlua3MiLCJNb2RpZmllcnNGYWN0b3J5IiwiZ2V0Q2hlY2tlZE1vZGlmaWVycyIsIm1vZGlmaWVySGFzQmVlblNlbGVjdGVkIiwic2VsZWN0ZWRNb2RpZmllcnMiLCJzb21lIiwiZGVsZXRlTW9kaWZpZXIiLCJzZWxlY3RNb2RpZmllciIsInBpY2tDaGVja2VkTW9kaWZpZXJzIiwiY2hlY2tlZE1vZGlmaWVycyIsImxlbkNoZWNrZWRNb2RpZmllcnMiLCJqIiwibGVuTW9kaWZpZXJzIiwiY2hlY2siLCJBcHBDb250cm9sbGVyIiwiY29tcG9uZW50IiwidGVtcGxhdGVVcmwiLCJiaW5kaW5ncyIsIkNhcnRDb250cm9sbGVyIiwiZWRpdE1lYWwiLCJ2bSIsIkNhcnRJY29uQ29udHJvbGxlciIsImNvdW50IiwiRHJpbmtzTGlzdENvbnRyb2xsZXIiLCJhY3RpdmF0ZSIsInRoZW4iLCJnZXREcmlua3MiLCJkcmlua3NPYmoiLCJvcGVuRHJpbmsiLCJkcmluayIsImdldERyaW5rc0ZvclZpZXciLCJvbmx5U29mdERyaW5rcyIsInRpcHBsZSIsIkVycm9yQ29udHJvbGxlciIsIkZvb3RlckNvbnRyb2xsZXIiLCJIZWFkZXJDb250cm9sbGVyIiwiTG9nb0NvbnRyb2xsZXIiLCJNYWluQ29udHJvbGxlciIsImFkZE1lYWwiLCJzZWxlY3RBbW91bnQiLCJzYXZlTWVhbCIsIm1lYWxTdGF0dXMiLCJjYXJ0Q291bnQiLCJNZWFsc0xpc3RDb250cm9sbGVyIiwiZ2V0UHJvZHVjdHMiLCJtZWFsc09iaiIsIk1lbnVDb250cm9sbGVyIiwiTW9kaWZpZXJzQ29udHJvbGxlciIsImNsZWFuUGlja01vZGlmaWVycyIsImZvckVhY2giLCJTZWxlY3RDb3VudENvbnRyb2xsZXIiLCJzZWxlY3ROdW0iLCJudW0iLCJzZWxlY3QiLCJhY3RpdmVOdW0iXSwibWFwcGluZ3MiOiJBQUFBLGNDQUEsV0FHSUEsUUFDS0MsT0FBTyxTQUNKLGlCQ0xaLFdBT0ksUUFBU0MsR0FBT0MsRUFBZ0JDLEdBRTVCRCxFQUNLRSxNQUFNLE9BQ0hDLElBQUssT0FDTEMsU0FBVSwwQkFFYkYsTUFBTSxZQUNIQyxJQUFLLFFBQ0xDLFNBQVUsNEJBRWJGLE1BQU0sa0JBQ0hDLElBQUssU0FDTEMsU0FBVSw2Q0FFYkYsTUFBTSxtQkFDSEMsSUFBSyxVQUNMQyxTQUFVLGdDQUViRixNQUFNLFlBQ0hDLElBQUssY0FDTEUsYUFBYyxPQUNkQyxXQUFZQyxFQUNaSCxTQUFVLDZEQUViRixNQUFNLFlBQ0hDLElBQUssUUFDTEMsU0FBVSxzQ0FF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QUdrQyxVQUFZQSxFQWxDbkJ2SixRQUNLQyxPQUFPLFNBV1ArRyxVQUFVLGVBQ1BDLFlBQWMsZ0VBQ2RDLFVBQ0lvQyxPQUFRLEtBRVo5SSxhQUFlLFNBQ2ZDLFdBQWEwSSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIiwgW1widWkucm91dGVyXCJdKTtcbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIikuY29uZmlnKGNvbmZpZyk7XG5cbiAgICBmdW5jdGlvbiBjb25maWcoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlcikge1xuXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKFwiYXBwXCIsIHtcbiAgICAgICAgICAgIHVybDogXCIvYXBwXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogXCI8YXBwLXBhZ2U+PC9hcHAtcGFnZT5cIlxuICAgICAgICB9KS5zdGF0ZShcImFwcC5tYWluXCIsIHtcbiAgICAgICAgICAgIHVybDogXCIvbWFpblwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPG1haW4tcGFnZT48L21haW4tcGFnZT5cIlxuICAgICAgICB9KS5zdGF0ZShcImFwcC5tYWluLm1lYWxzXCIsIHtcbiAgICAgICAgICAgIHVybDogXCIvbWVhbHNcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxtZWFscy1saXN0IGlkPSdtZWFsc0xpc3QnPjwvbWVhbHMtbGlzdD5cIlxuICAgICAgICB9KS5zdGF0ZShcImFwcC5tYWluLmRyaW5rc1wiLCB7XG4gICAgICAgICAgICB1cmw6IFwiL2RyaW5rc1wiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGRyaW5rcy1saXN0PjwvZHJpbmtzLWxpc3Q+XCJcbiAgICAgICAgfSkuc3RhdGUoXCJhcHAubWVhbFwiLCB7XG4gICAgICAgICAgICB1cmw6IFwiL21lYWwvOnBhdGhcIixcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogXCJtZWFsXCIsXG4gICAgICAgICAgICBjb250cm9sbGVyOiBNZWFsQ29udHJvbGxlcixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxtZWFsLXBhZ2UgaWQ9J21lYWwnIHBhdGg9J3t7IG1lYWwucGF0aCB9fSc+PC9tZWFsLXBhZ2U+XCJcbiAgICAgICAgfSkuc3RhdGUoXCJhcHAuY2FydFwiLCB7XG4gICAgICAgICAgICB1cmw6IFwiL2NhcnRcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxjYXJ0LXBhZ2UgaWQ9J2NhcnQnPjwvY2FydC1wYWdlPlwiXG4gICAgICAgIH0pLnN0YXRlKFwiZXJyb3JcIiwge1xuICAgICAgICAgICAgdXJsOiBcIi9lcnJvclwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGVycm9yLXBhZ2U+PC9lcnJvci1wYWdlPlwiXG4gICAgICAgIH0pO1xuXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvYXBwL21haW4vbWVhbHNcIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gTWVhbENvbnRyb2xsZXIoJHN0YXRlUGFyYW1zKSB7XG4gICAgICAgIHRoaXMucGF0aCA9ICRzdGF0ZVBhcmFtcy5wYXRoO1xuICAgIH1cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIikuZmFjdG9yeShcIkNhcnRGYWN0b3J5XCIsIENhcnRGYWN0b3J5KTtcblxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBGYWN0b3J5IHdvcmsgd2l0aCBjYXJ0LlxyXG4gICAgICpcclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBDYXJ0RmFjdG9yeSgpIHtcblxuICAgICAgICB2YXIgY2FydExpc3QgPSBbXSxcbiAgICAgICAgICAgIG1vZGlmaWVycyA9IG51bGwsXG4gICAgICAgICAgICBpbmRleEVkaXRNZWFsID0gMCxcbiAgICAgICAgICAgIGZhY3RvcnkgPSB7XG4gICAgICAgICAgICBnZXRJbmRleEVkaXRNZWFsOiBnZXRJbmRleEVkaXRNZWFsLFxuICAgICAgICAgICAgc2V0SW5kZXhFZGl0TWVhbDogc2V0SW5kZXhFZGl0TWVhbCxcbiAgICAgICAgICAgIGdldENhcnRMaXN0Q291bnQ6IGdldENhcnRMaXN0Q291bnQsXG4gICAgICAgICAgICBhZGRNb2RpZmllcnNUb0xpc3Q6IGFkZE1vZGlmaWVyc1RvTGlzdCxcbiAgICAgICAgICAgIGFkZE1lYWxUb0NhcnRMaXN0OiBhZGRNZWFsVG9DYXJ0TGlzdCxcbiAgICAgICAgICAgIGdldENhcnRMaXN0OiBnZXRDYXJ0TGlzdCxcbiAgICAgICAgICAgIGdldFRvdGFsUHJpY2U6IGdldFRvdGFsUHJpY2UsXG4gICAgICAgICAgICBkZWxldGVNb2RpZmllcnM6IGRlbGV0ZU1vZGlmaWVycyxcbiAgICAgICAgICAgIHJlbW92ZU1lYWw6IHJlbW92ZU1lYWxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gZmFjdG9yeTtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjZ2V0TW9kaWZpZXJzUHJpY2VcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gdG90YWwgcHJpY2Ugb2YgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gbW9kaWZpZXJzQXJyIEFycmF5IG9mIG1vZGlmaWVycyBvYmplY3RzLlxyXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gVG90YWwgcHJpY2UuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBnZXRNb2RpZmllcnNQcmljZShtb2RpZmllcnNBcnIpIHtcbiAgICAgICAgICAgIHZhciB0b3RhbFByaWNlID0gMDtcblxuICAgICAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yID0gbW9kaWZpZXJzQXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kaWZpZXIgPSBfc3RlcC52YWx1ZTtcblxuICAgICAgICAgICAgICAgICAgICB0b3RhbFByaWNlICs9IG1vZGlmaWVyLnByaWNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0b3RhbFByaWNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2dldEluZGV4RWRpdE1lYWxcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gaW5kZXggZm8gZWRpdCBtZWFsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBJbmRleCBvZiBlZGl0IG1lYWwuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBnZXRJbmRleEVkaXRNZWFsKCkge1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4RWRpdE1lYWw7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3Rvcnkjc2V0SW5kZXhFZGl0TWVhbFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFNldCBpbmRleCBvZiBlZGl0IG1lYWwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggb2YgZWRpdCBtZWFsLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gc2V0SW5kZXhFZGl0TWVhbChpbmRleCkge1xuICAgICAgICAgICAgaW5kZXhFZGl0TWVhbCA9IGluZGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2dldENhcnRMaXN0Q291bnRcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gY291bnQgb2YgZWxlbWVudHMgaW4gY2FydCBsaXN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBDYXJ0IGxpc3QgbGVuZ3RoLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2FydExpc3RDb3VudCgpIHtcbiAgICAgICAgICAgIHJldHVybiBjYXJ0TGlzdC5sZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjYWRkTW9kaWZpZXJzVG9MaXN0XHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQWRkIG1vZGlmaWVycyB0byBsaXN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gbW9kaWYgQXJyYXkgd2l0aCBtb2RpZmllcnMgb2JqZWN0cy5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGFkZE1vZGlmaWVyc1RvTGlzdChtb2RpZikge1xuICAgICAgICAgICAgbW9kaWZpZXJzID0gbW9kaWY7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjYWRkTWVhbFRvQ2FydExpc3RcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBBZGQgbWVhbCB0byBjYXJ0IGxpc3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gbWVhbCBNZWFsIG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IEFtb3VudCBvZiBtZWFsLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gYWRkTWVhbFRvQ2FydExpc3QobWVhbCwgYW1vdW50KSB7XG4gICAgICAgICAgICB2YXIgbmV3TWVhbCA9IHt9O1xuXG4gICAgICAgICAgICBuZXdNZWFsLmlkID0gbWVhbC5pZDtcbiAgICAgICAgICAgIG5ld01lYWwubmFtZSA9IG1lYWwubmFtZTtcbiAgICAgICAgICAgIG5ld01lYWwucHJpY2UgPSBtZWFsLnByaWNlO1xuICAgICAgICAgICAgbmV3TWVhbC5hbW91bnQgPSBhbW91bnQ7XG5cbiAgICAgICAgICAgIGlmIChtb2RpZmllcnMpIHtcbiAgICAgICAgICAgICAgICBuZXdNZWFsLm1vZGlmaWVycyA9IG1vZGlmaWVycy5zbGljZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtb2RpZmllcnMgPSBudWxsO1xuICAgICAgICAgICAgY2FydExpc3QucHVzaChuZXdNZWFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNnZXRDYXJ0TGlzdFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBjYXJ0IGxpc3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3RbXX0gQ2FydCBsaXN0LlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2FydExpc3QoKSB7XG4gICAgICAgICAgICByZXR1cm4gY2FydExpc3Q7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjZ2V0VG90YWxQcmljZVxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBjYXJ0IGxpc3QgdG90YWwgcHJpY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IENhcnQgbGlzdCB0b3RhbCBwcmljZS5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGdldFRvdGFsUHJpY2UoKSB7XG4gICAgICAgICAgICB2YXIgdG90YWxQcmljZSA9IDA7XG5cbiAgICAgICAgICAgIGlmIChjYXJ0TGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNhcnRMaXN0Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdG90YWxQcmljZSArPSBjYXJ0TGlzdFtpXS5wcmljZSAqIGNhcnRMaXN0W2ldLmFtb3VudDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FydExpc3RbaV0ubW9kaWZpZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFByaWNlICs9IGdldE1vZGlmaWVyc1ByaWNlKGNhcnRMaXN0W2ldLm1vZGlmaWVycykgKiBjYXJ0TGlzdFtpXS5hbW91bnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0b3RhbFByaWNlLnRvRml4ZWQoMik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjZGVsZXRlTW9kaWZpZXJzXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmVzZXQgbW9kaWZpZXJzIHZhbHVlLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlTW9kaWZpZXJzKCkge1xuICAgICAgICAgICAgbW9kaWZpZXJzID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNyZW1vdmVNZWFsXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmVtb3ZlIGVkaXQgbWVhbCBvZiBjYXJ0IGxpc3QuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiByZW1vdmVNZWFsKCkge1xuICAgICAgICAgICAgY2FydExpc3Quc3BsaWNlKGluZGV4RWRpdE1lYWwsIDEpO1xuICAgICAgICB9XG4gICAgfVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRhbmd1bGFyLm1vZHVsZShcIk1lYWxzXCIpLmZhY3RvcnkoXCJNZWFsc0ZhY3RvcnlcIiwgTWVhbHNGYWN0b3J5KTtcblxuXHQvKipcclxuICAqIEBuZ2RvYyBzZXJ2aWNlXHJcbiAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAqIEByZXF1aXJlcyAkaHR0cFxyXG4gICogQHJlcXVpcmVzICRxXHJcbiAgKlxyXG4gICogQGRlc2NyaXB0aW9uXHJcbiAgKiBGYWN0b3J5IGdldCBjdXJyZW5jeSwgYXJyYXkgb2YgcHJvZHVjdHMgYW5kIGFycmF5IG9mIGRyaW5rcyxcclxuICAqIGFuZCB3b3JrIHdpdGggY3VycmVudCBtZWFsLlxyXG4gICpcclxuICAqKi9cblx0ZnVuY3Rpb24gTWVhbHNGYWN0b3J5KCRodHRwLCAkcSkge1xuXG5cdFx0dmFyIG1lYWxBcGlVcmwgPSBcIm1lYWxzLmpzb25cIixcblx0XHQgICAgbWVhbHMgPSBudWxsLFxuXHRcdCAgICBjdXJyZW5jeSA9IFwiXCIsXG5cdFx0ICAgIGN1cnJlbnRNZWFsID0gbnVsbCxcblx0XHQgICAgY3VycmVudE1lYWxTdGF0dXMgPSBcIm5ld1wiLFxuXHRcdCAgICBjdXJyZW50QW1vdW50ID0gMSxcblx0XHQgICAgZmFjdG9yeSA9IHtcblx0XHRcdGdldE1vZGlmaWVyczogZ2V0TW9kaWZpZXJzLFxuXHRcdFx0Z2V0TWVhbHM6IGdldE1lYWxzLFxuXHRcdFx0Z2V0Q3VycmVudE1lYWw6IGdldEN1cnJlbnRNZWFsLFxuXHRcdFx0c2V0Q3VycmVudE1lYWw6IHNldEN1cnJlbnRNZWFsLFxuXHRcdFx0Z2V0Q3VycmVudE1lYWxTdGF0dXM6IGdldEN1cnJlbnRNZWFsU3RhdHVzLFxuXHRcdFx0c2V0Q3VycmVudE1lYWxTdGF0dXM6IHNldEN1cnJlbnRNZWFsU3RhdHVzLFxuXHRcdFx0Z2V0Q3VycmVuY3k6IGdldEN1cnJlbmN5LFxuXHRcdFx0Z2V0Q3VycmVudE1lYWxBbW91bnQ6IGdldEN1cnJlbnRNZWFsQW1vdW50LFxuXHRcdFx0c2V0Q3VycmVudE1lYWxBbW91bnQ6IHNldEN1cnJlbnRNZWFsQW1vdW50LFxuXHRcdFx0c2V0Q3VycmVudE1lYWxCeUlkOiBzZXRDdXJyZW50TWVhbEJ5SWQsXG5cdFx0XHRvcGVuTWVhbDogb3Blbk1lYWxcblx0XHR9O1xuXG5cdFx0cmV0dXJuIGZhY3Rvcnk7XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I29wZW5NZWFsXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0IGN1cnJlbnQgbWVhbCwgY3VycmVudCBtZWFsIHN0YXR1cyBhbmQgY3VycmVudCBtZWFsIGFtb3VudC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBtZWFsICAgQ3VycmVudCBtZWFsLlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0dXMgTWVhbCBzdGF0dXMoXCJuZXdcIiBvciBcImVkaXRcIikuXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCBNZWFsIGFtb3VudC5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gb3Blbk1lYWwobWVhbCwgc3RhdHVzLCBhbW91bnQpIHtcblx0XHRcdHNldEN1cnJlbnRNZWFsKG1lYWwpO1xuXHRcdFx0c2V0Q3VycmVudE1lYWxTdGF0dXMoc3RhdHVzKTtcblx0XHRcdHNldEN1cnJlbnRNZWFsQW1vdW50KGFtb3VudCk7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRNZWFsc0Zyb21IdHRwXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIE9idGFpbmluZyBkYXRhIG9uIGZvb2RzIGFuZCBkcmlua3MgZnJvbSB0aGUgc2VydmVyLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IGRlZmVycmVkIERlZmVycmVkIG9iamVjdC5cclxuICAgKiBAcmV0dXJuIHtvYmplY3R9IERlZmVycmVkIG9iamVjdCB3aXRoIHJlc29sdmUgYW5kIHJlamVjdC5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gZ2V0TWVhbHNGcm9tSHR0cChkZWZlcnJlZCkge1xuXG5cdFx0XHQkaHR0cCh7IG1ldGhvZDogXCJHRVRcIiwgdXJsOiBtZWFsQXBpVXJsIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblx0XHRcdFx0bWVhbHMgPSBkYXRhO1xuXHRcdFx0XHRjdXJyZW5jeSA9IGRhdGEuY3VycmVuY3k7XG5cblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcblx0XHRcdH0pLmVycm9yKGZ1bmN0aW9uIChkYXRhLCBzdGF0dXMpIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KFwiRXJyb3IgaW4gJGh0dHAgcmVxdWVzdFwiKTtcblxuXHRcdFx0XHRjb25zb2xlLmxvZyhkYXRhKTtcblx0XHRcdFx0Y29uc29sZS5sb2coc3RhdHVzKTtcblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQ7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRNb2RpZmllcnNcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogSWYgbWVhbHMgaGF2ZSBtb2RpZmllcnMgcmV0dXJuIHRoZW0gZWxzZSByZXR1cm4gZmFsc2VcclxuICAgKlxyXG4gICAqIEByZXR1cm4ge29iamVjdHxib29sZWFufSBDdXJyZW50IG1lYWwgbW9kaWZpZXJzIG9yIGZhbHNlLlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBnZXRNb2RpZmllcnMoKSB7XG5cblx0XHRcdGlmIChjdXJyZW50TWVhbCAhPT0gbnVsbCkge1xuXHRcdFx0XHRyZXR1cm4gY3VycmVudE1lYWwubW9kaWZpZXJzO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0TWVhbHNcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmV0dXJuIHByb21pc2Ugd2l0aCB0aGUgcmVzcG9uc2UgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIG9yXHJcbiAgICogaWYgdGhlIHJlcXVlc3QgaGFzIGFscmVhZHkgYmVlbiwgcmV0dXJuIHByb21pc2Ugd2l0aCB0aGVcclxuICAgKiBtZWFscyBvYmplY3QuXHJcbiAgICpcclxuICAgKiBAcmV0dXJuIHtvYmplY3R9IFByb21pc2UuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIGdldE1lYWxzKCkge1xuXHRcdFx0dmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuXHRcdFx0aWYgKCFtZWFscykge1xuXHRcdFx0XHRkZWZlcnJlZCA9IGdldE1lYWxzRnJvbUh0dHAoZGVmZXJyZWQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShtZWFscyk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0Q3VycmVudE1lYWxcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmV0dXJuIGN1cnJlbnQgbWVhbC5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge29iamVjdH0gQ3VycmVudCBtZWFsLlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBnZXRDdXJyZW50TWVhbCgpIHtcblx0XHRcdHJldHVybiBjdXJyZW50TWVhbDtcblx0XHR9XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I3NldEN1cnJlbnRNZWFsXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFNldCBjdXJyZW50IG1lYWwuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge29iamVjdH0gbWVhbCBDdXJyZW50IG1lYWwuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIHNldEN1cnJlbnRNZWFsKG1lYWwpIHtcblx0XHRcdGN1cnJlbnRNZWFsID0gbWVhbDtcblx0XHR9XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldEN1cnJlbnRNZWFsU3RhdHVzXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFJldHVybiBjdXJyZW50IG1lYWwgc3RhdHVzKFwibmV3XCIgb3IgXCJlZGl0XCIpLlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW50IG1lYWwgc3RhdHVzKFwibmV3XCIgb3IgXCJlZGl0XCIpLlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBnZXRDdXJyZW50TWVhbFN0YXR1cygpIHtcblx0XHRcdHJldHVybiBjdXJyZW50TWVhbFN0YXR1cztcblx0XHR9XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I3NldEN1cnJlbnRNZWFsU3RhdHVzXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFNldCBjdXJyZW50IG1lYWwgc3RhdHVzKFwibmV3XCIgb3IgXCJlZGl0XCIpLlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHN0YXR1cyBDdXJyZW50IG1lYWwgc3RhdHVzKFwibmV3XCIgb3IgXCJlZGl0XCIpLlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBzZXRDdXJyZW50TWVhbFN0YXR1cyhzdGF0dXMpIHtcblx0XHRcdGN1cnJlbnRNZWFsU3RhdHVzID0gc3RhdHVzO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0Q3VycmVuY3lcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogUmV0dXJuIGN1cnJlbmN5LlxyXG4gICAqXHJcbiAgICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW5jeS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gZ2V0Q3VycmVuY3koKSB7XG5cdFx0XHRyZXR1cm4gY3VycmVuY3k7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRDdXJyZW50TWVhbEFtb3VudFxyXG4gICAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBSZXR1cm4gY3VycmVudCBtZWFsIGFtb3VudC5cclxuICAgKlxyXG4gICAqIEByZXR1cm4ge251bWJlcn0gQ3VycmVudCBtZWFsIGFtb3VudC5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gZ2V0Q3VycmVudE1lYWxBbW91bnQoKSB7XG5cdFx0XHRyZXR1cm4gY3VycmVudEFtb3VudDtcblx0XHR9XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I3NldEN1cnJlbnRNZWFsQW1vdW50XHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIFNldCBjdXJyZW50IG1lYWwgYW1vdW50LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCBDdXJyZW50IG1lYWwgYW1vdW50LlxyXG4gICAqKi9cblx0XHRmdW5jdGlvbiBzZXRDdXJyZW50TWVhbEFtb3VudChhbW91bnQpIHtcblx0XHRcdGN1cnJlbnRBbW91bnQgPSBhbW91bnQ7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNzZXRDdXJyZW50TWVhbEJ5SWRcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogU2V0IGN1cnJlbnQgbWVhbCBieSBpZC5cclxuICAgKlxyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJZCBvZiBjdXJyZW50IG1lYWwuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIHNldEN1cnJlbnRNZWFsQnlJZChpZCkge1xuXG5cdFx0XHRjdXJyZW50TWVhbCA9IG1lYWxzLnByb2R1Y3RzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuXHRcdFx0XHRyZXR1cm4gaXRlbS5pZCA9PT0gaWQ7XG5cdFx0XHR9KVswXTtcblxuXHRcdFx0aWYgKCFjdXJyZW50TWVhbCkge1xuXHRcdFx0XHRjdXJyZW50TWVhbCA9IG1lYWxzLmRyaW5rcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcblx0XHRcdFx0XHRyZXR1cm4gaXRlbS5pZCA9PT0gaWQ7XG5cdFx0XHRcdH0pWzBdO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKS5mYWN0b3J5KFwiTW9kaWZpZXJzRmFjdG9yeVwiLCBNb2RpZmllcnNGYWN0b3J5KTtcblxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAqIEBuYW1lIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAqIEByZXF1aXJlcyBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogRmFjdG9yeSB3b3JrIHdpdGggbW9kaWZpZXJzLlxyXG4gICAgICpcclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBNb2RpZmllcnNGYWN0b3J5KENhcnRGYWN0b3J5KSB7XG5cbiAgICAgICAgdmFyIGZhY3RvcnkgPSB7XG4gICAgICAgICAgICBnZXRDaGVja2VkTW9kaWZpZXJzOiBnZXRDaGVja2VkTW9kaWZpZXJzLFxuICAgICAgICAgICAgbW9kaWZpZXJIYXNCZWVuU2VsZWN0ZWQ6IG1vZGlmaWVySGFzQmVlblNlbGVjdGVkLFxuICAgICAgICAgICAgZGVsZXRlTW9kaWZpZXI6IGRlbGV0ZU1vZGlmaWVyLFxuICAgICAgICAgICAgc2VsZWN0TW9kaWZpZXI6IHNlbGVjdE1vZGlmaWVyLFxuICAgICAgICAgICAgcGlja0NoZWNrZWRNb2RpZmllcnM6IHBpY2tDaGVja2VkTW9kaWZpZXJzXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnkjZ2V0Q2hlY2tlZE1vZGlmaWVyc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5Nb2RpZmllcnNGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIGFycmF5IHdpdGggbW9kaWZpZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7b2JqZWN0W119IEFycmF5IG9mIG1vZGlmaWVycyBvYmplY3RzLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2hlY2tlZE1vZGlmaWVycygpIHtcbiAgICAgICAgICAgIHZhciBjYXJ0TGlzdCA9IENhcnRGYWN0b3J5LmdldENhcnRMaXN0KClbQ2FydEZhY3RvcnkuZ2V0SW5kZXhFZGl0TWVhbCgpXTtcbiAgICAgICAgICAgIHJldHVybiBjYXJ0TGlzdC5tb2RpZmllcnM7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeSNtb2RpZmllckhhc0JlZW5TZWxlY3RlZFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5Nb2RpZmllcnNGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIHRydWUgaWYgbW9kaWZpZXIgaGFzIGJlZW4gc2VsZWN0ZWQsIG9yIGZhbHNlIGlmIG5vLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gc2VsZWN0ZWRNb2RpZmllcnMgQXJyYXkgd2l0aCBzZWxlY3RlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1vZGlmaWVyIE1vZGlmaWVyIG9iamVjdC5cclxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1vZGlmaWVyIGhhcyBiZWVuIHNlbGVjdGVkLCBlbHNlIGZhbHNlLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gbW9kaWZpZXJIYXNCZWVuU2VsZWN0ZWQoc2VsZWN0ZWRNb2RpZmllcnMsIG1vZGlmaWVyKSB7XG4gICAgICAgICAgICByZXR1cm4gc2VsZWN0ZWRNb2RpZmllcnMuc29tZShmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtb2RpZmllci5uYW1lID09PSBpdGVtLm5hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I2RlbGV0ZU1vZGlmaWVyXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBEZWxldGUgbW9kaWZpZXIgYXQgYXJyYXkgc2VsZWN0ZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gc2VsZWN0ZWRNb2RpZmllcnMgQXJyYXkgd2l0aCBzZWxlY3RlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1vZGlmaWVyIE1vZGlmaWVyIG9iamVjdCB3aG8gYmUgZGVsZXRlZC5cclxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3RbXX0gTmV3IGFycmF5IG9mIG1vZGlmaWVycy5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZU1vZGlmaWVyKHNlbGVjdGVkTW9kaWZpZXJzLCBtb2RpZmllcikge1xuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTW9kaWZpZXJzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtb2RpZmllci5uYW1lICE9PSBpdGVtLm5hbWU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I3NlbGVjdE1vZGlmaWVyXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBBZGQgbW9kaWZpZXIgaWYgaXQgbm90IGhhcyBiZWVuIHNlbGVjdGVkLCBlbHNlIGRlbGV0ZSBtb2RpZmllciBhdFxyXG4gICAgICAgICAqIGFycmF5IG9mIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IHNlbGVjdGVkTW9kaWZpZXJzIEFycmF5IHdpdGggc2VsZWN0ZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtb2RpZmllciBNb2RpZmllciBvYmplY3QuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBzZWxlY3RNb2RpZmllcihzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpIHtcblxuICAgICAgICAgICAgaWYgKCFtb2RpZmllckhhc0JlZW5TZWxlY3RlZChzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRNb2RpZmllcnMucHVzaChtb2RpZmllcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkTW9kaWZpZXJzID0gZGVsZXRlTW9kaWZpZXIoc2VsZWN0ZWRNb2RpZmllcnMsIG1vZGlmaWVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQ2FydEZhY3RvcnkuYWRkTW9kaWZpZXJzVG9MaXN0KHNlbGVjdGVkTW9kaWZpZXJzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I3BpY2tDaGVja2VkTW9kaWZpZXJzXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBQaWNrIGFsbCBjaGVja2VkIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IG1vZGlmaWVycyBBbGwgbW9kaWZpZXJzIG9mIGN1cnJlbnQgbWVhbC5cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBzZWxlY3RlZE1vZGlmaWVycyBBcnJheSB3aGVyZSB3aWxsIGJlIHBsYWNlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gY2hlY2tlZE1vZGlmaWVycyBBcnJheSB3aXRoIGNoZWNrZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gcGlja0NoZWNrZWRNb2RpZmllcnMobW9kaWZpZXJzLCBzZWxlY3RlZE1vZGlmaWVycywgY2hlY2tlZE1vZGlmaWVycykge1xuXG4gICAgICAgICAgICBpZiAoY2hlY2tlZE1vZGlmaWVycykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5DaGVja2VkTW9kaWZpZXJzID0gY2hlY2tlZE1vZGlmaWVycy5sZW5ndGg7IGkgPCBsZW5DaGVja2VkTW9kaWZpZXJzOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbGVuTW9kaWZpZXJzID0gbW9kaWZpZXJzLmxlbmd0aDsgaiA8IGxlbk1vZGlmaWVyczsgaisrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RpZmllcnNbal0ubmFtZSA9PT0gY2hlY2tlZE1vZGlmaWVyc1tpXS5uYW1lKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RpZmllcnNbal0uY2hlY2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdE1vZGlmaWVyKHNlbGVjdGVkTW9kaWZpZXJzLCBtb2RpZmllcnNbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSkoKTtcblwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmFwcFBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2Ugb2YgYXBwLlxyXG4gICAgICpcclxuICAgICAqIEB1c2FnZSA8YXBwLXBhZ2U+PC9hcHAtcGFnZT5cclxuICAgICAqKi9cbiAgICAuY29tcG9uZW50KFwiYXBwUGFnZVwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvYXBwL3RlbXBsYXRlL2FwcFBhZ2UuaHRtbFwiLFxuICAgICAgICBiaW5kaW5nczoge30sXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJhcHBcIixcbiAgICAgICAgY29udHJvbGxlcjogQXBwQ29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpBcHBDb250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImFwcFBhZ2VcIi5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBBcHBDb250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpjYXJ0UGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBjYXJ0IHBhZ2UuXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxjYXJ0LXBhZ2U+PC9jYXJ0LXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcImNhcnRQYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9jYXJ0L3RlbXBsYXRlL2NhcnRQYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwiY2FydFwiLFxuICAgICAgICBjb250cm9sbGVyOiBDYXJ0Q29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpDYXJ0Q29udHJvbGxlclxyXG4gICAgICogQHJlcXVpcmVzIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAgICogQHJlcXVpcmVzIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgKiBAcHJvcGVydHkge3N0cmluZ30gY3VycmVuY3kgQ3VycmVuY3kuXHJcbiAgICAgKiBAcHJvcGVydHkge29iamVjdFtdfSAgY2FydExpc3QgQXJyYXkgb2Ygc2VsZWN0IG1lYWxzIGFuZCBkcmlua3MuXHJcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gdG90YWxQcmljZSBUb3RhbCBwcmljZS5cclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiY2FydFBhZ2VcIi5cclxuICAgICAqIERpc3BsYXkgdXNlci1zZWxlY3RlZCBtZWFscyBhbmQgZHJpbmtzIGFuZCB0aGVpciB0b3RhbCBwcmljZS5cclxuICAgICAqIFByb3ZpZGVzIHRoZSBhYmlsaXR5IHRvIGVkaXQgdGhlaXIgY2hvaWNlLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIENhcnRDb250cm9sbGVyKE1lYWxzRmFjdG9yeSwgQ2FydEZhY3RvcnkpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgICAgIHZtLmN1cnJlbmN5ID0gTWVhbHNGYWN0b3J5LmdldEN1cnJlbmN5KCk7XG4gICAgICAgIHZtLmNhcnRMaXN0ID0gQ2FydEZhY3RvcnkuZ2V0Q2FydExpc3QoKTtcbiAgICAgICAgdm0udG90YWxQcmljZSA9IENhcnRGYWN0b3J5LmdldFRvdGFsUHJpY2UoKTtcbiAgICAgICAgdm0uZWRpdE1lYWwgPSBlZGl0TWVhbDtcblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpDYXJ0Q29udHJvbGxlciNlZGl0TWVhbFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOkNhcnRDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogT3BlbiBtZWFsIGZvciBlZGl0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1lYWwgTWVhbCBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEN1cnJlbnQgbWVhbCBpbmRleC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGVkaXRNZWFsKG1lYWwsIGluZGV4KSB7XG4gICAgICAgICAgICBDYXJ0RmFjdG9yeS5zZXRJbmRleEVkaXRNZWFsKGluZGV4KTtcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5zZXRDdXJyZW50TWVhbEJ5SWQobWVhbC5pZCk7XG4gICAgICAgICAgICBNZWFsc0ZhY3Rvcnkuc2V0Q3VycmVudE1lYWxBbW91bnQobWVhbC5hbW91bnQpO1xuICAgICAgICAgICAgTWVhbHNGYWN0b3J5LnNldEN1cnJlbnRNZWFsU3RhdHVzKFwiZWRpdFwiKTtcbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpjYXJ0SWNvblBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2Ugb2YgY2FydCBidXR0b24gYW5kIHN0cmluZyB3aXRoIG1lYWxzIGNvdW50LlxyXG4gICAgICogQWNjZXB0cyBmcm9tIHBhcmVudCBjb250cm9sbGVyIGNvdW50IG1lYWxzIGluIGNhcnQgaW4gdmFyaWFibGUgXCJjb3VudFwiLlxyXG4gICAgICpcclxuICAgICAqIEB1c2FnZSA8Y2FydC1pY29uLXBhZ2U+PC9jYXJ0LWljb24tcGFnZT5cclxuICAgICAqKi9cbiAgICAuY29tcG9uZW50KFwiY2FydEljb25QYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9jYXJ0SWNvbi90ZW1wbGF0ZS9jYXJ0SWNvblBhZ2UuaHRtbFwiLFxuICAgICAgICBiaW5kaW5nczoge1xuICAgICAgICAgICAgY291bnQ6IFwiQFwiXG4gICAgICAgIH0sXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJjYXJ0SWNvblwiLFxuICAgICAgICBjb250cm9sbGVyOiBDYXJ0SWNvbkNvbnRyb2xsZXJcbiAgICB9KTtcblxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6Q2FydEljb25Db250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImNhcnRJY29uUGFnZVwiLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIENhcnRJY29uQ29udHJvbGxlcigpIHt9XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcIk1lYWxzXCIpXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6ZHJpbmtzTGlzdFxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBsaXN0IG9mIGRyaW5rcy5cclxuICAgICAqXHJcbiAgICAgKiBAdXNhZ2UgPGRyaW5rcy1saXN0PjwvZHJpbmtzLWxpc3Q+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcImRyaW5rc0xpc3RcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL2RyaW5rc0xpc3QvdGVtcGxhdGUvZHJpbmtzTGlzdC5odG1sXCIsXG4gICAgICAgIGJpbmRpbmdzOiB7fSxcbiAgICAgICAgY29udHJvbGxlckFzOiBcImRyaW5rc0xpc3RcIixcbiAgICAgICAgY29udHJvbGxlcjogRHJpbmtzTGlzdENvbnRyb2xsZXJcbiAgICB9KTtcblxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6RHJpbmtzTGlzdENvbnRyb2xsZXJcclxuICAgICAqIEByZXF1aXJlcyBNZWFscy5NZWFsc0ZhY3RvcnlcclxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjdXJyZW5jeSBDdXJyZW5jeS5cclxuICAgICAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gb25seVNvZnREcmlua3MgVmFyaWFibGUgaW5kaWNhdGluZyBzZWxlY3Qgb25seSBzb2Z0IGRyaW5rIG9yIG5vLlxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJkcmlua3NMaXN0XCIuXHJcbiAgICAgKiBIYW5kbGUgYSB1c2VyIGNob2ljZSBhYm91dCBkcmluay5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBEcmlua3NMaXN0Q29udHJvbGxlcihNZWFsc0ZhY3RvcnkpIHtcblxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xuICAgICAgICB2YXIgZHJpbmtzID0gW107XG5cbiAgICAgICAgdm0ub25seVNvZnREcmlua3MgPSBmYWxzZTtcbiAgICAgICAgdm0uY3VycmVuY3kgPSBcIlwiO1xuICAgICAgICB2bS5vcGVuRHJpbmsgPSBvcGVuRHJpbms7XG4gICAgICAgIHZtLmdldERyaW5rc0ZvclZpZXcgPSBnZXREcmlua3NGb3JWaWV3O1xuXG4gICAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6RHJpbmtzTGlzdENvbnRyb2xsZXIjYWN0aXZhdGVcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlclxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIE1ldGhvZCB0byBpbml0aWFsaXplIGRhdGEuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5nZXRNZWFscygpLnRoZW4oZ2V0RHJpbmtzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkRyaW5rc0xpc3RDb250cm9sbGVyI2dldERyaW5rc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOkRyaW5rc0xpc3RDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQXNzaWduaW5nIGEgZGF0YSBhdCBwcm9wZXJ0aWVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IGRyaW5rc09iaiBEcmlua3Mgb2JqZWN0IGNvbnRhaW5zIGN1cnJlbmN5IGFuZCBkcmlua3MgYXJyYXkuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBnZXREcmlua3MoZHJpbmtzT2JqKSB7XG4gICAgICAgICAgICB2bS5jdXJyZW5jeSA9IGRyaW5rc09iai5jdXJyZW5jeTtcbiAgICAgICAgICAgIGRyaW5rcyA9IGRyaW5rc09iai5kcmlua3M7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlciNvcGVuRHJpbmtcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlclxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENhbGwgbWV0aG9kIG9wZW5NZWFsIG93bmVkIE1lYWxzRmFjdG9yeS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBkcmluayBEcmluayBvYmplY3QuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBvcGVuRHJpbmsoZHJpbmspIHtcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5vcGVuTWVhbChkcmluaywgXCJuZXdcIiwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlciNnZXREcmlua3NGb3JWaWV3XHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6RHJpbmtzTGlzdENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gYWxsIGRyaW5rcyBvciBvbmx5IHNvZnQgZHJpbmtzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7b2JqZWN0W119IEFycmF5IG9mIGRyaW5rcy5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGdldERyaW5rc0ZvclZpZXcoKSB7XG5cbiAgICAgICAgICAgIGlmICh2bS5vbmx5U29mdERyaW5rcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBkcmlua3MuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLnRpcHBsZSAhPT0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyaW5rcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTplcnJvclBhZ2VcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2Ugb2YgZXJyb3IgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAdXNhZ2UgPGVycm9yLXBhZ2U+PC9lcnJvci1wYWdlPlxyXG4gICAgICoqL1xuICAgIC5jb21wb25lbnQoXCJlcnJvclBhZ2VcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL2Vycm9yL3RlbXBsYXRlL2Vycm9yUGFnZS5odG1sXCIsXG4gICAgICAgIGJpbmRpbmdzOiB7fSxcbiAgICAgICAgY29udHJvbGxlckFzOiBcImVycm9yXCIsXG4gICAgICAgIGNvbnRyb2xsZXI6IEVycm9yQ29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpFcnJvckNvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwiZXJyb3JQYWdlXCIuXHJcbiAgICAgKiovXG4gICAgZnVuY3Rpb24gRXJyb3JDb250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpmb290ZXJQYWdlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIGZvb3RlciBzZWN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEB1c2FnZSA8Zm9vdGVyLXBhZ2U+PC9mb290ZXItcGFnZT5cclxuICAgICAqKi9cbiAgICAuY29tcG9uZW50KFwiZm9vdGVyUGFnZVwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvZm9vdGVyL3RlbXBsYXRlL2Zvb3RlclBhZ2UuaHRtbFwiLFxuICAgICAgICBiaW5kaW5nczoge30sXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJmb290ZXJcIixcbiAgICAgICAgY29udHJvbGxlcjogRm9vdGVyQ29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpGb290ZXJDb250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImZvb3RlclBhZ2VcIi5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBGb290ZXJDb250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpoZWFkZXJQYWdlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIGhlYWRlciBzZWN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEB1c2FnZSA8aGVhZGVyLXBhZ2U+PC9oZWFkZXItcGFnZT5cclxuICAgICAqKi9cbiAgICAuY29tcG9uZW50KFwiaGVhZGVyUGFnZVwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvaGVhZGVyL3RlbXBsYXRlL2hlYWRlclBhZ2UuaHRtbFwiLFxuICAgICAgICBiaW5kaW5nczoge30sXG4gICAgICAgIGNvbnRyb2xsZXJBczogXCJoZWFkZXJcIixcbiAgICAgICAgY29udHJvbGxlcjogSGVhZGVyQ29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpIZWFkZXJDb250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImhlYWRlclBhZ2VcIi5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpsb2dvUGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBsb2dvIHNlY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxsb2dvLXBhZ2U+PC9sb2dvLXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcImxvZ29QYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9sb2dvL3RlbXBsYXRlL2xvZ29QYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwibG9nb1wiLFxuICAgICAgICBjb250cm9sbGVyOiBMb2dvQ29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpMb2dvQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJsb2dvUGFnZVwiLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIExvZ29Db250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptYWluUGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBtYWluIHNlY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxtYWluLXBhZ2U+PC9tYWluLXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcIm1haW5QYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tYWluL3RlbXBsYXRlL21haW5QYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwibWFpblwiLFxuICAgICAgICBjb250cm9sbGVyOiBNYWluQ29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNYWluQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtYWluUGFnZVwiLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIE1haW5Db250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0YW5ndWxhci5tb2R1bGUoXCJNZWFsc1wiKVxuXHQvKipcclxuICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptZWFsUGFnZVxyXG4gICpcclxuICAqIEBkZXNjcmlwdGlvblxyXG4gICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSBvZiBtZWFsLlxyXG4gICogQWNjZXB0cyBmcm9tIHBhcmVudCBjb250cm9sbGVyIHBhdGggd2hlcmUgdGhlIHVzZXIgY2FtZSBpbiB2YXJpYWJsZSBcInBhdGhcIi5cclxuICAqXHJcbiAgKiBAdXNhZ2UgPG1lYWwtcGFnZT48L21lYWwtcGFnZT5cclxuICAqKi9cblx0LmNvbXBvbmVudChcIm1lYWxQYWdlXCIsIHtcblx0XHR0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL21lYWwvdGVtcGxhdGUvbWVhbFBhZ2UuaHRtbFwiLFxuXHRcdGJpbmRpbmdzOiB7XG5cdFx0XHRwYXRoOiBcIkBcIlxuXHRcdH0sXG5cdFx0Y29udHJvbGxlckFzOiBcIm1lYWxcIixcblx0XHRjb250cm9sbGVyOiBNZWFsQ29udHJvbGxlclxuXHR9KTtcblxuXHQvKipcclxuICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyXHJcbiAgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgKiBAcmVxdWlyZXMgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBjdXJyZW50TWVhbCBDdXJyZW50IG1lYWwuXHJcbiAgKiBAcHJvcGVydHkge3N0cmluZ30gY3VycmVuY3kgQ3VycmVuY3kuXHJcbiAgKiBAcHJvcGVydHkge251bWJlcn0gc2VsZWN0QW1vdW50IEN1cnJlbnQgbWVhbCBzZWxlY3QgYW1vdW50LlxyXG4gICogQHByb3BlcnR5IHtzdHJpbmd9IG1lYWxTdGF0dXMgQ3VycmVudCBtZWFsIHN0YXR1cy5cclxuICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBjYXJ0Q291bnQgQ291bnQgbWVhbCBpbiBjYXJ0LlxyXG4gICpcclxuICAqIEBkZXNjcmlwdGlvblxyXG4gICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtZWFsUGFnZVwiLlxyXG4gICogQWxsb3dzIHRoZSB1c2VyIHRvIGFkZCBtZWFsIHRvIGNhcnQsIGRlbGV0ZSBtZWFsLCBlZGl0IG1lYWwgYW5kIGV0Yy5cclxuICAqKi9cblx0ZnVuY3Rpb24gTWVhbENvbnRyb2xsZXIoTWVhbHNGYWN0b3J5LCBDYXJ0RmFjdG9yeSkge1xuXG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdHZtLmN1cnJlbnRNZWFsID0gTWVhbHNGYWN0b3J5LmdldEN1cnJlbnRNZWFsKCk7XG5cdFx0dm0uY3VycmVuY3kgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVuY3koKTtcblx0XHR2bS5zZWxlY3RBbW91bnQgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVudE1lYWxBbW91bnQoKTtcblx0XHR2bS5tZWFsU3RhdHVzID0gTWVhbHNGYWN0b3J5LmdldEN1cnJlbnRNZWFsU3RhdHVzKCk7XG5cdFx0dm0uY2FydENvdW50ID0gQ2FydEZhY3RvcnkuZ2V0Q2FydExpc3RDb3VudCgpO1xuXHRcdHZtLmFkZE1lYWwgPSBhZGRNZWFsO1xuXHRcdHZtLnJlbW92ZU1lYWwgPSByZW1vdmVNZWFsO1xuXHRcdHZtLnNhdmVNZWFsID0gc2F2ZU1lYWw7XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsQ29udHJvbGxlciNhZGRNZWFsXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbENvbnRyb2xsZXJcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDYWxsIG1ldGhvZCBhZGRNZWFsVG9DYXJ0TGlzdCBvd25lZCBDYXJ0RmFjdG9yeS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gYWRkTWVhbCgpIHtcblx0XHRcdENhcnRGYWN0b3J5LmFkZE1lYWxUb0NhcnRMaXN0KHZtLmN1cnJlbnRNZWFsLCB2bS5zZWxlY3RBbW91bnQpO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyI3JlbW92ZU1lYWxcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpNZWFsQ29udHJvbGxlclxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIENhbGwgbWV0aG9kIHJlbW92ZU1lYWwgb3duZWQgQ2FydEZhY3RvcnlcclxuICAgKiBhbmQgbWV0aG9kIGRlbGV0ZU1vZGlmaWVycyBvd25lZCBDYXJ0RmFjdG9yeS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlTWVhbCgpIHtcblx0XHRcdENhcnRGYWN0b3J5LnJlbW92ZU1lYWwoKTtcblx0XHRcdENhcnRGYWN0b3J5LmRlbGV0ZU1vZGlmaWVycygpO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyI3NhdmVNZWFsXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbENvbnRyb2xsZXJcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBDYWxsIG1ldGhvZCByZW1vdmVNZWFsIG93bmVkIENhcnRGYWN0b3J5XHJcbiAgICogYW5kIG1ldGhvZCBhZGRNZWFsVG9DYXJ0TGlzdCBvd25lZCBDYXJ0RmFjdG9yeS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gc2F2ZU1lYWwoKSB7XG5cdFx0XHRDYXJ0RmFjdG9yeS5yZW1vdmVNZWFsKCk7XG5cdFx0XHR2bS5hZGRNZWFsKCk7XG5cdFx0fVxuXHR9XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcblx0LyoqXHJcbiAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6bWVhbHNMaXN0XHJcbiAgKlxyXG4gICogQGRlc2NyaXB0aW9uXHJcbiAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRvIGxpc3Qgb2YgbWVhbHMuXHJcbiAgKlxyXG4gICogQHVzYWdlIDxtZWFscy1saXN0PjwvbWVhbHMtbGlzdD5cclxuICAqKi9cblx0LmNvbXBvbmVudChcIm1lYWxzTGlzdFwiLCB7XG5cdFx0dGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tZWFsc0xpc3QvdGVtcGxhdGUvbWVhbHNMaXN0Lmh0bWxcIixcblx0XHRiaW5kaW5nczoge30sXG5cdFx0Y29udHJvbGxlckFzOiBcIm1lYWxzTGlzdFwiLFxuXHRcdGNvbnRyb2xsZXI6IE1lYWxzTGlzdENvbnRyb2xsZXJcblx0fSk7XG5cblx0LyoqXHJcbiAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyXHJcbiAgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgKiBAcHJvcGVydHkge3N0cmluZ30gY3VycmVuY3kgQ3VycmVuY3kuXHJcbiAgKiBAcHJvcGVydHkge29iamVjdFtdfSBwcm9kdWN0cyBBcnJheSBvZiBwcm9kdWN0cy5cclxuICAqXHJcbiAgKiBAZGVzY3JpcHRpb25cclxuICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwibWVhbHNMaXN0XCIuXHJcbiAgKiBIYW5kbGUgYSB1c2VyIGNob2ljZSBhYm91dCBtZWFsLlxyXG4gICoqL1xuXHRmdW5jdGlvbiBNZWFsc0xpc3RDb250cm9sbGVyKE1lYWxzRmFjdG9yeSkge1xuXG5cdFx0dmFyIHZtID0gdGhpcztcblxuXHRcdHZtLm9wZW5NZWFsID0gb3Blbk1lYWw7XG5cdFx0dm0uY3VycmVuY3kgPSBcIlwiO1xuXHRcdHZtLnByb2R1Y3RzID0gbnVsbDtcblxuXHRcdGFjdGl2YXRlKCk7XG5cblx0XHQvKipcclxuICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyI2FjdGl2YXRlXHJcbiAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlclxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqIE1ldGhvZCB0byBpbml0aWFsaXplIGRhdGEuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuXHRcdFx0TWVhbHNGYWN0b3J5LmdldE1lYWxzKCkudGhlbihnZXRQcm9kdWN0cyk7XG5cdFx0fVxuXG5cdFx0LyoqXHJcbiAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlciNnZXRQcm9kdWN0c1xyXG4gICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXJcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKiBBc3NpZ25pbmcgYSBkYXRhIGF0IHByb3BlcnRpZXMuXHJcbiAgICpcclxuICAgKiBAcGFyYW0ge29iamVjdH0gbWVhbHNPYmogTWVhbHMgb2JqZWN0IGNvbnRhaW5zIGN1cnJlbmN5IGFuZCBwcm9kdWN0cyBhcnJheS5cclxuICAgKiovXG5cdFx0ZnVuY3Rpb24gZ2V0UHJvZHVjdHMobWVhbHNPYmopIHtcblx0XHRcdHZtLmN1cnJlbmN5ID0gbWVhbHNPYmouY3VycmVuY3k7XG5cdFx0XHR2bS5wcm9kdWN0cyA9IG1lYWxzT2JqLnByb2R1Y3RzO1xuXHRcdH1cblxuXHRcdC8qKlxyXG4gICAqIEBuZ2RvYyBtZXRob2RcclxuICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXIjb3Blbk1lYWxcclxuICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICogQ2FsbCBtZXRob2Qgb3Blbk1lYWwgb3duZWQgTWVhbHNGYWN0b3J5LlxyXG4gICAqXHJcbiAgICogQHBhcmFtIHtvYmplY3R9IG1lYWwgTWVhbCBvYmplY3QuXHJcbiAgICoqL1xuXHRcdGZ1bmN0aW9uIG9wZW5NZWFsKG1lYWwpIHtcblx0XHRcdE1lYWxzRmFjdG9yeS5vcGVuTWVhbChtZWFsLCBcIm5ld1wiLCAxKTtcblx0XHR9XG5cdH1cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptZW51UGFnZVxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBtZW51IHNlY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHVzYWdlIDxtZW51LXBhZ2U+PC9tZW51LXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcIm1lbnVQYWdlXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tZW51L3RlbXBsYXRlL21lbnVQYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHt9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwibWVudVwiLFxuICAgICAgICBjb250cm9sbGVyOiBNZW51Q29udHJvbGxlclxuICAgIH0pO1xuXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZW51Q29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtZW51UGFnZVwiLlxyXG4gICAgICoqL1xuICAgIGZ1bmN0aW9uIE1lbnVDb250cm9sbGVyKCkge31cbn0pKCk7XG5cInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiTWVhbHNcIilcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptb2RpZmllcnNQYWdlXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIG9mIG1vZGlmaWVycyBzZWN0aW9uLlxyXG4gICAgICogQWNjZXB0cyBmcm9tIHBhcmVudCBjb250cm9sbGVyIGN1cnJlbmN5IGluIHZhcmlhYmxlIFwiY3VycmVuY3lcIi5cclxuICAgICAqXHJcbiAgICAgKiBAdXNhZ2UgPG1vZGlmaWVycy1wYWdlPjwvbW9kaWZpZXJzLXBhZ2U+XHJcbiAgICAgKiovXG4gICAgLmNvbXBvbmVudChcIm1vZGlmaWVyc1BhZ2VcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCJjb21wb25lbnQtdGVtcGxhdGVzL21vZGlmaWVycy90ZW1wbGF0ZS9tb2RpZmllcnNQYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHtcbiAgICAgICAgICAgIGN1cnJlbmN5OiBcIkBcIlxuICAgICAgICB9LFxuICAgICAgICBjb250cm9sbGVyQXM6IFwibW9kXCIsXG4gICAgICAgIGNvbnRyb2xsZXI6IE1vZGlmaWVyc0NvbnRyb2xsZXJcbiAgICB9KTtcblxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TW9kaWZpZXJzQ29udHJvbGxlclxyXG4gICAgICogQHJlcXVpcmVzIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAgICogQHJlcXVpcmVzIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAqIEBwcm9wZXJ0eSB7b2JqZWN0W119IG1vZGlmaWVycyBBcnJheSBvZiBtb2RpZmllcnMuXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcIm1vZGlmaWVyc1BhZ2VcIi5cclxuICAgICAqIEhhbmRsZSBhIHVzZXIgY2hvaWNlIGFib3V0IG1vZGlmaWVycy5cclxuICAgICAqKi9cbiAgICBmdW5jdGlvbiBNb2RpZmllcnNDb250cm9sbGVyKE1lYWxzRmFjdG9yeSwgTW9kaWZpZXJzRmFjdG9yeSkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG4gICAgICAgIHZhciBzZWxlY3RlZE1vZGlmaWVycyA9IFtdO1xuXG4gICAgICAgIHZtLm1vZGlmaWVycyA9IE1lYWxzRmFjdG9yeS5nZXRNb2RpZmllcnMoKTtcbiAgICAgICAgdm0uc2VsZWN0TW9kaWZpZXIgPSBzZWxlY3RNb2RpZmllcjtcblxuICAgICAgICBjbGVhblBpY2tNb2RpZmllcnMoKTtcblxuICAgICAgICBpZiAoTWVhbHNGYWN0b3J5LmdldEN1cnJlbnRNZWFsU3RhdHVzKCkgPT09IFwiZWRpdFwiKSB7XG4gICAgICAgICAgICAvL1BpY2sgY2hlY2tib3hlcyBmb3Igc2VsZWN0IG1vZGlmaWVyc1xuICAgICAgICAgICAgdmFyIGNoZWNrZWRNb2RpZmllcnMgPSBNb2RpZmllcnNGYWN0b3J5LmdldENoZWNrZWRNb2RpZmllcnMoKTtcbiAgICAgICAgICAgIE1vZGlmaWVyc0ZhY3RvcnkucGlja0NoZWNrZWRNb2RpZmllcnModm0ubW9kaWZpZXJzLCBzZWxlY3RlZE1vZGlmaWVycywgY2hlY2tlZE1vZGlmaWVycyk7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNb2RpZmllcnNDb250cm9sbGVyI2NsZWFuUGlja01vZGlmaWVyc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1vZGlmaWVyc0NvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDbGVhbiBwaWNrIG1vZGlmaWVycyBjaGVja2JveC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFuUGlja01vZGlmaWVycygpIHtcbiAgICAgICAgICAgIGlmICh2bS5tb2RpZmllcnMpIHtcbiAgICAgICAgICAgICAgICB2bS5tb2RpZmllcnMuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5jaGVjayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TW9kaWZpZXJzQ29udHJvbGxlciNzZWxlY3RNb2RpZmllclxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1vZGlmaWVyc0NvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDYWxsIG1ldGhvZCBzZWxlY3RNb2RpZmllciBvd25lZCBNb2RpZmllcnNGYWN0b3J5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1vZGlmaWVyIE1vZGlmaWVyIG9iamVjdC5cclxuICAgICAgICAgKiovXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdE1vZGlmaWVyKG1vZGlmaWVyKSB7XG4gICAgICAgICAgICBNb2RpZmllcnNGYWN0b3J5LnNlbGVjdE1vZGlmaWVyKHNlbGVjdGVkTW9kaWZpZXJzLCBtb2RpZmllcik7XG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcIk1lYWxzXCIpXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6c2VsZWN0Q291bnRcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gc2VsZWN0IGFtb3VudCBvZiBtZWFsLlxyXG4gICAgICogVHJhbnNmZXJzIHRvIHRoZSBwYXJlbnQgY29udHJvbGxlciBzZWxlY3RlZCBhbW91bnQgb2YgbWVhbCBpbiB2YXJpYWJsZSBcInNlbGVjdFwiLlxyXG4gICAgICpcclxuICAgICAqIEB1c2FnZSA8c2VsZWN0LWNvdW50Pjwvc2VsZWN0LWNvdW50PlxyXG4gICAgICoqL1xuICAgIC5jb21wb25lbnQoXCJzZWxlY3RDb3VudFwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvc2VsZWN0Q291bnQvdGVtcGxhdGUvc2VsZWN0Q291bnRQYWdlLmh0bWxcIixcbiAgICAgICAgYmluZGluZ3M6IHtcbiAgICAgICAgICAgIHNlbGVjdDogXCI9XCJcbiAgICAgICAgfSxcbiAgICAgICAgY29udHJvbGxlckFzOiBcInNlbGVjdFwiLFxuICAgICAgICBjb250cm9sbGVyOiBTZWxlY3RDb3VudENvbnRyb2xsZXJcbiAgICB9KTtcblxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6U2VsZWN0Q291bnRDb250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcInNlbGVjdENvdW50XCIuXHJcbiAgICAgKiBDYXB0dXJlcyB0aGUgdXNlcidzIGNob2ljZSBhdCBhbW91bnQuXHJcbiAgICAgKiovXG4gICAgZnVuY3Rpb24gU2VsZWN0Q291bnRDb250cm9sbGVyKCkge1xuXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICAgICAgdm0uc2VsZWN0TnVtID0gc2VsZWN0TnVtO1xuICAgICAgICB2bS5hY3RpdmVOdW0gPSBhY3RpdmVOdW07XG5cbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6U2VsZWN0Q291bnRDb250cm9sbGVyI3NlbGVjdE51bVxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOlNlbGVjdENvdW50Q29udHJvbGxlclxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFNlbGVjdCBtZWFsIGFtb3VudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudW0gTWVhbCBhbW91bnQuXHJcbiAgICAgICAgICoqL1xuICAgICAgICBmdW5jdGlvbiBzZWxlY3ROdW0obnVtKSB7XG4gICAgICAgICAgICB2bS5zZWxlY3QgPSBudW07XG4gICAgICAgIH1cblxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXIjYWN0aXZlTnVtXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6U2VsZWN0Q291bnRDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIHRydWUgaWYgdmFyaWFibGUgc2VsZWN0IGlzIG51bSwgZWxzZSBmYWxzZS5cclxuICAgICAgICAgKiBJZiBmdW5jdGlvbiByZXR1cm4gdHJ1ZSwgdGhlIGJ1dHRvbiB3aXRoIG51bSBnZXQgY2xhc3MgXCJhY3RpdmVcIi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudW0gTWVhbCBhbW91bnQuXHJcbiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBzZWxlY3QgaXMgbnVtLlxyXG4gICAgICAgICAqKi9cbiAgICAgICAgZnVuY3Rpb24gYWN0aXZlTnVtKG51bSkge1xuICAgICAgICAgICAgcmV0dXJuIHZtLnNlbGVjdCA9PT0gbnVtO1xuICAgICAgICB9XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIsIFtcclxuICAgICAgICAgICAgXCJ1aS5yb3V0ZXJcIlxyXG4gICAgICAgIF0pO1xyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAuY29uZmlnKGNvbmZpZyk7XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGNvbmZpZygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyKSB7XHJcblxyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcbiAgICAgICAgICAgIC5zdGF0ZShcImFwcFwiLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiL2FwcFwiLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGFwcC1wYWdlPjwvYXBwLXBhZ2U+XCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKFwiYXBwLm1haW5cIiwge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcIi9tYWluXCIsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8bWFpbi1wYWdlPjwvbWFpbi1wYWdlPlwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZShcImFwcC5tYWluLm1lYWxzXCIsIHtcclxuICAgICAgICAgICAgICAgIHVybDogXCIvbWVhbHNcIixcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxtZWFscy1saXN0IGlkPSdtZWFsc0xpc3QnPjwvbWVhbHMtbGlzdD5cIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoXCJhcHAubWFpbi5kcmlua3NcIiwge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcIi9kcmlua3NcIixcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxkcmlua3MtbGlzdD48L2RyaW5rcy1saXN0PlwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5zdGF0ZShcImFwcC5tZWFsXCIsIHtcclxuICAgICAgICAgICAgICAgIHVybDogXCIvbWVhbC86cGF0aFwiLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiBcIm1lYWxcIixcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IE1lYWxDb250cm9sbGVyLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiPG1lYWwtcGFnZSBpZD0nbWVhbCcgcGF0aD0ne3sgbWVhbC5wYXRoIH19Jz48L21lYWwtcGFnZT5cIixcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnN0YXRlKFwiYXBwLmNhcnRcIiwge1xyXG4gICAgICAgICAgICAgICAgdXJsOiBcIi9jYXJ0XCIsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8Y2FydC1wYWdlIGlkPSdjYXJ0Jz48L2NhcnQtcGFnZT5cIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuc3RhdGUoXCJlcnJvclwiLCB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IFwiL2Vycm9yXCIsXHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8ZXJyb3ItcGFnZT48L2Vycm9yLXBhZ2U+XCJcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvYXBwL21haW4vbWVhbHNcIik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gTWVhbENvbnRyb2xsZXIoJHN0YXRlUGFyYW1zKSB7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gJHN0YXRlUGFyYW1zLnBhdGg7XHJcbiAgICB9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC5mYWN0b3J5KFwiQ2FydEZhY3RvcnlcIiwgQ2FydEZhY3RvcnkpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIHNlcnZpY2VcclxuICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBGYWN0b3J5IHdvcmsgd2l0aCBjYXJ0LlxyXG4gICAgICpcclxuICAgICAqKi9cclxuICAgIGZ1bmN0aW9uIENhcnRGYWN0b3J5KCkge1xyXG5cclxuICAgICAgICBsZXQgY2FydExpc3QgICAgICAgICAgPSBbXSxcclxuICAgICAgICAgICAgbW9kaWZpZXJzICAgICAgICAgPSBudWxsLFxyXG4gICAgICAgICAgICBpbmRleEVkaXRNZWFsICAgICA9IDAsXHJcblxyXG4gICAgICAgICAgICBmYWN0b3J5ID0ge1xyXG4gICAgICAgICAgICAgICAgZ2V0SW5kZXhFZGl0TWVhbCAgIDogZ2V0SW5kZXhFZGl0TWVhbCxcclxuICAgICAgICAgICAgICAgIHNldEluZGV4RWRpdE1lYWwgICA6IHNldEluZGV4RWRpdE1lYWwsXHJcbiAgICAgICAgICAgICAgICBnZXRDYXJ0TGlzdENvdW50ICAgOiBnZXRDYXJ0TGlzdENvdW50LFxyXG4gICAgICAgICAgICAgICAgYWRkTW9kaWZpZXJzVG9MaXN0IDogYWRkTW9kaWZpZXJzVG9MaXN0LFxyXG4gICAgICAgICAgICAgICAgYWRkTWVhbFRvQ2FydExpc3QgIDogYWRkTWVhbFRvQ2FydExpc3QsXHJcbiAgICAgICAgICAgICAgICBnZXRDYXJ0TGlzdCAgICAgICAgOiBnZXRDYXJ0TGlzdCxcclxuICAgICAgICAgICAgICAgIGdldFRvdGFsUHJpY2UgICAgICA6IGdldFRvdGFsUHJpY2UsXHJcbiAgICAgICAgICAgICAgICBkZWxldGVNb2RpZmllcnMgICAgOiBkZWxldGVNb2RpZmllcnMsXHJcbiAgICAgICAgICAgICAgICByZW1vdmVNZWFsICAgICAgICAgOiByZW1vdmVNZWFsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBmYWN0b3J5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjZ2V0TW9kaWZpZXJzUHJpY2VcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gdG90YWwgcHJpY2Ugb2YgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gbW9kaWZpZXJzQXJyIEFycmF5IG9mIG1vZGlmaWVycyBvYmplY3RzLlxyXG4gICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gVG90YWwgcHJpY2UuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldE1vZGlmaWVyc1ByaWNlKG1vZGlmaWVyc0Fycikge1xyXG4gICAgICAgICAgICBsZXQgdG90YWxQcmljZSA9IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBtb2RpZmllciBvZiBtb2RpZmllcnNBcnIpIHtcclxuICAgICAgICAgICAgICAgIHRvdGFsUHJpY2UgKz0gbW9kaWZpZXIucHJpY2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0b3RhbFByaWNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2dldEluZGV4RWRpdE1lYWxcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gaW5kZXggZm8gZWRpdCBtZWFsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBJbmRleCBvZiBlZGl0IG1lYWwuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldEluZGV4RWRpdE1lYWwoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpbmRleEVkaXRNZWFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I3NldEluZGV4RWRpdE1lYWxcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBTZXQgaW5kZXggb2YgZWRpdCBtZWFsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4IG9mIGVkaXQgbWVhbC5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0SW5kZXhFZGl0TWVhbChpbmRleCkge1xyXG4gICAgICAgICAgICBpbmRleEVkaXRNZWFsID0gaW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjZ2V0Q2FydExpc3RDb3VudFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBjb3VudCBvZiBlbGVtZW50cyBpbiBjYXJ0IGxpc3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IENhcnQgbGlzdCBsZW5ndGguXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldENhcnRMaXN0Q291bnQoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjYXJ0TGlzdC5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuQ2FydEZhY3RvcnkjYWRkTW9kaWZpZXJzVG9MaXN0XHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQWRkIG1vZGlmaWVycyB0byBsaXN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gbW9kaWYgQXJyYXkgd2l0aCBtb2RpZmllcnMgb2JqZWN0cy5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkTW9kaWZpZXJzVG9MaXN0KG1vZGlmKSB7XHJcbiAgICAgICAgICAgIG1vZGlmaWVycyA9IG1vZGlmO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2FkZE1lYWxUb0NhcnRMaXN0XHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQWRkIG1lYWwgdG8gY2FydCBsaXN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1lYWwgTWVhbCBvYmplY3QuXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCBBbW91bnQgb2YgbWVhbC5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkTWVhbFRvQ2FydExpc3QobWVhbCwgYW1vdW50KSB7XHJcbiAgICAgICAgICAgIGxldCBuZXdNZWFsID0ge307XHJcblxyXG4gICAgICAgICAgICBuZXdNZWFsLmlkICAgICAgICA9IG1lYWwuaWQ7XHJcbiAgICAgICAgICAgIG5ld01lYWwubmFtZSAgICAgID0gbWVhbC5uYW1lO1xyXG4gICAgICAgICAgICBuZXdNZWFsLnByaWNlICAgICA9IG1lYWwucHJpY2U7XHJcbiAgICAgICAgICAgIG5ld01lYWwuYW1vdW50ICAgID0gYW1vdW50O1xyXG5cclxuICAgICAgICAgICAgaWYgKG1vZGlmaWVycykge1xyXG4gICAgICAgICAgICAgICAgbmV3TWVhbC5tb2RpZmllcnMgPSBtb2RpZmllcnMuc2xpY2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbW9kaWZpZXJzID0gbnVsbDtcclxuICAgICAgICAgICAgY2FydExpc3QucHVzaChuZXdNZWFsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5DYXJ0RmFjdG9yeSNnZXRDYXJ0TGlzdFxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBjYXJ0IGxpc3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3RbXX0gQ2FydCBsaXN0LlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRDYXJ0TGlzdCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhcnRMaXN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2dldFRvdGFsUHJpY2VcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZXR1cm4gY2FydCBsaXN0IHRvdGFsIHByaWNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSBDYXJ0IGxpc3QgdG90YWwgcHJpY2UuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldFRvdGFsUHJpY2UoKSB7XHJcbiAgICAgICAgICAgIGxldCB0b3RhbFByaWNlID0gMDtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYXJ0TGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gY2FydExpc3QubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdG90YWxQcmljZSArPSBjYXJ0TGlzdFtpXS5wcmljZSAqIGNhcnRMaXN0W2ldLmFtb3VudDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhcnRMaXN0W2ldLm1vZGlmaWVycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbFByaWNlICs9IGdldE1vZGlmaWVyc1ByaWNlKGNhcnRMaXN0W2ldLm1vZGlmaWVycykgKiBjYXJ0TGlzdFtpXS5hbW91bnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdG90YWxQcmljZS50b0ZpeGVkKDIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I2RlbGV0ZU1vZGlmaWVyc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5DYXJ0RmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJlc2V0IG1vZGlmaWVycyB2YWx1ZS5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlTW9kaWZpZXJzKCkge1xyXG4gICAgICAgICAgICBtb2RpZmllcnMgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLkNhcnRGYWN0b3J5I3JlbW92ZU1lYWxcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBSZW1vdmUgZWRpdCBtZWFsIG9mIGNhcnQgbGlzdC5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTWVhbCgpIHtcclxuICAgICAgICAgICAgY2FydExpc3Quc3BsaWNlKGluZGV4RWRpdE1lYWwsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcblx0XCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5cdGFuZ3VsYXJcclxuXHRcdC5tb2R1bGUoXCJNZWFsc1wiKVxyXG5cdFx0LmZhY3RvcnkoXCJNZWFsc0ZhY3RvcnlcIiwgTWVhbHNGYWN0b3J5KTtcclxuXHJcblx0LyoqXHJcblx0ICogQG5nZG9jIHNlcnZpY2VcclxuXHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHQgKiBAcmVxdWlyZXMgJGh0dHBcclxuXHQgKiBAcmVxdWlyZXMgJHFcclxuXHQgKlxyXG5cdCAqIEBkZXNjcmlwdGlvblxyXG5cdCAqIEZhY3RvcnkgZ2V0IGN1cnJlbmN5LCBhcnJheSBvZiBwcm9kdWN0cyBhbmQgYXJyYXkgb2YgZHJpbmtzLFxyXG5cdCAqIGFuZCB3b3JrIHdpdGggY3VycmVudCBtZWFsLlxyXG5cdCAqXHJcblx0ICoqL1xyXG5cdGZ1bmN0aW9uIE1lYWxzRmFjdG9yeSgkaHR0cCwgJHEpIHtcclxuXHJcblx0XHRsZXQgbWVhbEFwaVVybCAgICAgICAgPSBcIm1lYWxzLmpzb25cIixcclxuXHRcdFx0bWVhbHMgICAgICAgICAgICAgPSBudWxsLFxyXG5cdFx0XHRjdXJyZW5jeSAgICAgICAgICA9IFwiXCIsXHJcblx0XHRcdGN1cnJlbnRNZWFsICAgICAgID0gbnVsbCxcclxuXHRcdFx0Y3VycmVudE1lYWxTdGF0dXMgPSBcIm5ld1wiLFxyXG5cdFx0XHRjdXJyZW50QW1vdW50ICAgICA9IDEsXHJcblxyXG5cdFx0XHRmYWN0b3J5ID0ge1xyXG5cdFx0XHRcdGdldE1vZGlmaWVycyAgICAgICAgIDogZ2V0TW9kaWZpZXJzLFxyXG5cdFx0XHRcdGdldE1lYWxzICAgICAgICAgICAgIDogZ2V0TWVhbHMsXHJcblx0XHRcdFx0Z2V0Q3VycmVudE1lYWwgICAgICAgOiBnZXRDdXJyZW50TWVhbCxcclxuXHRcdFx0XHRzZXRDdXJyZW50TWVhbCAgICAgICA6IHNldEN1cnJlbnRNZWFsLFxyXG5cdFx0XHRcdGdldEN1cnJlbnRNZWFsU3RhdHVzIDogZ2V0Q3VycmVudE1lYWxTdGF0dXMsXHJcblx0XHRcdFx0c2V0Q3VycmVudE1lYWxTdGF0dXMgOiBzZXRDdXJyZW50TWVhbFN0YXR1cyxcclxuXHRcdFx0XHRnZXRDdXJyZW5jeSAgICAgICAgICA6IGdldEN1cnJlbmN5LFxyXG5cdFx0XHRcdGdldEN1cnJlbnRNZWFsQW1vdW50IDogZ2V0Q3VycmVudE1lYWxBbW91bnQsXHJcblx0XHRcdFx0c2V0Q3VycmVudE1lYWxBbW91bnQgOiBzZXRDdXJyZW50TWVhbEFtb3VudCxcclxuXHRcdFx0XHRzZXRDdXJyZW50TWVhbEJ5SWQgICA6IHNldEN1cnJlbnRNZWFsQnlJZCxcclxuXHRcdFx0XHRvcGVuTWVhbCAgICAgICAgICAgICA6IG9wZW5NZWFsXHJcblx0XHRcdH07XHJcblxyXG5cdFx0cmV0dXJuIGZhY3Rvcnk7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3Rvcnkjb3Blbk1lYWxcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqXHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFNldCBjdXJyZW50IG1lYWwsIGN1cnJlbnQgbWVhbCBzdGF0dXMgYW5kIGN1cnJlbnQgbWVhbCBhbW91bnQuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IG1lYWwgICBDdXJyZW50IG1lYWwuXHJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIE1lYWwgc3RhdHVzKFwibmV3XCIgb3IgXCJlZGl0XCIpLlxyXG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCBNZWFsIGFtb3VudC5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIG9wZW5NZWFsKG1lYWwsIHN0YXR1cywgYW1vdW50KSB7XHJcblx0XHRcdHNldEN1cnJlbnRNZWFsKG1lYWwpO1xyXG5cdFx0XHRzZXRDdXJyZW50TWVhbFN0YXR1cyhzdGF0dXMpO1xyXG5cdFx0XHRzZXRDdXJyZW50TWVhbEFtb3VudChhbW91bnQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldE1lYWxzRnJvbUh0dHBcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogT2J0YWluaW5nIGRhdGEgb24gZm9vZHMgYW5kIGRyaW5rcyBmcm9tIHRoZSBzZXJ2ZXIuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IGRlZmVycmVkIERlZmVycmVkIG9iamVjdC5cclxuXHRcdCAqIEByZXR1cm4ge29iamVjdH0gRGVmZXJyZWQgb2JqZWN0IHdpdGggcmVzb2x2ZSBhbmQgcmVqZWN0LlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0TWVhbHNGcm9tSHR0cChkZWZlcnJlZCkge1xyXG5cclxuXHRcdFx0JGh0dHAoe21ldGhvZCA6IFwiR0VUXCIsIHVybCA6IG1lYWxBcGlVcmx9KVxyXG5cdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcblx0XHRcdFx0XHRtZWFscyAgICA9IGRhdGE7XHJcblx0XHRcdFx0XHRjdXJyZW5jeSA9IGRhdGEuY3VycmVuY3k7XHJcblxyXG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShkYXRhKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5lcnJvcihmdW5jdGlvbiAoZGF0YSwgc3RhdHVzKSB7XHJcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoXCJFcnJvciBpbiAkaHR0cCByZXF1ZXN0XCIpO1xyXG5cclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coc3RhdHVzKTtcclxuXHRcdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiBkZWZlcnJlZDtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNnZXRNb2RpZmllcnNcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogSWYgbWVhbHMgaGF2ZSBtb2RpZmllcnMgcmV0dXJuIHRoZW0gZWxzZSByZXR1cm4gZmFsc2VcclxuXHRcdCAqXHJcblx0XHQgKiBAcmV0dXJuIHtvYmplY3R8Ym9vbGVhbn0gQ3VycmVudCBtZWFsIG1vZGlmaWVycyBvciBmYWxzZS5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIGdldE1vZGlmaWVycygpIHtcclxuXHJcblx0XHRcdGlmIChjdXJyZW50TWVhbCAhPT0gbnVsbCkge1xyXG5cdFx0XHRcdHJldHVybiBjdXJyZW50TWVhbC5tb2RpZmllcnM7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0TWVhbHNcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogUmV0dXJuIHByb21pc2Ugd2l0aCB0aGUgcmVzcG9uc2UgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIG9yXHJcblx0XHQgKiBpZiB0aGUgcmVxdWVzdCBoYXMgYWxyZWFkeSBiZWVuLCByZXR1cm4gcHJvbWlzZSB3aXRoIHRoZVxyXG5cdFx0ICogbWVhbHMgb2JqZWN0LlxyXG5cdFx0ICpcclxuXHRcdCAqIEByZXR1cm4ge29iamVjdH0gUHJvbWlzZS5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIGdldE1lYWxzKCkge1xyXG5cdFx0XHRsZXQgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG5cclxuXHRcdFx0aWYgKCFtZWFscykge1xyXG5cdFx0XHRcdGRlZmVycmVkID0gZ2V0TWVhbHNGcm9tSHR0cChkZWZlcnJlZCk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZShtZWFscyk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldEN1cnJlbnRNZWFsXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFJldHVybiBjdXJyZW50IG1lYWwuXHJcblx0XHQgKlxyXG5cdFx0ICogQHJldHVybiB7b2JqZWN0fSBDdXJyZW50IG1lYWwuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBnZXRDdXJyZW50TWVhbCgpIHtcclxuXHRcdFx0cmV0dXJuIGN1cnJlbnRNZWFsO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I3NldEN1cnJlbnRNZWFsXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFNldCBjdXJyZW50IG1lYWwuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IG1lYWwgQ3VycmVudCBtZWFsLlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0Q3VycmVudE1lYWwobWVhbCkge1xyXG5cdFx0XHRjdXJyZW50TWVhbCA9IG1lYWw7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0Q3VycmVudE1lYWxTdGF0dXNcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogUmV0dXJuIGN1cnJlbnQgbWVhbCBzdGF0dXMoXCJuZXdcIiBvciBcImVkaXRcIikuXHJcblx0XHQgKlxyXG5cdFx0ICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW50IG1lYWwgc3RhdHVzKFwibmV3XCIgb3IgXCJlZGl0XCIpLlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0Q3VycmVudE1lYWxTdGF0dXMoKSB7XHJcblx0XHRcdHJldHVybiBjdXJyZW50TWVhbFN0YXR1cztcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNzZXRDdXJyZW50TWVhbFN0YXR1c1xyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBTZXQgY3VycmVudCBtZWFsIHN0YXR1cyhcIm5ld1wiIG9yIFwiZWRpdFwiKS5cclxuXHRcdCAqXHJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzIEN1cnJlbnQgbWVhbCBzdGF0dXMoXCJuZXdcIiBvciBcImVkaXRcIikuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBzZXRDdXJyZW50TWVhbFN0YXR1cyhzdGF0dXMpIHtcclxuXHRcdFx0Y3VycmVudE1lYWxTdGF0dXMgPSBzdGF0dXM7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5NZWFsc0ZhY3RvcnkjZ2V0Q3VycmVuY3lcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogUmV0dXJuIGN1cnJlbmN5LlxyXG5cdFx0ICpcclxuXHRcdCAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVuY3kuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBnZXRDdXJyZW5jeSgpIHtcclxuXHRcdFx0cmV0dXJuIGN1cnJlbmN5O1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuTWVhbHNGYWN0b3J5I2dldEN1cnJlbnRNZWFsQW1vdW50XHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIFJldHVybiBjdXJyZW50IG1lYWwgYW1vdW50LlxyXG5cdFx0ICpcclxuXHRcdCAqIEByZXR1cm4ge251bWJlcn0gQ3VycmVudCBtZWFsIGFtb3VudC5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIGdldEN1cnJlbnRNZWFsQW1vdW50KCkge1xyXG5cdFx0XHRyZXR1cm4gY3VycmVudEFtb3VudDtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNzZXRDdXJyZW50TWVhbEFtb3VudFxyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBTZXQgY3VycmVudCBtZWFsIGFtb3VudC5cclxuXHRcdCAqXHJcblx0XHQgKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IEN1cnJlbnQgbWVhbCBhbW91bnQuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBzZXRDdXJyZW50TWVhbEFtb3VudChhbW91bnQpIHtcclxuXHRcdFx0Y3VycmVudEFtb3VudCA9IGFtb3VudDtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLk1lYWxzRmFjdG9yeSNzZXRDdXJyZW50TWVhbEJ5SWRcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5NZWFsc0ZhY3RvcnlcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogU2V0IGN1cnJlbnQgbWVhbCBieSBpZC5cclxuXHRcdCAqXHJcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gaWQgSWQgb2YgY3VycmVudCBtZWFsLlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gc2V0Q3VycmVudE1lYWxCeUlkKGlkKSB7XHJcblxyXG5cdFx0XHRjdXJyZW50TWVhbCA9IG1lYWxzLnByb2R1Y3RzLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpWzBdO1xyXG5cclxuXHRcdFx0aWYgKCFjdXJyZW50TWVhbCkge1xyXG5cdFx0XHRcdGN1cnJlbnRNZWFsID0gbWVhbHMuZHJpbmtzLmZpbHRlcigoaXRlbSkgPT4gaXRlbS5pZCA9PT0gaWQpWzBdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAuZmFjdG9yeShcIk1vZGlmaWVyc0ZhY3RvcnlcIiwgTW9kaWZpZXJzRmFjdG9yeSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2Mgc2VydmljZVxyXG4gICAgICogQG5hbWUgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICogQHJlcXVpcmVzIE1lYWxzLkNhcnRGYWN0b3J5XHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBGYWN0b3J5IHdvcmsgd2l0aCBtb2RpZmllcnMuXHJcbiAgICAgKlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gTW9kaWZpZXJzRmFjdG9yeShDYXJ0RmFjdG9yeSkge1xyXG5cclxuICAgICAgICBsZXQgZmFjdG9yeSA9IHtcclxuICAgICAgICAgICAgZ2V0Q2hlY2tlZE1vZGlmaWVycyAgICAgOiBnZXRDaGVja2VkTW9kaWZpZXJzLFxyXG4gICAgICAgICAgICBtb2RpZmllckhhc0JlZW5TZWxlY3RlZCA6IG1vZGlmaWVySGFzQmVlblNlbGVjdGVkLFxyXG4gICAgICAgICAgICBkZWxldGVNb2RpZmllciAgICAgICAgICA6IGRlbGV0ZU1vZGlmaWVyLFxyXG4gICAgICAgICAgICBzZWxlY3RNb2RpZmllciAgICAgICAgICA6IHNlbGVjdE1vZGlmaWVyLFxyXG4gICAgICAgICAgICBwaWNrQ2hlY2tlZE1vZGlmaWVycyAgICA6IHBpY2tDaGVja2VkTW9kaWZpZXJzXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I2dldENoZWNrZWRNb2RpZmllcnNcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBhcnJheSB3aXRoIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdFtdfSBBcnJheSBvZiBtb2RpZmllcnMgb2JqZWN0cy5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2hlY2tlZE1vZGlmaWVycygpIHtcclxuICAgICAgICAgICAgbGV0IGNhcnRMaXN0ID0gQ2FydEZhY3RvcnkuZ2V0Q2FydExpc3QoKVtDYXJ0RmFjdG9yeS5nZXRJbmRleEVkaXRNZWFsKCldO1xyXG4gICAgICAgICAgICByZXR1cm4gY2FydExpc3QubW9kaWZpZXJzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnkjbW9kaWZpZXJIYXNCZWVuU2VsZWN0ZWRcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiB0cnVlIGlmIG1vZGlmaWVyIGhhcyBiZWVuIHNlbGVjdGVkLCBvciBmYWxzZSBpZiBuby5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IHNlbGVjdGVkTW9kaWZpZXJzIEFycmF5IHdpdGggc2VsZWN0ZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtb2RpZmllciBNb2RpZmllciBvYmplY3QuXHJcbiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtb2RpZmllciBoYXMgYmVlbiBzZWxlY3RlZCwgZWxzZSBmYWxzZS5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gbW9kaWZpZXJIYXNCZWVuU2VsZWN0ZWQoc2VsZWN0ZWRNb2RpZmllcnMsIG1vZGlmaWVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZE1vZGlmaWVycy5zb21lKChpdGVtKSA9PiBtb2RpZmllci5uYW1lID09PSBpdGVtLm5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnkjZGVsZXRlTW9kaWZpZXJcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIERlbGV0ZSBtb2RpZmllciBhdCBhcnJheSBzZWxlY3RlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBzZWxlY3RlZE1vZGlmaWVycyBBcnJheSB3aXRoIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gbW9kaWZpZXIgTW9kaWZpZXIgb2JqZWN0IHdobyBiZSBkZWxldGVkLlxyXG4gICAgICAgICAqIEByZXR1cm4ge29iamVjdFtdfSBOZXcgYXJyYXkgb2YgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBkZWxldGVNb2RpZmllcihzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkTW9kaWZpZXJzLmZpbHRlcigoaXRlbSkgPT4gbW9kaWZpZXIubmFtZSAhPT0gaXRlbS5uYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I3NlbGVjdE1vZGlmaWVyXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBBZGQgbW9kaWZpZXIgaWYgaXQgbm90IGhhcyBiZWVuIHNlbGVjdGVkLCBlbHNlIGRlbGV0ZSBtb2RpZmllciBhdFxyXG4gICAgICAgICAqIGFycmF5IG9mIHNlbGVjdGVkIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IHNlbGVjdGVkTW9kaWZpZXJzIEFycmF5IHdpdGggc2VsZWN0ZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0fSBtb2RpZmllciBNb2RpZmllciBvYmplY3QuXHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHNlbGVjdE1vZGlmaWVyKHNlbGVjdGVkTW9kaWZpZXJzLCBtb2RpZmllcikge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFtb2RpZmllckhhc0JlZW5TZWxlY3RlZChzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZE1vZGlmaWVycy5wdXNoKG1vZGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkTW9kaWZpZXJzID0gZGVsZXRlTW9kaWZpZXIoc2VsZWN0ZWRNb2RpZmllcnMsIG1vZGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ2FydEZhY3RvcnkuYWRkTW9kaWZpZXJzVG9MaXN0KHNlbGVjdGVkTW9kaWZpZXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5Nb2RpZmllcnNGYWN0b3J5I3BpY2tDaGVja2VkTW9kaWZpZXJzXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLk1vZGlmaWVyc0ZhY3RvcnlcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBQaWNrIGFsbCBjaGVja2VkIG1vZGlmaWVycy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7b2JqZWN0W119IG1vZGlmaWVycyBBbGwgbW9kaWZpZXJzIG9mIGN1cnJlbnQgbWVhbC5cclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBzZWxlY3RlZE1vZGlmaWVycyBBcnJheSB3aGVyZSB3aWxsIGJlIHBsYWNlZCBtb2RpZmllcnMuXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3RbXX0gY2hlY2tlZE1vZGlmaWVycyBBcnJheSB3aXRoIGNoZWNrZWQgbW9kaWZpZXJzLlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBwaWNrQ2hlY2tlZE1vZGlmaWVycyhtb2RpZmllcnMsIHNlbGVjdGVkTW9kaWZpZXJzLCBjaGVja2VkTW9kaWZpZXJzKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2hlY2tlZE1vZGlmaWVycykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbkNoZWNrZWRNb2RpZmllcnMgPSBjaGVja2VkTW9kaWZpZXJzLmxlbmd0aDsgaSA8IGxlbkNoZWNrZWRNb2RpZmllcnM7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMCwgbGVuTW9kaWZpZXJzID0gbW9kaWZpZXJzLmxlbmd0aDsgaiA8IGxlbk1vZGlmaWVyczsgaisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kaWZpZXJzW2pdLm5hbWUgPT09IGNoZWNrZWRNb2RpZmllcnNbaV0ubmFtZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGlmaWVyc1tqXS5jaGVjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RNb2RpZmllcihzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXJzW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTtcclxuIiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6YXBwUGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSBvZiBhcHAuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPGFwcC1wYWdlPjwvYXBwLXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJhcHBQYWdlXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvYXBwL3RlbXBsYXRlL2FwcFBhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcImFwcFwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogQXBwQ29udHJvbGxlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6QXBwQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJhcHBQYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBBcHBDb250cm9sbGVyKCkge31cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpjYXJ0UGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBjYXJ0IHBhZ2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPGNhcnQtcGFnZT48L2NhcnQtcGFnZT5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcImNhcnRQYWdlXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvY2FydC90ZW1wbGF0ZS9jYXJ0UGFnZS5odG1sXCIsXHJcbiAgICAgICAgICAgIGJpbmRpbmdzIDoge30sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiY2FydFwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogQ2FydENvbnRyb2xsZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkNhcnRDb250cm9sbGVyXHJcbiAgICAgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICAgKiBAcmVxdWlyZXMgTWVhbHMuQ2FydEZhY3RvcnlcclxuICAgICAqIEBwcm9wZXJ0eSB7c3RyaW5nfSBjdXJyZW5jeSBDdXJyZW5jeS5cclxuICAgICAqIEBwcm9wZXJ0eSB7b2JqZWN0W119ICBjYXJ0TGlzdCBBcnJheSBvZiBzZWxlY3QgbWVhbHMgYW5kIGRyaW5rcy5cclxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0b3RhbFByaWNlIFRvdGFsIHByaWNlLlxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJjYXJ0UGFnZVwiLlxyXG4gICAgICogRGlzcGxheSB1c2VyLXNlbGVjdGVkIG1lYWxzIGFuZCBkcmlua3MgYW5kIHRoZWlyIHRvdGFsIHByaWNlLlxyXG4gICAgICogUHJvdmlkZXMgdGhlIGFiaWxpdHkgdG8gZWRpdCB0aGVpciBjaG9pY2UuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBDYXJ0Q29udHJvbGxlcihNZWFsc0ZhY3RvcnksIENhcnRGYWN0b3J5KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2bS5jdXJyZW5jeSAgID0gTWVhbHNGYWN0b3J5LmdldEN1cnJlbmN5KCk7XHJcbiAgICAgICAgdm0uY2FydExpc3QgICA9IENhcnRGYWN0b3J5LmdldENhcnRMaXN0KCk7XHJcbiAgICAgICAgdm0udG90YWxQcmljZSA9IENhcnRGYWN0b3J5LmdldFRvdGFsUHJpY2UoKTtcclxuICAgICAgICB2bS5lZGl0TWVhbCAgID0gZWRpdE1lYWw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkNhcnRDb250cm9sbGVyI2VkaXRNZWFsXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6Q2FydENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBPcGVuIG1lYWwgZm9yIGVkaXQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gbWVhbCBNZWFsIG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggQ3VycmVudCBtZWFsIGluZGV4LlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBlZGl0TWVhbChtZWFsLCBpbmRleCkge1xyXG4gICAgICAgICAgICBDYXJ0RmFjdG9yeS5zZXRJbmRleEVkaXRNZWFsKGluZGV4KTtcclxuICAgICAgICAgICAgTWVhbHNGYWN0b3J5LnNldEN1cnJlbnRNZWFsQnlJZChtZWFsLmlkKTtcclxuICAgICAgICAgICAgTWVhbHNGYWN0b3J5LnNldEN1cnJlbnRNZWFsQW1vdW50KG1lYWwuYW1vdW50KTtcclxuICAgICAgICAgICAgTWVhbHNGYWN0b3J5LnNldEN1cnJlbnRNZWFsU3RhdHVzKFwiZWRpdFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6Y2FydEljb25QYWdlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDb21wb25lbnQgcHJvdmlkZXMgYW4gaW50ZXJmYWNlIG9mIGNhcnQgYnV0dG9uIGFuZCBzdHJpbmcgd2l0aCBtZWFscyBjb3VudC5cclxuICAgICAgICAgKiBBY2NlcHRzIGZyb20gcGFyZW50IGNvbnRyb2xsZXIgY291bnQgbWVhbHMgaW4gY2FydCBpbiB2YXJpYWJsZSBcImNvdW50XCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPGNhcnQtaWNvbi1wYWdlPjwvY2FydC1pY29uLXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJjYXJ0SWNvblBhZ2VcIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9jYXJ0SWNvbi90ZW1wbGF0ZS9jYXJ0SWNvblBhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHtcclxuICAgICAgICAgICAgICAgIGNvdW50OiBcIkBcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcImNhcnRJY29uXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBDYXJ0SWNvbkNvbnRyb2xsZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkNhcnRJY29uQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJjYXJ0SWNvblBhZ2VcIi5cclxuICAgICAqKi9cclxuICAgIGZ1bmN0aW9uIENhcnRJY29uQ29udHJvbGxlcigpIHt9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6ZHJpbmtzTGlzdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBsaXN0IG9mIGRyaW5rcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEB1c2FnZSA8ZHJpbmtzLWxpc3Q+PC9kcmlua3MtbGlzdD5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcImRyaW5rc0xpc3RcIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9kcmlua3NMaXN0L3RlbXBsYXRlL2RyaW5rc0xpc3QuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcImRyaW5rc0xpc3RcIixcclxuICAgICAgICAgICAgY29udHJvbGxlciA6IERyaW5rc0xpc3RDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlclxyXG4gICAgICogQHJlcXVpcmVzIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG4gICAgICogQHByb3BlcnR5IHtzdHJpbmd9IGN1cnJlbmN5IEN1cnJlbmN5LlxyXG4gICAgICogQHByb3BlcnR5IHtib29sZWFufSBvbmx5U29mdERyaW5rcyBWYXJpYWJsZSBpbmRpY2F0aW5nIHNlbGVjdCBvbmx5IHNvZnQgZHJpbmsgb3Igbm8uXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImRyaW5rc0xpc3RcIi5cclxuICAgICAqIEhhbmRsZSBhIHVzZXIgY2hvaWNlIGFib3V0IGRyaW5rLlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gRHJpbmtzTGlzdENvbnRyb2xsZXIoTWVhbHNGYWN0b3J5KSB7XHJcblxyXG4gICAgICAgIGNvbnN0IHZtICAgICA9IHRoaXM7XHJcbiAgICAgICAgbGV0ICAgZHJpbmtzID0gW107XHJcblxyXG4gICAgICAgIHZtLm9ubHlTb2Z0RHJpbmtzICAgPSBmYWxzZTtcclxuICAgICAgICB2bS5jdXJyZW5jeSAgICAgICAgID0gXCJcIjtcclxuICAgICAgICB2bS5vcGVuRHJpbmsgICAgICAgID0gb3BlbkRyaW5rO1xyXG4gICAgICAgIHZtLmdldERyaW5rc0ZvclZpZXcgPSBnZXREcmlua3NGb3JWaWV3O1xyXG5cclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlciNhY3RpdmF0ZVxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOkRyaW5rc0xpc3RDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogTWV0aG9kIHRvIGluaXRpYWxpemUgZGF0YS5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgIE1lYWxzRmFjdG9yeS5nZXRNZWFscygpXHJcbiAgICAgICAgICAgICAgICAudGhlbihnZXREcmlua3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6RHJpbmtzTGlzdENvbnRyb2xsZXIjZ2V0RHJpbmtzXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6RHJpbmtzTGlzdENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBBc3NpZ25pbmcgYSBkYXRhIGF0IHByb3BlcnRpZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gZHJpbmtzT2JqIERyaW5rcyBvYmplY3QgY29udGFpbnMgY3VycmVuY3kgYW5kIGRyaW5rcyBhcnJheS5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0RHJpbmtzKGRyaW5rc09iaikge1xyXG4gICAgICAgICAgICB2bS5jdXJyZW5jeSA9IGRyaW5rc09iai5jdXJyZW5jeTtcclxuICAgICAgICAgICAgZHJpbmtzICAgICAgPSBkcmlua3NPYmouZHJpbmtzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6RHJpbmtzTGlzdENvbnRyb2xsZXIjb3BlbkRyaW5rXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6RHJpbmtzTGlzdENvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDYWxsIG1ldGhvZCBvcGVuTWVhbCBvd25lZCBNZWFsc0ZhY3RvcnkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gZHJpbmsgRHJpbmsgb2JqZWN0LlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBvcGVuRHJpbmsoZHJpbmspIHtcclxuICAgICAgICAgICAgTWVhbHNGYWN0b3J5Lm9wZW5NZWFsKGRyaW5rLCBcIm5ld1wiLCAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBtZXRob2RcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkRyaW5rc0xpc3RDb250cm9sbGVyI2dldERyaW5rc0ZvclZpZXdcclxuICAgICAgICAgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpEcmlua3NMaXN0Q29udHJvbGxlclxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIFJldHVybiBhbGwgZHJpbmtzIG9yIG9ubHkgc29mdCBkcmlua3MuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtvYmplY3RbXX0gQXJyYXkgb2YgZHJpbmtzLlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXREcmlua3NGb3JWaWV3KCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHZtLm9ubHlTb2Z0RHJpbmtzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZHJpbmtzLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50aXBwbGUgIT09IHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyaW5rcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTplcnJvclBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2Ugb2YgZXJyb3IgcGFnZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEB1c2FnZSA8ZXJyb3ItcGFnZT48L2Vycm9yLXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJlcnJvclBhZ2VcIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9lcnJvci90ZW1wbGF0ZS9lcnJvclBhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcImVycm9yXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBFcnJvckNvbnRyb2xsZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkVycm9yQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJlcnJvclBhZ2VcIi5cclxuICAgICAqKi9cclxuICAgIGZ1bmN0aW9uIEVycm9yQ29udHJvbGxlcigpIHt9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6Zm9vdGVyUGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBmb290ZXIgc2VjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEB1c2FnZSA8Zm9vdGVyLXBhZ2U+PC9mb290ZXItcGFnZT5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcImZvb3RlclBhZ2VcIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9mb290ZXIvdGVtcGxhdGUvZm9vdGVyUGFnZS5odG1sXCIsXHJcbiAgICAgICAgICAgIGJpbmRpbmdzIDoge30sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwiZm9vdGVyXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBGb290ZXJDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpGb290ZXJDb250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImZvb3RlclBhZ2VcIi5cclxuICAgICAqKi9cclxuICAgIGZ1bmN0aW9uIEZvb3RlckNvbnRyb2xsZXIoKSB7fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOmhlYWRlclBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gaGVhZGVyIHNlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPGhlYWRlci1wYWdlPjwvaGVhZGVyLXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJoZWFkZXJQYWdlXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvaGVhZGVyL3RlbXBsYXRlL2hlYWRlclBhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcImhlYWRlclwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogSGVhZGVyQ29udHJvbGxlclxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQG5nZG9jIGNvbnRyb2xsZXJcclxuICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6SGVhZGVyQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJoZWFkZXJQYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBIZWFkZXJDb250cm9sbGVyKCkge31cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpsb2dvUGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBsb2dvIHNlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAdXNhZ2UgPGxvZ28tcGFnZT48L2xvZ28tcGFnZT5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcImxvZ29QYWdlXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvbG9nby90ZW1wbGF0ZS9sb2dvUGFnZS5odG1sXCIsXHJcbiAgICAgICAgICAgIGJpbmRpbmdzIDoge30sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwibG9nb1wiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogTG9nb0NvbnRyb2xsZXJcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBuZ2RvYyBjb250cm9sbGVyXHJcbiAgICAgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOkxvZ29Db250cm9sbGVyXHJcbiAgICAgKlxyXG4gICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgKiBDb250cm9sbGVyIGNvbXBvbmVudCBcImxvZ29QYWdlXCIuXHJcbiAgICAgKiovXHJcbiAgICBmdW5jdGlvbiBMb2dvQ29udHJvbGxlcigpIHt9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6bWFpblBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gbWFpbiBzZWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxtYWluLXBhZ2U+PC9tYWluLXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJtYWluUGFnZVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJjb21wb25lbnQtdGVtcGxhdGVzL21haW4vdGVtcGxhdGUvbWFpblBhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIm1haW5cIixcclxuICAgICAgICAgICAgY29udHJvbGxlciA6IE1haW5Db250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNYWluQ29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtYWluUGFnZVwiLlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gTWFpbkNvbnRyb2xsZXIoKSB7fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuXHRcInVzZSBzdHJpY3RcIjtcclxuXHJcblx0YW5ndWxhclxyXG5cdFx0Lm1vZHVsZShcIk1lYWxzXCIpXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuXHRcdCAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTptZWFsUGFnZVxyXG5cdFx0ICpcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSBvZiBtZWFsLlxyXG5cdFx0ICogQWNjZXB0cyBmcm9tIHBhcmVudCBjb250cm9sbGVyIHBhdGggd2hlcmUgdGhlIHVzZXIgY2FtZSBpbiB2YXJpYWJsZSBcInBhdGhcIi5cclxuXHRcdCAqXHJcblx0XHQgKiBAdXNhZ2UgPG1lYWwtcGFnZT48L21lYWwtcGFnZT5cclxuXHRcdCAqKi9cclxuXHRcdC5jb21wb25lbnQoXCJtZWFsUGFnZVwiLCB7XHJcblx0XHRcdHRlbXBsYXRlVXJsIDogXCJjb21wb25lbnQtdGVtcGxhdGVzL21lYWwvdGVtcGxhdGUvbWVhbFBhZ2UuaHRtbFwiLFxyXG5cdFx0XHRiaW5kaW5ncyA6IHtcclxuXHRcdFx0XHRwYXRoOiBcIkBcIlxyXG5cdFx0XHR9LFxyXG5cdFx0XHRjb250cm9sbGVyQXMgOiBcIm1lYWxcIixcclxuXHRcdFx0Y29udHJvbGxlciA6IE1lYWxDb250cm9sbGVyXHJcblx0XHR9KTtcclxuXHJcblx0LyoqXHJcblx0ICogQG5nZG9jIGNvbnRyb2xsZXJcclxuXHQgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxDb250cm9sbGVyXHJcblx0ICogQHJlcXVpcmVzIE1lYWxzLk1lYWxzRmFjdG9yeVxyXG5cdCAqIEByZXF1aXJlcyBNZWFscy5DYXJ0RmFjdG9yeVxyXG5cdCAqIEBwcm9wZXJ0eSB7b2JqZWN0fSBjdXJyZW50TWVhbCBDdXJyZW50IG1lYWwuXHJcblx0ICogQHByb3BlcnR5IHtzdHJpbmd9IGN1cnJlbmN5IEN1cnJlbmN5LlxyXG5cdCAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzZWxlY3RBbW91bnQgQ3VycmVudCBtZWFsIHNlbGVjdCBhbW91bnQuXHJcblx0ICogQHByb3BlcnR5IHtzdHJpbmd9IG1lYWxTdGF0dXMgQ3VycmVudCBtZWFsIHN0YXR1cy5cclxuXHQgKiBAcHJvcGVydHkge251bWJlcn0gY2FydENvdW50IENvdW50IG1lYWwgaW4gY2FydC5cclxuXHQgKlxyXG5cdCAqIEBkZXNjcmlwdGlvblxyXG5cdCAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwibWVhbFBhZ2VcIi5cclxuXHQgKiBBbGxvd3MgdGhlIHVzZXIgdG8gYWRkIG1lYWwgdG8gY2FydCwgZGVsZXRlIG1lYWwsIGVkaXQgbWVhbCBhbmQgZXRjLlxyXG5cdCAqKi9cclxuXHRmdW5jdGlvbiBNZWFsQ29udHJvbGxlcihNZWFsc0ZhY3RvcnksIENhcnRGYWN0b3J5KSB7XHJcblxyXG5cdFx0Y29uc3Qgdm0gPSB0aGlzO1xyXG5cclxuXHRcdHZtLmN1cnJlbnRNZWFsICA9IE1lYWxzRmFjdG9yeS5nZXRDdXJyZW50TWVhbCgpO1xyXG5cdFx0dm0uY3VycmVuY3kgICAgID0gTWVhbHNGYWN0b3J5LmdldEN1cnJlbmN5KCk7XHJcblx0XHR2bS5zZWxlY3RBbW91bnQgPSBNZWFsc0ZhY3RvcnkuZ2V0Q3VycmVudE1lYWxBbW91bnQoKTtcclxuXHRcdHZtLm1lYWxTdGF0dXMgICA9IE1lYWxzRmFjdG9yeS5nZXRDdXJyZW50TWVhbFN0YXR1cygpO1xyXG5cdFx0dm0uY2FydENvdW50ICAgID0gQ2FydEZhY3RvcnkuZ2V0Q2FydExpc3RDb3VudCgpO1xyXG5cdFx0dm0uYWRkTWVhbCAgICAgID0gYWRkTWVhbDtcclxuXHRcdHZtLnJlbW92ZU1lYWwgICA9IHJlbW92ZU1lYWw7XHJcblx0XHR2bS5zYXZlTWVhbCAgICAgPSBzYXZlTWVhbDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TWVhbENvbnRyb2xsZXIjYWRkTWVhbFxyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbENvbnRyb2xsZXJcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogQ2FsbCBtZXRob2QgYWRkTWVhbFRvQ2FydExpc3Qgb3duZWQgQ2FydEZhY3RvcnkuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBhZGRNZWFsKCkge1xyXG5cdFx0XHRDYXJ0RmFjdG9yeS5hZGRNZWFsVG9DYXJ0TGlzdCh2bS5jdXJyZW50TWVhbCwgdm0uc2VsZWN0QW1vdW50KTtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TWVhbENvbnRyb2xsZXIjcmVtb3ZlTWVhbFxyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbENvbnRyb2xsZXJcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogQ2FsbCBtZXRob2QgcmVtb3ZlTWVhbCBvd25lZCBDYXJ0RmFjdG9yeVxyXG5cdFx0ICogYW5kIG1ldGhvZCBkZWxldGVNb2RpZmllcnMgb3duZWQgQ2FydEZhY3RvcnkuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiByZW1vdmVNZWFsKCkge1xyXG5cdFx0XHRDYXJ0RmFjdG9yeS5yZW1vdmVNZWFsKCk7XHJcblx0XHRcdENhcnRGYWN0b3J5LmRlbGV0ZU1vZGlmaWVycygpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsQ29udHJvbGxlciNzYXZlTWVhbFxyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbENvbnRyb2xsZXJcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogQ2FsbCBtZXRob2QgcmVtb3ZlTWVhbCBvd25lZCBDYXJ0RmFjdG9yeVxyXG5cdFx0ICogYW5kIG1ldGhvZCBhZGRNZWFsVG9DYXJ0TGlzdCBvd25lZCBDYXJ0RmFjdG9yeS5cclxuXHRcdCAqKi9cclxuXHRcdGZ1bmN0aW9uIHNhdmVNZWFsKCkge1xyXG5cdFx0XHRDYXJ0RmFjdG9yeS5yZW1vdmVNZWFsKCk7XHJcblx0XHRcdHZtLmFkZE1lYWwoKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHRhbmd1bGFyXHJcblx0XHQubW9kdWxlKFwiTWVhbHNcIilcclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIGRpcmVjdGl2ZVxyXG5cdFx0ICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOm1lYWxzTGlzdFxyXG5cdFx0ICpcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBsaXN0IG9mIG1lYWxzLlxyXG5cdFx0ICpcclxuXHRcdCAqIEB1c2FnZSA8bWVhbHMtbGlzdD48L21lYWxzLWxpc3Q+XHJcblx0XHQgKiovXHJcblx0XHQuY29tcG9uZW50KFwibWVhbHNMaXN0XCIsIHtcclxuXHRcdFx0dGVtcGxhdGVVcmwgOiBcImNvbXBvbmVudC10ZW1wbGF0ZXMvbWVhbHNMaXN0L3RlbXBsYXRlL21lYWxzTGlzdC5odG1sXCIsXHJcblx0XHRcdGJpbmRpbmdzIDoge30sXHJcblx0XHRcdGNvbnRyb2xsZXJBcyA6IFwibWVhbHNMaXN0XCIsXHJcblx0XHRcdGNvbnRyb2xsZXIgOiBNZWFsc0xpc3RDb250cm9sbGVyXHJcblx0XHR9KTtcclxuXHJcblx0LyoqXHJcblx0ICogQG5nZG9jIGNvbnRyb2xsZXJcclxuXHQgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXJcclxuXHQgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcblx0ICogQHByb3BlcnR5IHtzdHJpbmd9IGN1cnJlbmN5IEN1cnJlbmN5LlxyXG5cdCAqIEBwcm9wZXJ0eSB7b2JqZWN0W119IHByb2R1Y3RzIEFycmF5IG9mIHByb2R1Y3RzLlxyXG5cdCAqXHJcblx0ICogQGRlc2NyaXB0aW9uXHJcblx0ICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtZWFsc0xpc3RcIi5cclxuXHQgKiBIYW5kbGUgYSB1c2VyIGNob2ljZSBhYm91dCBtZWFsLlxyXG5cdCAqKi9cclxuXHRmdW5jdGlvbiBNZWFsc0xpc3RDb250cm9sbGVyKE1lYWxzRmFjdG9yeSkge1xyXG5cclxuXHRcdGNvbnN0IHZtID0gdGhpcztcclxuXHJcblxyXG5cdFx0dm0ub3Blbk1lYWwgPSBvcGVuTWVhbDtcclxuXHRcdHZtLmN1cnJlbmN5ID0gXCJcIjtcclxuXHRcdHZtLnByb2R1Y3RzID0gbnVsbDtcclxuXHJcblx0XHRhY3RpdmF0ZSgpO1xyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogQG5nZG9jIG1ldGhvZFxyXG5cdFx0ICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyI2FjdGl2YXRlXHJcblx0XHQgKiBAbWV0aG9kT2YgTWVhbHMuY29udHJvbGxlcjpNZWFsc0xpc3RDb250cm9sbGVyXHJcblx0XHQgKiBAZGVzY3JpcHRpb25cclxuXHRcdCAqIE1ldGhvZCB0byBpbml0aWFsaXplIGRhdGEuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuXHRcdFx0TWVhbHNGYWN0b3J5LmdldE1lYWxzKClcclxuXHRcdFx0XHQudGhlbihnZXRQcm9kdWN0cyk7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAbmdkb2MgbWV0aG9kXHJcblx0XHQgKiBAbmFtZSBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXIjZ2V0UHJvZHVjdHNcclxuXHRcdCAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1lYWxzTGlzdENvbnRyb2xsZXJcclxuXHRcdCAqIEBkZXNjcmlwdGlvblxyXG5cdFx0ICogQXNzaWduaW5nIGEgZGF0YSBhdCBwcm9wZXJ0aWVzLlxyXG5cdFx0ICpcclxuXHRcdCAqIEBwYXJhbSB7b2JqZWN0fSBtZWFsc09iaiBNZWFscyBvYmplY3QgY29udGFpbnMgY3VycmVuY3kgYW5kIHByb2R1Y3RzIGFycmF5LlxyXG5cdFx0ICoqL1xyXG5cdFx0ZnVuY3Rpb24gZ2V0UHJvZHVjdHMobWVhbHNPYmopIHtcclxuXHRcdFx0dm0uY3VycmVuY3kgPSBtZWFsc09iai5jdXJyZW5jeTtcclxuXHRcdFx0dm0ucHJvZHVjdHMgPSBtZWFsc09iai5wcm9kdWN0cztcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEBuZ2RvYyBtZXRob2RcclxuXHRcdCAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlciNvcGVuTWVhbFxyXG5cdFx0ICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6TWVhbHNMaXN0Q29udHJvbGxlclxyXG5cdFx0ICogQGRlc2NyaXB0aW9uXHJcblx0XHQgKiBDYWxsIG1ldGhvZCBvcGVuTWVhbCBvd25lZCBNZWFsc0ZhY3RvcnkuXHJcblx0XHQgKlxyXG5cdFx0ICogQHBhcmFtIHtvYmplY3R9IG1lYWwgTWVhbCBvYmplY3QuXHJcblx0XHQgKiovXHJcblx0XHRmdW5jdGlvbiBvcGVuTWVhbChtZWFsKSB7XHJcblx0XHRcdE1lYWxzRmFjdG9yeS5vcGVuTWVhbChtZWFsLCBcIm5ld1wiLCAxKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoXCJNZWFsc1wiKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBuZ2RvYyBkaXJlY3RpdmVcclxuICAgICAgICAgKiBAbmFtZSBNZWFscy5kaXJlY3RpdmU6bWVudVBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdG8gbWVudSBzZWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxtZW51LXBhZ2U+PC9tZW51LXBhZ2U+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJtZW51UGFnZVwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJjb21wb25lbnQtdGVtcGxhdGVzL21lbnUvdGVtcGxhdGUvbWVudVBhZ2UuaHRtbFwiLFxyXG4gICAgICAgICAgICBiaW5kaW5ncyA6IHt9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcIm1lbnVcIixcclxuICAgICAgICAgICAgY29udHJvbGxlciA6IE1lbnVDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNZW51Q29udHJvbGxlclxyXG4gICAgICpcclxuICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICogQ29udHJvbGxlciBjb21wb25lbnQgXCJtZW51UGFnZVwiLlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gTWVudUNvbnRyb2xsZXIoKSB7fVxyXG59KSgpOyIsIihmdW5jdGlvbigpIHtcclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKFwiTWVhbHNcIilcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuZGlyZWN0aXZlOm1vZGlmaWVyc1BhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBkZXNjcmlwdGlvblxyXG4gICAgICAgICAqIENvbXBvbmVudCBwcm92aWRlcyBhbiBpbnRlcmZhY2Ugb2YgbW9kaWZpZXJzIHNlY3Rpb24uXHJcbiAgICAgICAgICogQWNjZXB0cyBmcm9tIHBhcmVudCBjb250cm9sbGVyIGN1cnJlbmN5IGluIHZhcmlhYmxlIFwiY3VycmVuY3lcIi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEB1c2FnZSA8bW9kaWZpZXJzLXBhZ2U+PC9tb2RpZmllcnMtcGFnZT5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgLmNvbXBvbmVudChcIm1vZGlmaWVyc1BhZ2VcIiwge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybCA6IFwiY29tcG9uZW50LXRlbXBsYXRlcy9tb2RpZmllcnMvdGVtcGxhdGUvbW9kaWZpZXJzUGFnZS5odG1sXCIsXHJcbiAgICAgICAgICAgIGJpbmRpbmdzIDoge1xyXG4gICAgICAgICAgICAgICAgY3VycmVuY3k6IFwiQFwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBcyA6IFwibW9kXCIsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXIgOiBNb2RpZmllcnNDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNb2RpZmllcnNDb250cm9sbGVyXHJcbiAgICAgKiBAcmVxdWlyZXMgTWVhbHMuTWVhbHNGYWN0b3J5XHJcbiAgICAgKiBAcmVxdWlyZXMgTWVhbHMuTW9kaWZpZXJzRmFjdG9yeVxyXG4gICAgICogQHByb3BlcnR5IHtvYmplY3RbXX0gbW9kaWZpZXJzIEFycmF5IG9mIG1vZGlmaWVycy5cclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwibW9kaWZpZXJzUGFnZVwiLlxyXG4gICAgICogSGFuZGxlIGEgdXNlciBjaG9pY2UgYWJvdXQgbW9kaWZpZXJzLlxyXG4gICAgICoqL1xyXG4gICAgZnVuY3Rpb24gTW9kaWZpZXJzQ29udHJvbGxlcihNZWFsc0ZhY3RvcnksIE1vZGlmaWVyc0ZhY3RvcnkpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgdm0gICAgICAgICAgICAgICAgPSB0aGlzO1xyXG4gICAgICAgIGxldCAgIHNlbGVjdGVkTW9kaWZpZXJzID0gW107XHJcblxyXG4gICAgICAgIHZtLm1vZGlmaWVycyAgICAgID0gTWVhbHNGYWN0b3J5LmdldE1vZGlmaWVycygpO1xyXG4gICAgICAgIHZtLnNlbGVjdE1vZGlmaWVyID0gc2VsZWN0TW9kaWZpZXI7XHJcblxyXG4gICAgICAgIGNsZWFuUGlja01vZGlmaWVycygpO1xyXG5cclxuICAgICAgICBpZiAoTWVhbHNGYWN0b3J5LmdldEN1cnJlbnRNZWFsU3RhdHVzKCkgPT09IFwiZWRpdFwiKSB7XHJcbiAgICAgICAgICAgIC8vUGljayBjaGVja2JveGVzIGZvciBzZWxlY3QgbW9kaWZpZXJzXHJcbiAgICAgICAgICAgIGxldCBjaGVja2VkTW9kaWZpZXJzID0gTW9kaWZpZXJzRmFjdG9yeS5nZXRDaGVja2VkTW9kaWZpZXJzKCk7XHJcbiAgICAgICAgICAgIE1vZGlmaWVyc0ZhY3RvcnkucGlja0NoZWNrZWRNb2RpZmllcnModm0ubW9kaWZpZXJzLCBzZWxlY3RlZE1vZGlmaWVycywgY2hlY2tlZE1vZGlmaWVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpNb2RpZmllcnNDb250cm9sbGVyI2NsZWFuUGlja01vZGlmaWVyc1xyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1vZGlmaWVyc0NvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDbGVhbiBwaWNrIG1vZGlmaWVycyBjaGVja2JveC5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gY2xlYW5QaWNrTW9kaWZpZXJzKCkge1xyXG4gICAgICAgICAgICBpZiAodm0ubW9kaWZpZXJzKSB7XHJcbiAgICAgICAgICAgICAgICB2bS5tb2RpZmllcnMuZm9yRWFjaCgoaXRlbSkgPT4gaXRlbS5jaGVjayA9IGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIG1ldGhvZFxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmNvbnRyb2xsZXI6TW9kaWZpZXJzQ29udHJvbGxlciNzZWxlY3RNb2RpZmllclxyXG4gICAgICAgICAqIEBtZXRob2RPZiBNZWFscy5jb250cm9sbGVyOk1vZGlmaWVyc0NvbnRyb2xsZXJcclxuICAgICAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAgICAgKiBDYWxsIG1ldGhvZCBzZWxlY3RNb2RpZmllciBvd25lZCBNb2RpZmllcnNGYWN0b3J5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtvYmplY3R9IG1vZGlmaWVyIE1vZGlmaWVyIG9iamVjdC5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0TW9kaWZpZXIobW9kaWZpZXIpIHtcclxuICAgICAgICAgICAgTW9kaWZpZXJzRmFjdG9yeS5zZWxlY3RNb2RpZmllcihzZWxlY3RlZE1vZGlmaWVycywgbW9kaWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZShcIk1lYWxzXCIpXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gICAgICAgICAqIEBuYW1lIE1lYWxzLmRpcmVjdGl2ZTpzZWxlY3RDb3VudFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogQ29tcG9uZW50IHByb3ZpZGVzIGFuIGludGVyZmFjZSB0byBzZWxlY3QgYW1vdW50IG9mIG1lYWwuXHJcbiAgICAgICAgICogVHJhbnNmZXJzIHRvIHRoZSBwYXJlbnQgY29udHJvbGxlciBzZWxlY3RlZCBhbW91bnQgb2YgbWVhbCBpbiB2YXJpYWJsZSBcInNlbGVjdFwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHVzYWdlIDxzZWxlY3QtY291bnQ+PC9zZWxlY3QtY291bnQ+XHJcbiAgICAgICAgICoqL1xyXG4gICAgICAgIC5jb21wb25lbnQoXCJzZWxlY3RDb3VudFwiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsIDogXCJjb21wb25lbnQtdGVtcGxhdGVzL3NlbGVjdENvdW50L3RlbXBsYXRlL3NlbGVjdENvdW50UGFnZS5odG1sXCIsXHJcbiAgICAgICAgICAgIGJpbmRpbmdzIDoge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0OiBcIj1cIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXMgOiBcInNlbGVjdFwiLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyIDogU2VsZWN0Q291bnRDb250cm9sbGVyXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAbmdkb2MgY29udHJvbGxlclxyXG4gICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXJcclxuICAgICAqXHJcbiAgICAgKiBAZGVzY3JpcHRpb25cclxuICAgICAqIENvbnRyb2xsZXIgY29tcG9uZW50IFwic2VsZWN0Q291bnRcIi5cclxuICAgICAqIENhcHR1cmVzIHRoZSB1c2VyJ3MgY2hvaWNlIGF0IGFtb3VudC5cclxuICAgICAqKi9cclxuICAgIGZ1bmN0aW9uIFNlbGVjdENvdW50Q29udHJvbGxlcigpIHtcclxuXHJcbiAgICAgICAgY29uc3Qgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICB2bS5zZWxlY3ROdW0gPSBzZWxlY3ROdW07XHJcbiAgICAgICAgdm0uYWN0aXZlTnVtID0gYWN0aXZlTnVtO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXIjc2VsZWN0TnVtXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6U2VsZWN0Q291bnRDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogU2VsZWN0IG1lYWwgYW1vdW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IG51bSBNZWFsIGFtb3VudC5cclxuICAgICAgICAgKiovXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWN0TnVtKG51bSkge1xyXG4gICAgICAgICAgICB2bS5zZWxlY3QgPSBudW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAbmdkb2MgbWV0aG9kXHJcbiAgICAgICAgICogQG5hbWUgTWVhbHMuY29udHJvbGxlcjpTZWxlY3RDb3VudENvbnRyb2xsZXIjYWN0aXZlTnVtXHJcbiAgICAgICAgICogQG1ldGhvZE9mIE1lYWxzLmNvbnRyb2xsZXI6U2VsZWN0Q291bnRDb250cm9sbGVyXHJcbiAgICAgICAgICogQGRlc2NyaXB0aW9uXHJcbiAgICAgICAgICogUmV0dXJuIHRydWUgaWYgdmFyaWFibGUgc2VsZWN0IGlzIG51bSwgZWxzZSBmYWxzZS5cclxuICAgICAgICAgKiBJZiBmdW5jdGlvbiByZXR1cm4gdHJ1ZSwgdGhlIGJ1dHRvbiB3aXRoIG51bSBnZXQgY2xhc3MgXCJhY3RpdmVcIi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBudW0gTWVhbCBhbW91bnQuXHJcbiAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBzZWxlY3QgaXMgbnVtLlxyXG4gICAgICAgICAqKi9cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmVOdW0obnVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2bS5zZWxlY3QgPT09IG51bTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pKCk7Il19
